var w=(M,n,t)=>new Promise((v,g)=>{var b=l=>{try{j(t.next(l))}catch(p){g(p)}},x=l=>{try{j(t.throw(l))}catch(p){g(p)}},j=l=>l.done?v(l.value):Promise.resolve(l.value).then(b,x);j((t=t.apply(M,n)).next())});import{n as xe,r as i,$ as V,U as h,a0 as he,j as e,f as ue,a1 as k,p as L,a2 as H,t as I,M as C,a3 as ge,a4 as je,v as O,Z as D,a5 as W,aq as G,ar as Q,x as pe}from"./chunk-COTa-BBv.js";import{ResponsiveLayout as Ne}from"./ResponsiveLayout.tsx-wqK2pe-W.js";import{a as fe,u as ve,B as r,C as o,b as m}from"./main-BEfTDqLJ.js";import{I as be}from"./chunk-D_ypG4Oz.js";import{B as y}from"./chunk-uGCRAzUf.js";import{A as Y,a as $,b as q}from"./chunk-lml2Yya-.js";import{T as we,a as Ce,b as S,c as A}from"./chunk-Cvi3W8GP.js";import{S as Z,a as K,b as X,c as ee,d as f}from"./chunk-4itbAUBr.js";import{D as ye,a as Se,b as Ae,c as _e,d as Te}from"./chunk-B8iSjt08.js";import{a as ke,u as Le}from"./chunk-DMfvXLjl.js";import{u as De}from"./chunk-CW661r-E.js";import{m as _}from"./chunk-COG8KeUH.js";import"./chunk-DvlvDbdf.js";import"./chunk-BlluHz2J.js";import"./chunk-DJzzOJWe.js";import"./chunk-BA32w1ww.js";import"./chunk-CasIWBEQ.js";import"./chunk-C4jjqBrH.js";import"./chunk-Cv-qEgNt.js";import"./chunk-DmQrF9DI.js";const as=()=>{const{user:M}=fe();xe();const{toast:n}=ve(),{communities:t,loading:v,joinCommunity:g,leaveCommunity:b}=ke();De(),Le();const[x,j]=i.useState(""),[l,p]=i.useState("All Categories"),[T,z]=i.useState("grid"),[F,se]=i.useState("members"),[J,P]=i.useState(null),[ae,R]=i.useState(!1),[te,le]=i.useState("discover"),[ie,re]=i.useState(!1),[B,U]=i.useState(!1),[Me,ze]=i.useState({category:"All Categories",location:"Any Location",size:"Any Size",activity:"Any Activity",sortBy:"members"}),ne=[{id:"all",name:"All Categories",icon:V,color:"bg-gray-500",count:t.length},{id:"music",name:"Music",icon:Music,color:"bg-purple-500",count:t.filter(s=>s.category==="Music").length},{id:"art",name:"Art",icon:Palette,color:"bg-pink-500",count:t.filter(s=>s.category==="Art").length},{id:"community",name:"Community",icon:h,color:"bg-blue-500",count:t.filter(s=>s.category==="Community").length},{id:"food",name:"Food",icon:Utensils,color:"bg-orange-500",count:t.filter(s=>s.category==="Food").length},{id:"tech",name:"Technology",icon:Laptop,color:"bg-indigo-500",count:t.filter(s=>s.category==="Technology").length},{id:"wellness",name:"Health & Wellness",icon:Dumbbell,color:"bg-green-500",count:t.filter(s=>s.category==="Health & Wellness").length},{id:"sports",name:"Sports",icon:he,color:"bg-red-500",count:t.filter(s=>s.category==="Sports").length},{id:"education",name:"Education",icon:GraduationCap,color:"bg-yellow-500",count:t.filter(s=>s.category==="Education").length},{id:"business",name:"Business",icon:Briefcase,color:"bg-gray-600",count:t.filter(s=>s.category==="Business").length},{id:"entertainment",name:"Entertainment",icon:PartyPopper,color:"bg-pink-600",count:t.filter(s=>s.category==="Entertainment").length}],N=[...t.filter(s=>{const a=s.name.toLowerCase().includes(x.toLowerCase())||s.description&&s.description.toLowerCase().includes(x.toLowerCase())||s.tags&&s.tags.some(d=>d.toLowerCase().includes(x.toLowerCase())),c=l==="All Categories"||s.category===l;return a&&c})].sort((s,a)=>{switch(F){case"members":return(a.member_count||a.members||0)-(s.member_count||s.members||0);case"activity":return(a.activity_score||0)-(s.activity_score||0);case"created":return new Date(a.created_at||a.createdAt).getTime()-new Date(s.created_at||s.createdAt).getTime();case"name":return s.name.localeCompare(a.name);default:return 0}}),ce=i.useCallback(()=>w(null,null,function*(){U(!0);try{yield new Promise(s=>setTimeout(s,1e3)),n({title:"Communities Refreshed",description:"Latest communities have been loaded."})}catch(s){n({title:"Refresh Failed",description:"Unable to refresh communities. Please try again.",variant:"destructive"})}finally{U(!1)}}),[n]),oe=i.useCallback(s=>w(null,null,function*(){try{yield g(s),n({title:"Joined Community",description:"You've successfully joined this community!"})}catch(a){n({title:"Join Failed",description:"Unable to join community. Please try again.",variant:"destructive"})}}),[g,n]);i.useCallback(s=>w(null,null,function*(){try{yield b(s),n({title:"Left Community",description:"You've successfully left this community."})}catch(a){n({title:"Leave Failed",description:"Unable to leave community. Please try again.",variant:"destructive"})}}),[b,n]);const E=s=>{P(s),R(!0)},me=({community:s,isOpen:a,onClose:c})=>{const[d,u]=i.useState("");return e.jsx(ye,{open:a,onOpenChange:c,children:e.jsxs(Se,{className:"max-w-2xl",children:[e.jsxs(Ae,{children:[e.jsx(_e,{className:"text-2xl font-bold",children:s.name}),e.jsx(Te,{children:"Join this amazing community and connect with like-minded people"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:s.image_url||s.image||"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=800&h=400&fit=crop",alt:s.name,className:"w-32 h-24 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[s.member_count||s.members||0," members"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(C,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.location||"Online"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(G,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[s.activity_level||"Active"," community"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Created ",new Date(s.created_at||s.createdAt).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Why do you want to join this community?"}),e.jsx("textarea",{placeholder:"Tell us about your interests and what you hope to contribute...",value:d,onChange:de=>u(de.target.value),className:"w-full p-3 border rounded-lg resize-none",rows:3})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{className:"flex-1 btn-event",onClick:()=>{oe(s.id),c()},children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Join Community"]}),e.jsx(r,{variant:"outline",onClick:c,children:"Cancel"})]})]})]})})};return e.jsx(Ne,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Communities"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Connect with like-minded people and build meaningful relationships"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(r,{variant:"outline",onClick:ce,disabled:B,children:[e.jsx(ue,{className:`w-4 h-4 mr-2 ${B?"animate-spin":""}`}),"Refresh"]}),e.jsx(r,{className:"btn-event",asChild:!0,children:e.jsxs(k,{to:"/create-community",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Create Community"]})})]})]}),e.jsxs(we,{value:te,onValueChange:le,className:"space-y-6",children:[e.jsxs(Ce,{className:"grid grid-cols-4 w-full",children:[e.jsxs(S,{value:"discover",className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Discover"]}),e.jsxs(S,{value:"trending",className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),"Trending"]}),e.jsxs(S,{value:"nearby",className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Nearby"]}),e.jsxs(S,{value:"my-communities",className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"My Communities"]})]}),e.jsxs(A,{value:"discover",className:"space-y-6",children:[e.jsx(o,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search communities, topics, or interests...",value:x,onChange:s=>j(s.target.value),className:"pl-10"})]}),e.jsxs(Z,{value:l,onValueChange:p,children:[e.jsx(K,{className:"w-full lg:w-48",children:e.jsx(X,{placeholder:"Category"})}),e.jsx(ee,{children:ne.map(s=>e.jsx(f,{value:s.name,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.name," (",s.count,")"]})},s.id))})]}),e.jsxs(Z,{value:F,onValueChange:se,children:[e.jsx(K,{className:"w-full lg:w-40",children:e.jsx(X,{placeholder:"Sort by"})}),e.jsxs(ee,{children:[e.jsx(f,{value:"members",children:"Members"}),e.jsx(f,{value:"activity",children:"Activity"}),e.jsx(f,{value:"created",children:"Created"}),e.jsx(f,{value:"name",children:"Name"})]})]}),e.jsxs("div",{className:"flex border rounded-lg",children:[e.jsx(r,{variant:T==="grid"?"default":"ghost",size:"sm",onClick:()=>z("grid"),className:"rounded-r-none",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx(r,{variant:T==="list"?"default":"ghost",size:"sm",onClick:()=>z("list"),className:"rounded-l-none",children:e.jsx(ge,{className:"w-4 h-4"})})]})]})})}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:[l==="All Categories"?"All Communities":l," (",N.length,")"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>re(!ie),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Filters"]})})]}),T==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v?[...Array(6)].map((s,a)=>e.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},children:e.jsxs(o,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-muted rounded-t-lg"}),e.jsxs(m,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})]})},a)):N.length>0?N.map((s,a)=>{var c,d,u;return e.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},whileHover:{y:-5},children:e.jsxs(o,{className:"group cursor-pointer hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image_url||s.image||"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=800&h=400&fit=crop",alt:s.name,className:"w-full h-48 object-cover rounded-t-lg"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(y,{className:"bg-white/90 text-black",children:s.category})}),e.jsx("div",{className:"absolute bottom-4 left-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(h,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.member_count||s.members||0," members"]})]})})]}),e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.name,s.is_verified&&e.jsxs(y,{className:"bg-blue-500 text-white text-xs",children:[e.jsx(O,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Y,{className:"w-6 h-6",children:[e.jsx($,{src:s.creator_avatar||((c=s.creator)==null?void 0:c.avatar)}),e.jsx(q,{children:(s.creator_name||((d=s.creator)==null?void 0:d.name)||"C")[0]})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.creator_name||((u=s.creator)==null?void 0:u.name)||"Community Creator"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>E(s),children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"Join"]}),e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(W,{className:"w-4 h-4"})})]})]})]})})]})},s.id)}):e.jsx("div",{className:"col-span-full",children:e.jsx(o,{children:e.jsxs(m,{className:"p-8 text-center",children:[e.jsx(h,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Communities Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:x||l!=="All Categories"?"No communities match your search criteria.":"There are no communities available at the moment."}),e.jsx(k,{to:"/create-community",children:e.jsxs(r,{className:"btn-event",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Create Community"]})})]})})})}):e.jsx("div",{className:"space-y-4",children:v?[...Array(6)].map((s,a)=>e.jsx(_.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:a*.1},children:e.jsx(o,{className:"animate-pulse",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-32 h-24 bg-muted rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})]})})})},a)):N.length>0?N.map((s,a)=>{var c,d,u;return e.jsx(_.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:a*.1},whileHover:{x:5},children:e.jsx(o,{className:"group cursor-pointer hover:shadow-lg transition-all duration-300",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("img",{src:s.image_url||s.image||"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=800&h=400&fit=crop",alt:s.name,className:"w-32 h-24 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.name,s.is_verified&&e.jsxs(y,{className:"bg-blue-500 text-white text-xs",children:[e.jsx(O,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:s.description})]}),e.jsx(r,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(W,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3"}),s.member_count||s.members||0," members"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),s.location||"Online"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3"}),s.activity_level||"Active"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),new Date(s.created_at||s.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Y,{className:"w-6 h-6",children:[e.jsx($,{src:s.creator_avatar||((c=s.creator)==null?void 0:c.avatar)}),e.jsx(q,{children:(s.creator_name||((d=s.creator)==null?void 0:d.name)||"C")[0]})]}),e.jsx("span",{className:"text-sm font-medium",children:s.creator_name||((u=s.creator)==null?void 0:u.name)||"Community Creator"})]}),e.jsx(y,{className:"badge-event",children:s.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>E(s),children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"Join"]}),e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(pe,{className:"w-4 h-4"})})]})]})]})]})})})},s.id)}):e.jsx(o,{children:e.jsxs(m,{className:"p-8 text-center",children:[e.jsx(h,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Communities Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:x||l!=="All Categories"?"No communities match your search criteria.":"There are no communities available at the moment."}),e.jsx(k,{to:"/create-community",children:e.jsxs(r,{className:"btn-event",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Create Community"]})})]})})})]})]}),e.jsx(A,{value:"trending",className:"space-y-6",children:e.jsx(o,{children:e.jsxs(m,{className:"p-8 text-center",children:[e.jsx(I,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Trending Communities"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})]})})}),e.jsx(A,{value:"nearby",className:"space-y-6",children:e.jsx(o,{children:e.jsxs(m,{className:"p-8 text-center",children:[e.jsx(C,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nearby Communities"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})]})})}),e.jsx(A,{value:"my-communities",className:"space-y-6",children:e.jsx(o,{children:e.jsxs(m,{className:"p-8 text-center",children:[e.jsx(h,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"My Communities"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})]})})})]}),J&&e.jsx(me,{community:J,isOpen:ae,onClose:()=>{R(!1),P(null)}})]})})};export{as as default};
