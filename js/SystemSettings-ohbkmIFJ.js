var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,n=(e,s)=>{for(var a in s||(s={}))i.call(s,a)&&l(e,a,s[a]);if(t)for(var a of t(s))r.call(s,a)&&l(e,a,s[a]);return e},c=(e,t)=>s(e,a(t)),o=(e,s,a)=>new Promise((t,i)=>{var r=e=>{try{n(a.next(e))}catch(s){i(s)}},l=e=>{try{n(a.throw(e))}catch(s){i(s)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,l);n((a=a.apply(e,s)).next())});import{c as d,r as m,j as h,C as x,v as j,w as u,x as p,y as _,S as g,B as v,k as f}from"./main-u5iDOJMZ.js";import{I as y}from"./input-d0wpgTJ2.js";import{L as N}from"./label-BmJUPftL.js";import{S as b}from"./switch-CjfEjYqx.js";import{T as C}from"./textarea-44C4KWaW.js";import{S as w,a as S,b as k,c as F,d as P}from"./select-BloqB5ko.js";import{A,a as q}from"./alert-7nHfBPfv.js";import{T as E,a as M,b as T,c as U}from"./tabs-Dn7YRzvT.js";import{u as L,A as R,a as z,b as O}from"./AdminLayout-CeQ3vd6z.js";import{A as D}from"./alert-triangle-lyQ4bE6N.js";import{G as V}from"./globe-Om9hcPSo.js";import{P as B,Z as G}from"./zap-BrBeKdrO.js";import{S as I}from"./shield-sCmGbvNz.js";import{L as H}from"./lock-BH4cQa9v.js";import{U as J}from"./users-BKDXsamp.js";import{F as Z}from"./file-text-sQiiCSOe.js";import{B as W}from"./bell-wBykza9e.js";import{M as X}from"./mail-CkXFPHcI.js";import{S as Y}from"./save-CoFuto5w.js";import"./index-9dp5BQ5P.js";import"./index-jVOyRz7F.js";import"./index-Dy-VqNBB.js";import"./Combination-D3NAapk3.js";import"./chevron-up-MfWNy2Yr.js";import"./check-CT-bNmTi.js";import"./eye-off-DBLSYTPz.js";import"./eye-rgHTj3H0.js";import"./loader-2-BaQ9JvXw.js";import"./scroll-area-DANvZfFy.js";import"./bar-chart-3-CGpjSjyG.js";import"./log-out-CGc8M4_-.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=d("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),K=()=>{L();const[e,s]=m.useState(!0),[a,t]=m.useState(!1),[i,r]=m.useState(null),[l,d]=m.useState(null),[K,Q]=m.useState({}),ee=m.useMemo(()=>new R,[]);m.useEffect(()=>{se()},[se]);const se=m.useCallback(()=>o(void 0,null,function*(){try{s(!0),r(null);const e=yield ee.getSystemSettings(),a={};e.forEach(e=>{a[e.setting_key]=e}),Q(a)}catch(e){r(e instanceof Error?e.message:"Failed to load settings")}finally{s(!1)}}),[ee]),ae=(e,s)=>{Q(a=>c(n({},a),{[e]:c(n({},a[e]),{setting_value:s.toString()})}))},te=(e,s="")=>{var a;return(null==(a=K[e])?void 0:a.setting_value)||s};return e?h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):h.jsx(z,{requiredPermission:"settings:manage",children:h.jsx(O,{children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),h.jsx("p",{className:"text-gray-600",children:"Configure platform settings and system preferences"})]}),i&&h.jsxs(A,{className:"mb-6",children:[h.jsx(D,{className:"h-4 w-4"}),h.jsx(q,{children:i})]}),l&&h.jsx(A,{className:"mb-6",children:h.jsx(q,{className:"text-green-800",children:l})}),h.jsxs(E,{defaultValue:"general",className:"space-y-6",children:[h.jsxs(M,{children:[h.jsx(T,{value:"general",children:"General"}),h.jsx(T,{value:"security",children:"Security"}),h.jsx(T,{value:"users",children:"Users"}),h.jsx(T,{value:"content",children:"Content"}),h.jsx(T,{value:"notifications",children:"Notifications"}),h.jsx(T,{value:"advanced",children:"Advanced"})]}),h.jsxs(U,{value:"general",className:"space-y-6",children:[h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(V,{className:"h-5 w-5"}),"Platform Information"]}),h.jsx(p,{children:"Basic platform configuration"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"platform_name",children:"Platform Name"}),h.jsx(y,{id:"platform_name",value:te("platform_name","Glocal"),onChange:e=>ae("platform_name",e.target.value),placeholder:"Enter platform name"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"platform_description",children:"Platform Description"}),h.jsx(y,{id:"platform_description",value:te("platform_description"),onChange:e=>ae("platform_description",e.target.value),placeholder:"Enter platform description"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"contact_email",children:"Contact Email"}),h.jsx(y,{id:"contact_email",type:"email",value:te("contact_email"),onChange:e=>ae("contact_email",e.target.value),placeholder:"admin@example.com"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"timezone",children:"Default Timezone"}),h.jsxs(w,{value:te("timezone","UTC"),onValueChange:e=>ae("timezone",e),children:[h.jsx(S,{children:h.jsx(k,{})}),h.jsxs(F,{children:[h.jsx(P,{value:"UTC",children:"UTC"}),h.jsx(P,{value:"America/New_York",children:"Eastern Time"}),h.jsx(P,{value:"America/Chicago",children:"Central Time"}),h.jsx(P,{value:"America/Denver",children:"Mountain Time"}),h.jsx(P,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]})})]}),h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(B,{className:"h-5 w-5"}),"Appearance"]}),h.jsx(p,{children:"Platform appearance settings"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"logo_url",children:"Logo URL"}),h.jsx(y,{id:"logo_url",value:te("logo_url"),onChange:e=>ae("logo_url",e.target.value),placeholder:"https://example.com/logo.png"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"favicon_url",children:"Favicon URL"}),h.jsx(y,{id:"favicon_url",value:te("favicon_url"),onChange:e=>ae("favicon_url",e.target.value),placeholder:"https://example.com/favicon.ico"})]})]})})]})]}),h.jsxs(U,{value:"security",className:"space-y-6",children:[h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(I,{className:"h-5 w-5"}),"Security Settings"]}),h.jsx(p,{children:"Platform security configuration"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"maintenance_mode",children:"Maintenance Mode"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Enable maintenance mode to restrict access"})]}),h.jsx(b,{id:"maintenance_mode",checked:"true"===te("maintenance_mode"),onCheckedChange:e=>ae("maintenance_mode",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"registration_enabled",children:"User Registration"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Allow new users to register"})]}),h.jsx(b,{id:"registration_enabled",checked:"true"===te("registration_enabled","true"),onCheckedChange:e=>ae("registration_enabled",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"email_verification_required",children:"Email Verification Required"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Require email verification for new accounts"})]}),h.jsx(b,{id:"email_verification_required",checked:"true"===te("email_verification_required","true"),onCheckedChange:e=>ae("email_verification_required",e)})]})]})})]}),h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(H,{className:"h-5 w-5"}),"Authentication"]}),h.jsx(p,{children:"Authentication and session settings"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"session_timeout",children:"Session Timeout (minutes)"}),h.jsx(y,{id:"session_timeout",type:"number",value:te("session_timeout","60"),onChange:e=>ae("session_timeout",e.target.value),min:"15",max:"1440"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"max_login_attempts",children:"Max Login Attempts"}),h.jsx(y,{id:"max_login_attempts",type:"number",value:te("max_login_attempts","5"),onChange:e=>ae("max_login_attempts",e.target.value),min:"3",max:"10"})]})]})})]})]}),h.jsxs(U,{value:"users",className:"space-y-6",children:[h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(J,{className:"h-5 w-5"}),"User Management"]}),h.jsx(p,{children:"User account and profile settings"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"allow_profile_editing",children:"Allow Profile Editing"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Users can edit their profiles"})]}),h.jsx(b,{id:"allow_profile_editing",checked:"true"===te("allow_profile_editing","true"),onCheckedChange:e=>ae("allow_profile_editing",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"require_location",children:"Require Location"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Users must provide location information"})]}),h.jsx(b,{id:"require_location",checked:"true"===te("require_location","false"),onCheckedChange:e=>ae("require_location",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"auto_approve_users",children:"Auto-approve New Users"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Automatically approve new user registrations"})]}),h.jsx(b,{id:"auto_approve_users",checked:"true"===te("auto_approve_users","true"),onCheckedChange:e=>ae("auto_approve_users",e)})]})]})})]}),h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(G,{className:"h-5 w-5"}),"User Limits"]}),h.jsx(p,{children:"User activity and content limits"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"max_posts_per_day",children:"Max Posts Per Day"}),h.jsx(y,{id:"max_posts_per_day",type:"number",value:te("max_posts_per_day","10"),onChange:e=>ae("max_posts_per_day",e.target.value),min:"1",max:"100"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"max_events_per_month",children:"Max Events Per Month"}),h.jsx(y,{id:"max_events_per_month",type:"number",value:te("max_events_per_month","5"),onChange:e=>ae("max_events_per_month",e.target.value),min:"1",max:"50"})]})]})})]})]}),h.jsxs(U,{value:"content",className:"space-y-6",children:[h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(Z,{className:"h-5 w-5"}),"Content Moderation"]}),h.jsx(p,{children:"Content moderation and filtering settings"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"auto_moderate_content",children:"Auto-moderate Content"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Automatically filter inappropriate content"})]}),h.jsx(b,{id:"auto_moderate_content",checked:"true"===te("auto_moderate_content","false"),onCheckedChange:e=>ae("auto_moderate_content",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"require_content_approval",children:"Require Content Approval"}),h.jsx("p",{className:"text-sm text-gray-500",children:"All content must be approved before publishing"})]}),h.jsx(b,{id:"require_content_approval",checked:"true"===te("require_content_approval","false"),onCheckedChange:e=>ae("require_content_approval",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"allow_anonymous_posts",children:"Allow Anonymous Posts"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Users can post without revealing their identity"})]}),h.jsx(b,{id:"allow_anonymous_posts",checked:"true"===te("allow_anonymous_posts","false"),onCheckedChange:e=>ae("allow_anonymous_posts",e)})]})]})})]}),h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx($,{className:"h-5 w-5"}),"Content Storage"]}),h.jsx(p,{children:"Content storage and retention settings"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"max_file_size_mb",children:"Max File Size (MB)"}),h.jsx(y,{id:"max_file_size_mb",type:"number",value:te("max_file_size_mb","10"),onChange:e=>ae("max_file_size_mb",e.target.value),min:"1",max:"100"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"content_retention_days",children:"Content Retention (days)"}),h.jsx(y,{id:"content_retention_days",type:"number",value:te("content_retention_days","365"),onChange:e=>ae("content_retention_days",e.target.value),min:"30",max:"3650"})]})]})})]})]}),h.jsxs(U,{value:"notifications",className:"space-y-6",children:[h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(W,{className:"h-5 w-5"}),"Notification Settings"]}),h.jsx(p,{children:"Platform notification configuration"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"email_notifications_enabled",children:"Email Notifications"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Enable email notifications for users"})]}),h.jsx(b,{id:"email_notifications_enabled",checked:"true"===te("email_notifications_enabled","true"),onCheckedChange:e=>ae("email_notifications_enabled",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"push_notifications_enabled",children:"Push Notifications"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Enable push notifications"})]}),h.jsx(b,{id:"push_notifications_enabled",checked:"true"===te("push_notifications_enabled","true"),onCheckedChange:e=>ae("push_notifications_enabled",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"welcome_email_enabled",children:"Welcome Email"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Send welcome email to new users"})]}),h.jsx(b,{id:"welcome_email_enabled",checked:"true"===te("welcome_email_enabled","true"),onCheckedChange:e=>ae("welcome_email_enabled",e)})]})]})})]}),h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(X,{className:"h-5 w-5"}),"Email Configuration"]}),h.jsx(p,{children:"Email service configuration"})]}),h.jsx(_,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"smtp_host",children:"SMTP Host"}),h.jsx(y,{id:"smtp_host",value:te("smtp_host"),onChange:e=>ae("smtp_host",e.target.value),placeholder:"smtp.gmail.com"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"smtp_port",children:"SMTP Port"}),h.jsx(y,{id:"smtp_port",type:"number",value:te("smtp_port","587"),onChange:e=>ae("smtp_port",e.target.value),placeholder:"587"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"smtp_username",children:"SMTP Username"}),h.jsx(y,{id:"smtp_username",value:te("smtp_username"),onChange:e=>ae("smtp_username",e.target.value),placeholder:"your-email@gmail.com"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"smtp_password",children:"SMTP Password"}),h.jsx(y,{id:"smtp_password",type:"password",value:te("smtp_password"),onChange:e=>ae("smtp_password",e.target.value),placeholder:"Enter SMTP password"})]})]})})]})]}),h.jsx(U,{value:"advanced",className:"space-y-6",children:h.jsxs(x,{children:[h.jsxs(j,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(g,{className:"h-5 w-5"}),"Advanced Settings"]}),h.jsx(p,{children:"Advanced platform configuration"})]}),h.jsxs(_,{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(N,{htmlFor:"cache_ttl",children:"Cache TTL (seconds)"}),h.jsx(y,{id:"cache_ttl",type:"number",value:te("cache_ttl","3600"),onChange:e=>ae("cache_ttl",e.target.value),min:"60",max:"86400"})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"rate_limit_requests",children:"Rate Limit (requests/min)"}),h.jsx(y,{id:"rate_limit_requests",type:"number",value:te("rate_limit_requests","100"),onChange:e=>ae("rate_limit_requests",e.target.value),min:"10",max:"1000"})]})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"custom_css",children:"Custom CSS"}),h.jsx(C,{id:"custom_css",value:te("custom_css"),onChange:e=>ae("custom_css",e.target.value),placeholder:"/* Custom CSS styles */",rows:6})]}),h.jsxs("div",{children:[h.jsx(N,{htmlFor:"custom_js",children:"Custom JavaScript"}),h.jsx(C,{id:"custom_js",value:te("custom_js"),onChange:e=>ae("custom_js",e.target.value),placeholder:"// Custom JavaScript code",rows:6})]})]})]})})]}),h.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[h.jsxs(v,{variant:"outline",onClick:se,children:[h.jsx(f,{className:"mr-2 h-4 w-4"}),"Reset to Defaults"]}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsxs(v,{variant:"outline",onClick:se,children:[h.jsx(f,{className:"mr-2 h-4 w-4"}),"Reload"]}),h.jsxs(v,{onClick:()=>o(void 0,null,function*(){try{t(!0),r(null),d(null);const e=Object.values(K).filter(e=>e.is_public);yield ee.updateSystemSettings(e),d("Settings saved successfully")}catch(e){r(e instanceof Error?e.message:"Failed to save settings")}finally{t(!1)}}),disabled:a,children:[h.jsx(Y,{className:"mr-2 h-4 w-4"}),a?"Saving...":"Save Settings"]})]})]})]})})})};export{K as default};
