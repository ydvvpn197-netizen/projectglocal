var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,l=(e,s)=>{for(var a in s||(s={}))r.call(s,a)&&n(e,a,s[a]);if(t)for(var a of t(s))i.call(s,a)&&n(e,a,s[a]);return e},o=(e,t)=>s(e,a(t));import{u as c,b as d,r as m,j as x,B as u}from"./index-B5IYdG7F.js";import{B as h}from"./badge-Dh5Uj8vN.js";import{I as p}from"./input-C4_QhDnm.js";import{T as j,a as g,b as f,c as v}from"./tabs-DPPBWbFC.js";import{S as N}from"./scroll-area-Beiyt5Kx.js";import{u as b,D as y,a as w,b as _,e as k}from"./useNotifications-C0wifgqF.js";import{B as C}from"./bell-qeMkXRtc.js";import{R as P}from"./refresh-cw-B0silJ51.js";import{C as G}from"./check-C9wwFfOs.js";import{S as L}from"./settings-DSEWn2wM.js";import{S as M}from"./search-Co_OHmlK.js";import{F as A}from"./filter-DejZCL1b.js";import{U as S}from"./user-UOowhO7W.js";import{M as D,T as O,f as R}from"./index-DWtoKlrM.js";import{m as T}from"./motion-DxwPwFas.js";import"./index-9msbY5CZ.js";import"./index-jVOyRz7F.js";import"./Combination-BxRIZ8rt.js";const q=({notification:e,onMarkAsRead:s,onDelete:a,onNavigate:t,isGeneral:r=!1})=>x.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-4 rounded-lg mb-4 cursor-pointer transition-all hover:shadow-md "+(r?`bg-card ${(e=>{switch(e){case"urgent":return"border-l-red-500";case"high":return"border-l-orange-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-blue-500";default:return"border-l-primary"}})(e.priority)} border-l-4`:e.read?"bg-muted/50":"bg-primary/5 border-l-4 border-l-primary"),onClick:()=>{t(e)},children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx("div",{className:"text-3xl flex-shrink-0",children:((e,s)=>{if(s){return{announcement:"ðŸ“¢",event:"ðŸ“…",community:"ðŸ‘¥",system:"âš™ï¸"}[e]||"ðŸ“¢"}return{booking_request:"ðŸŽ¯",booking_accepted:"âœ…",booking_declined:"âŒ",message_request:"ðŸ’¬",new_follower:"ðŸ‘¥",event_reminder:"ðŸ“…",poll_result:"ðŸ“Š",review_reply:"ðŸ’­",group_invite:"ðŸ‘‹",event_update:"ðŸ”„",discussion_request:"ðŸ’­",discussion_approved:"âœ…",discussion_rejected:"âŒ",event_created:"ðŸ“…",event_updated:"ðŸ”„",event_cancelled:"âŒ",payment_received:"ðŸ’°",payment_failed:"âš ï¸",system_announcement:"ðŸ“¢"}[e]||"ðŸ””"})(e.type,r)}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h3",{className:"font-semibold text-lg",children:e.title}),x.jsxs("div",{className:"flex items-center gap-2",children:[!r&&!e.read&&x.jsx(h,{variant:"default",className:"text-xs",children:"New"}),r&&e.priority&&x.jsx(h,{variant:"outline",className:"text-xs",children:e.priority}),!r&&x.jsx(u,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:s=>{s.stopPropagation(),r||a(e.id)},children:x.jsx(O,{className:"h-4 w-4"})})]})]}),x.jsx("p",{className:"text-muted-foreground mb-3 leading-relaxed",children:e.message}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:R(new Date(e.created_at),"MMM dd, yyyy â€¢ HH:mm")}),e.action_text&&x.jsx(u,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),t(e)},children:e.action_text})]})]})]})}),z=()=>{const{generalNotifications:e,personalNotifications:s,counts:a,loading:t,markAsRead:r,markAllAsRead:i,deleteNotification:n,refresh:h}=b(),{user:O}=c(),R=d(),[T,z]=m.useState(""),[B,H]=m.useState("all"),$=e=>((e,s,a)=>new Promise((t,r)=>{var i=e=>{try{l(a.next(e))}catch(s){r(s)}},n=e=>{try{l(a.throw(e))}catch(s){r(s)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,n);l((a=a.apply(e,s)).next())}))(void 0,null,function*(){if(e.isGeneral||(yield r(e.id)),e.action_url)return void R(e.action_url);const s={booking_request:"/artist-dashboard",booking_accepted:"/artist-dashboard",booking_declined:"/artist-dashboard",message_request:"/messages",new_follower:"/profile",event_reminder:"/events",event_update:"/events",event_created:"/events",event_updated:"/events",event_cancelled:"/events",poll_result:"/community",review_reply:"/community",group_invite:"/community",discussion_request:"/artist-dashboard",discussion_approved:"/community",discussion_rejected:"/community",payment_received:"/artist-dashboard",payment_failed:"/artist-dashboard",system_announcement:"/",announcement:"/",event:"/events",community:"/community",system:"/"}[e.type];s&&R(s)}),E=e=>{n(e)},F=e.filter(e=>e.title.toLowerCase().includes(T.toLowerCase())||e.message.toLowerCase().includes(T.toLowerCase())),I=s.filter(e=>e.title.toLowerCase().includes(T.toLowerCase())||e.message.toLowerCase().includes(T.toLowerCase())),U=[...F.map(e=>o(l({},e),{isGeneral:!0})),...I.map(e=>o(l({},e),{isGeneral:!1}))].sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime());return x.jsx(ResponsiveLayout,{children:x.jsxs("div",{className:"max-w-4xl mx-auto",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[x.jsx(C,{className:"h-8 w-8 text-primary"}),"Notifications"]}),x.jsx("p",{className:"text-muted-foreground mt-2",children:"Stay updated with the latest news and activities"})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs(u,{variant:"outline",size:"sm",onClick:h,disabled:t,children:[x.jsx(P,{className:"h-4 w-4 mr-2 "+(t?"animate-spin":"")}),"Refresh"]}),O&&a.personal>0&&x.jsxs(u,{variant:"outline",size:"sm",onClick:i,children:[x.jsx(G,{className:"h-4 w-4 mr-2"}),"Mark all read"]}),x.jsxs(y,{children:[x.jsx(w,{asChild:!0,children:x.jsxs(u,{variant:"outline",size:"sm",children:[x.jsx(L,{className:"h-4 w-4 mr-2"}),"Settings"]})}),x.jsxs(_,{align:"end",children:[x.jsx(k,{onClick:()=>R("/notification-settings"),children:"Notification Preferences"}),x.jsx(k,{onClick:()=>R("/privacy-settings"),children:"Privacy Settings"})]})]})]})]}),x.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[x.jsxs("div",{className:"relative flex-1",children:[x.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),x.jsx(p,{placeholder:"Search notifications...",value:T,onChange:e=>z(e.target.value),className:"pl-10"})]}),x.jsxs(y,{children:[x.jsx(w,{asChild:!0,children:x.jsxs(u,{variant:"outline",size:"sm",children:[x.jsx(A,{className:"h-4 w-4 mr-2"}),"Filter"]})}),x.jsxs(_,{align:"end",children:[x.jsx(k,{onClick:()=>z(""),children:"All notifications"}),x.jsx(k,{onClick:()=>z("event"),children:"Events"}),x.jsx(k,{onClick:()=>z("booking"),children:"Bookings"}),x.jsx(k,{onClick:()=>z("message"),children:"Messages"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[x.jsx("div",{className:"bg-card p-4 rounded-lg border",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(C,{className:"h-6 w-6 text-primary"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),x.jsx("p",{className:"text-2xl font-bold",children:a.total})]})]})}),O&&x.jsx("div",{className:"bg-card p-4 rounded-lg border",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(S,{className:"h-6 w-6 text-blue-500"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Personal"}),x.jsx("p",{className:"text-2xl font-bold",children:a.personal})]})]})}),x.jsx("div",{className:"bg-card p-4 rounded-lg border",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(D,{className:"h-6 w-6 text-green-500"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"General"}),x.jsx("p",{className:"text-2xl font-bold",children:a.general})]})]})})]}),x.jsxs(j,{value:B,onValueChange:H,className:"w-full",children:[x.jsxs(g,{className:"grid w-full grid-cols-3 mb-6",children:[x.jsxs(f,{value:"all",children:["All (",U.length,")"]}),O&&x.jsxs(f,{value:"personal",children:["Personal (",I.length,")"]}),x.jsxs(f,{value:"general",children:["General (",F.length,")"]})]}),x.jsx(v,{value:"all",className:"space-y-4",children:t?x.jsxs("div",{className:"text-center py-12",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),x.jsx("p",{className:"text-muted-foreground",children:"Loading notifications..."})]}):0===U.length?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(C,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),x.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No notifications found"}),x.jsx("p",{className:"text-muted-foreground",children:T?"Try adjusting your search terms.":"You're all caught up!"})]}):x.jsx(N,{className:"h-[600px] pr-4",children:U.map(e=>x.jsx(q,{notification:e,onMarkAsRead:r,onDelete:E,onNavigate:$,isGeneral:e.isGeneral},`${e.isGeneral?"general":"personal"}-${e.id}`))})}),O&&x.jsx(v,{value:"personal",className:"space-y-4",children:0===I.length?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(S,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),x.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No personal notifications"}),x.jsx("p",{className:"text-muted-foreground",children:T?"Try adjusting your search terms.":"You're all caught up with personal notifications!"})]}):x.jsx(N,{className:"h-[600px] pr-4",children:I.map(e=>x.jsx(q,{notification:e,onMarkAsRead:r,onDelete:E,onNavigate:$,isGeneral:!1},e.id))})}),x.jsx(v,{value:"general",className:"space-y-4",children:0===F.length?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(D,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),x.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No general notifications"}),x.jsx("p",{className:"text-muted-foreground",children:T?"Try adjusting your search terms.":"No general announcements at the moment."})]}):x.jsx(N,{className:"h-[600px] pr-4",children:F.map(e=>x.jsx(q,{notification:e,onMarkAsRead:r,onDelete:E,onNavigate:$,isGeneral:!0},e.id))})})]})]})})};export{z as NotificationsPage};
