var L=Object.defineProperty,k=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var C=(r,a,s)=>a in r?L(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,u=(r,a)=>{for(var s in a||(a={}))E.call(a,s)&&C(r,s,a[s]);if(b)for(var s of b(a))D.call(a,s)&&C(r,s,a[s]);return r},f=(r,a)=>k(r,H(a));var A=(r,a,s)=>new Promise((h,m)=>{var g=t=>{try{x(s.next(t))}catch(d){m(d)}},y=t=>{try{x(s.throw(t))}catch(d){m(d)}},x=t=>t.done?h(t.value):Promise.resolve(t.value).then(g,y);x((s=s.apply(r,a)).next())});import{r as p,j as e,C as l,p as i,q as n,v as c,B as j,t as o,S as P}from"./main-Dczk40-q.js";import{B as S}from"./badge-iBsRNaSn.js";import{T as B,a as M,b as v,c as w}from"./tabs-ChvN7mKq.js";import{u as _,A as F,a as q,b as z}from"./AdminLayout-57oZgQXy.js";import{U as R}from"./alert-vAohCTxn.js";import{U as O}from"./user-check-HA6vCK6U.js";import{F as V}from"./file-text-BzwMQdpb.js";import{A as U}from"./alert-triangle-BCAhts2_.js";import{M as W}from"./message-square-BskFJ3te.js";import{B as X}from"./bar-chart-3-DDoBEagZ.js";import{S as G}from"./shield-Bq_L1461.js";import{C as I}from"./clock-D-HXAPEh.js";import{X as Q}from"./x-circle-DtL0wFqx.js";import{C as J}from"./check-circle-CJSaU0rJ.js";import"./index-DxDoSqvO.js";import"./label-KS36zHkM.js";import"./eye-off-DQT_il_m.js";import"./eye-CXD-3Vg7.js";import"./loader-2-DzDjnuQG.js";import"./scroll-area-Ya-nYYPz.js";import"./log-out-vClmguiA.js";const ge=()=>{var x;const{adminUser:r}=_(),a=p.useMemo(()=>new F,[]),[s,h]=p.useState({isLoading:!0,error:null,stats:{totalUsers:0,activeUsers:0,newUsersToday:0,totalContent:0,pendingReports:0,totalEvents:0,totalPosts:0,totalReviews:0},recentActivity:[],systemHealth:{status:"healthy",uptime:0,responseTime:0,errorRate:0}});p.useEffect(()=>{m()},[m]);const m=p.useCallback(()=>A(void 0,null,function*(){try{h(N=>f(u({},N),{isLoading:!0,error:null}));const t=yield a.getDashboardStats(),d=yield a.getAdminActions({page:1,limit:10,sortBy:"created_at",sortOrder:"desc"}),T={status:"healthy",uptime:99.9,responseTime:150,errorRate:.1};h(N=>f(u({},N),{isLoading:!1,stats:t,recentActivity:d.data||[],systemHealth:T}))}catch(t){h(d=>f(u({},d),{isLoading:!1,error:t instanceof Error?t.message:"Failed to load dashboard data"}))}}),[a]),g=t=>{switch(t){case"healthy":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=t=>{switch(t){case"healthy":return e.jsx(J,{className:"h-4 w-4"});case"warning":return e.jsx(U,{className:"h-4 w-4"});case"error":return e.jsx(Q,{className:"h-4 w-4"});default:return e.jsx(I,{className:"h-4 w-4"})}};return s.isLoading?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):s.error?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs(l,{className:"w-full max-w-md",children:[e.jsx(i,{children:e.jsx(n,{className:"text-red-600",children:"Error Loading Dashboard"})}),e.jsxs(c,{children:[e.jsx("p",{className:"text-gray-600",children:s.error}),e.jsx(j,{onClick:m,className:"mt-4",children:"Retry"})]})]})}):e.jsx(q,{requiredPermission:"dashboard:view",children:e.jsx(z,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",((x=r==null?void 0:r.profile)==null?void 0:x.full_name)||"Admin","!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's what's happening on your platform today."})]}),e.jsxs(B,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(M,{children:[e.jsx(v,{value:"overview",children:"Overview"}),e.jsx(v,{value:"activity",children:"Recent Activity"}),e.jsx(v,{value:"system",children:"System Health"})]}),e.jsxs(w,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.stats.totalUsers.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",s.stats.newUsersToday," today"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.stats.activeUsers.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(s.stats.activeUsers/s.stats.totalUsers*100).toFixed(1),"% engagement"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Total Content"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.stats.totalContent.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Posts, Events, Reviews"})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Pending Reports"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.stats.pendingReports}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Content Distribution"}),e.jsx(o,{children:"Breakdown by content type"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Posts"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.stats.totalPosts})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Events"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.stats.totalEvents})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Reviews"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.stats.totalReviews})]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Quick Actions"}),e.jsx(o,{children:"Common admin tasks"})]}),e.jsxs(c,{className:"space-y-3",children:[e.jsxs(j,{variant:"outline",className:"w-full justify-start",size:"sm",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Manage Users"]}),e.jsxs(j,{variant:"outline",className:"w-full justify-start",size:"sm",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Review Reports"]}),e.jsxs(j,{variant:"outline",className:"w-full justify-start",size:"sm",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"View Analytics"]}),e.jsxs(j,{variant:"outline",className:"w-full justify-start",size:"sm",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"System Settings"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"System Status"}),e.jsx(o,{children:"Platform health overview"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[y(s.systemHealth.status),e.jsx(S,{className:g(s.systemHealth.status),children:s.systemHealth.status})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Uptime:"}),e.jsxs("span",{children:[s.systemHealth.uptime,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Response Time:"}),e.jsxs("span",{children:[s.systemHealth.responseTime,"ms"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Error Rate:"}),e.jsxs("span",{children:[s.systemHealth.errorRate,"%"]})]})]})]})]})]})]}),e.jsx(w,{value:"activity",className:"space-y-6",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Recent Admin Activity"}),e.jsx(o,{children:"Latest actions taken by administrators"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:s.recentActivity.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No recent activity"}):s.recentActivity.map(t=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(G,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.action_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.resource_type,": ",t.resource_id]}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(t.created_at).toLocaleString()})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(S,{variant:t.success?"default":"destructive",children:t.success?"Success":"Failed"})})]},t.id))})})]})}),e.jsx(w,{value:"system",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Performance Metrics"}),e.jsx(o,{children:"Real-time system performance"})]}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"CPU Usage"}),e.jsx("span",{children:"45%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"45%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Memory Usage"}),e.jsx("span",{children:"62%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"62%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Disk Usage"}),e.jsx("span",{children:"28%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:"28%"}})})]})]})})]}),e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Error Logs"}),e.jsx(o,{children:"Recent system errors"})]}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm p-3 bg-red-50 border border-red-200 rounded",children:[e.jsx("div",{className:"font-medium text-red-800",children:"Database Connection Timeout"}),e.jsx("div",{className:"text-red-600",children:"2 minutes ago"})]}),e.jsxs("div",{className:"text-sm p-3 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium text-yellow-800",children:"High Memory Usage Warning"}),e.jsx("div",{className:"text-yellow-600",children:"15 minutes ago"})]}),e.jsxs("div",{className:"text-sm p-3 bg-green-50 border border-green-200 rounded",children:[e.jsx("div",{className:"font-medium text-green-800",children:"All systems operational"}),e.jsx("div",{className:"text-green-600",children:"1 hour ago"})]})]})})]})]})})]})]})})})};export{ge as default};
