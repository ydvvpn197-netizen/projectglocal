var e=(e,s,a)=>new Promise((i,t)=>{var l=e=>{try{r(a.next(e))}catch(s){t(s)}},n=e=>{try{r(a.throw(e))}catch(s){t(s)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(l,n);r((a=a.apply(e,s)).next())});import{c as s,u as a,b as i,r as t,j as l,L as n,T as r,G as o,I as c,B as d,J as m,S as x}from"./main-u5iDOJMZ.js";import{u as h}from"./useLocationManager-c3ILLQ3N.js";import{D as j,a as p,b as u,d as f,e as N}from"./useNotifications-DNCpc7NU.js";import{I as v}from"./input-d0wpgTJ2.js";import{N as y}from"./NotificationBell-4ukuyDx4.js";import{N as g}from"./NotificationButton-QcrDLMMB.js";import{S as b}from"./search-BsWmJlwB.js";import{M as k}from"./map-pin-CcmxiK6P.js";import{U as w}from"./user-DlaYKRnl.js";import{L as C}from"./log-out-CGc8M4_-.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=s("MapPinOff",[["path",{d:"M5.43 5.43A8.06 8.06 0 0 0 4 10c0 6 8 12 8 12a29.94 29.94 0 0 0 5-5",key:"12a8pk"}],["path",{d:"M19.18 13.52A8.66 8.66 0 0 0 20 10a8 8 0 0 0-8-8 7.88 7.88 0 0 0-3.52.82",key:"1r9f6y"}],["path",{d:"M9.13 9.13A2.78 2.78 0 0 0 9 10a3 3 0 0 0 3 3 2.78 2.78 0 0 0 .87-.13",key:"erynq7"}],["path",{d:"M14.9 9.25a3 3 0 0 0-2.15-2.16",key:"1hwwmx"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),M=s("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),S=t.memo(({route:e,label:s})=>l.jsx(n,{to:e,className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:s}));
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function z({showLocationButton:s=!0,showAuthButtons:z=!1,showSearch:B=!0,className:A=""}){var D;const{user:I,signOut:P}=a(),$=i(),{location:F,enabled:G,loading:O,detectLocation:R,refreshLocation:U}=h(),[q,E]=t.useState(!1),[T,J]=t.useState("");return l.jsx("header",{className:`border-b bg-background/80 backdrop-blur-sm sticky top-0 z-50 ${A}`,children:l.jsx("div",{className:"container mx-auto px-4 py-4",children:l.jsxs("div",{className:"flex items-center justify-between gap-4",children:[l.jsx("div",{className:"flex items-center gap-3 flex-shrink-0",children:l.jsxs(n,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[l.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-primary-foreground font-bold",children:"L"})}),l.jsx("span",{className:"text-xl font-bold hidden sm:inline",children:"Glocal"})]})}),I&&l.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[l.jsx(S,{route:"/feed",label:"Feed"}),l.jsx(S,{route:"/discover",label:"Discover"}),l.jsx(S,{route:"/events",label:"Events"}),l.jsx(S,{route:"/community",label:"Community"}),l.jsx(S,{route:"/book-artist",label:"Book Artists"})]}),I&&B&&l.jsx("form",{onSubmit:e=>{e.preventDefault(),T.trim()&&$(`/discover?search=${encodeURIComponent(T.trim())}`)},className:"flex-1 max-w-md mx-4",children:l.jsxs("div",{className:"relative",children:[l.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),l.jsx(v,{placeholder:"Search artists, events, posts...",value:T,onChange:e=>J(e.target.value),className:"pl-10"})]})}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s&&I&&l.jsx(r,{children:l.jsxs(o,{children:[l.jsx(c,{asChild:!0,children:l.jsx(d,{variant:"ghost",size:"icon",onClick:()=>e(this,null,function*(){E(!0);try{G?yield U():yield R()}finally{E(!1)}}),disabled:q||O,className:"relative",children:q||O?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}):G?l.jsx(k,{className:"h-4 w-4"}):l.jsx(L,{className:"h-4 w-4"})})}),l.jsx(m,{children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"font-medium",children:G?"Location Enabled":"Location Disabled"}),G&&F&&l.jsx("p",{className:"text-xs text-muted-foreground",children:F.name||`${F.lat.toFixed(4)}, ${F.lng.toFixed(4)}`})]})})]})}),s&&I&&G&&l.jsx(r,{children:l.jsxs(o,{children:[l.jsx(c,{asChild:!0,children:l.jsx(d,{variant:"ghost",size:"icon",onClick:()=>e(this,null,function*(){E(!0);try{yield U()}finally{E(!1)}}),disabled:q||O,children:l.jsx(M,{className:"h-4 w-4"})})}),l.jsx(m,{children:l.jsx("p",{children:"Refresh location"})})]})}),I?l.jsx(y,{}):l.jsx(g,{}),z&&!I&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(d,{variant:"outline",size:"sm",onClick:()=>$("/signin"),children:"Sign In"}),l.jsx(d,{size:"sm",onClick:()=>$("/signin"),children:"Get Started"})]}),I&&l.jsxs(j,{children:[l.jsx(p,{asChild:!0,children:l.jsx(d,{variant:"ghost",size:"icon",className:"relative",children:l.jsx(w,{className:"h-4 w-4"})})}),l.jsxs(u,{align:"end",className:"w-56",children:[l.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:l.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[l.jsx("p",{className:"font-medium",children:null==(D=I.email)?void 0:D.split("@")[0]}),l.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:I.email})]})}),l.jsx(f,{}),l.jsxs(N,{onClick:()=>$("/profile"),children:[l.jsx(w,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Profile"})]}),l.jsxs(N,{onClick:()=>$("/settings"),children:[l.jsx(x,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Settings"})]}),l.jsx(f,{}),l.jsxs(N,{onClick:()=>e(this,null,function*(){try{yield P(),$("/")}catch(e){}}),children:[l.jsx(C,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Log out"})]})]})]})]})]})})})}S.displayName="NavLink";export{z as U};
