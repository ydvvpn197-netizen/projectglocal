var V=(_,c,l)=>new Promise((f,N)=>{var h=d=>{try{o(l.next(d))}catch(u){N(u)}},v=d=>{try{o(l.throw(d))}catch(u){N(u)}},o=d=>d.done?f(d.value):Promise.resolve(d.value).then(h,v);o((l=l.apply(_,c)).next())});import{n as ce,r,$ as O,U as E,a0 as oe,j as e,f as de,a1 as A,p as T,a2 as H,t as G,M as b,o as g,a3 as me,a4 as xe,z as he,a5 as ue,a6 as U,y as Q,a7 as W,a8 as ge,G as pe}from"./chunk-COTa-BBv.js";import{ResponsiveLayout as je}from"./ResponsiveLayout.tsx-wqK2pe-W.js";import{a as fe,u as Ne,B as n,C as m,b as x}from"./main-BMj1NFFE.js";import{I as ve}from"./chunk-BQur_cHm.js";import{B as Y}from"./chunk-BCSLz2CJ.js";import{A as be,a as ye,b as we}from"./chunk-mExNus9E.js";import{T as Ce,a as ke,b as y,c as w}from"./chunk-BzTmHFr7.js";import{S as q,a as J,b as K,c as X,d as C}from"./chunk-Caym9pUi.js";import{D as Se,a as Ee,b as Ae,c as Te,d as _e}from"./chunk-DAuIGAgW.js";import{u as ze}from"./chunk-BHNn8WBs.js";import{a as Be,u as Fe}from"./chunk-Bqzn8EJ-.js";import{E as Me}from"./chunk-DkS-Khix.js";import{m as k}from"./chunk-COG8KeUH.js";import"./chunk-DvlvDbdf.js";import"./chunk-BlluHz2J.js";import"./chunk-DJzzOJWe.js";import"./chunk-BA32w1ww.js";import"./chunk-CasIWBEQ.js";import"./chunk-C4jjqBrH.js";import"./chunk-DYZWJdwa.js";import"./chunk-DmQrF9DI.js";const cs=()=>{const{user:_}=fe();ce();const{toast:c}=Ne(),{events:l,loading:f,toggleAttendance:N}=ze();Be(),Fe();const[h,v]=r.useState(""),[o,d]=r.useState("All Categories"),[u,z]=r.useState("grid"),[B,Z]=r.useState("date"),[F,M]=r.useState(null),[ee,L]=r.useState(!1),[se,ae]=r.useState("discover"),[te,D]=r.useState(!1),[Le,De]=r.useState(!1),[I,P]=r.useState(!1),[Ie,Pe]=r.useState({category:"All Categories",dateRange:"All Time",priceRange:"Any Price",location:"Any Location",sortBy:"date"}),le=[{id:"all",name:"All Categories",icon:O,color:"bg-gray-500",count:l.length},{id:"music",name:"Music",icon:Music,color:"bg-purple-500",count:l.filter(s=>s.category==="Music").length},{id:"art",name:"Art",icon:Palette,color:"bg-pink-500",count:l.filter(s=>s.category==="Art").length},{id:"community",name:"Community",icon:E,color:"bg-blue-500",count:l.filter(s=>s.category==="Community").length},{id:"food",name:"Food",icon:Utensils,color:"bg-orange-500",count:l.filter(s=>s.category==="Food").length},{id:"tech",name:"Technology",icon:Laptop,color:"bg-indigo-500",count:l.filter(s=>s.category==="Technology").length},{id:"wellness",name:"Health & Wellness",icon:Dumbbell,color:"bg-green-500",count:l.filter(s=>s.category==="Health & Wellness").length},{id:"sports",name:"Sports",icon:oe,color:"bg-red-500",count:l.filter(s=>s.category==="Sports").length},{id:"education",name:"Education",icon:GraduationCap,color:"bg-yellow-500",count:l.filter(s=>s.category==="Education").length},{id:"business",name:"Business",icon:Briefcase,color:"bg-gray-600",count:l.filter(s=>s.category==="Business").length},{id:"entertainment",name:"Entertainment",icon:PartyPopper,color:"bg-pink-600",count:l.filter(s=>s.category==="Entertainment").length}],p=[...l.filter(s=>{const a=s.title.toLowerCase().includes(h.toLowerCase())||s.description&&s.description.toLowerCase().includes(h.toLowerCase())||s.tags&&s.tags.some(i=>i.toLowerCase().includes(h.toLowerCase())),t=o==="All Categories"||s.category===o;return a&&t})].sort((s,a)=>{switch(B){case"date":try{const t=new Date(s.event_date||s.date),i=new Date(a.event_date||a.date);return t.getTime()-i.getTime()}catch(t){return 0}case"popularity":return(a.attendees_count||a.attendees||0)-(s.attendees_count||s.attendees||0);case"price":{const t=s.price==="Free"?0:typeof s.price=="string"?parseInt(s.price.replace("$","")):s.price,i=a.price==="Free"?0:typeof a.price=="string"?parseInt(a.price.replace("$","")):a.price;return t-i}default:return 0}}),S=r.useCallback(()=>V(null,null,function*(){P(!0);try{yield new Promise(s=>setTimeout(s,1e3)),c({title:"Events Refreshed",description:"Latest events have been loaded."})}catch(s){c({title:"Refresh Failed",description:"Unable to refresh events. Please try again.",variant:"destructive"})}finally{P(!1)}}),[c]);r.useCallback(s=>{const a=s.toLowerCase();if(a.includes("search")){const t=s.replace(/search\s+/i,"");v(t),c({title:"Voice Search",description:`Searching for: ${t}`})}else a.includes("filter")?(D(t=>!t),c({title:"Voice Filter",description:"Opening filters panel"})):a.includes("refresh")&&S()},[S,c]);const R=s=>{M(s),L(!0)},ie=({event:s,isOpen:a,onClose:t})=>{const[i,j]=r.useState(1),[$,re]=r.useState(!1),ne=s.price==="Free"?0:parseInt(s.price.replace("$",""))*i;return e.jsx(Se,{open:a,onOpenChange:t,children:e.jsxs(Ee,{className:"max-w-2xl",children:[e.jsxs(Ae,{children:[e.jsx(Te,{className:"text-2xl font-bold",children:s.title}),e.jsx(_e,{children:"Book your tickets for this amazing event"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:s.image_url||s.image||"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=800&h=400&fit=crop",alt:s.title,className:"w-32 h-24 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(g,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.event_date||s.date})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.event_time||s.time})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.location_name||s.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[s.attendees_count||s.attendees||0," / ",s.max_attendees||s.maxAttendees||"∞"," attending"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Select Tickets"}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"General Admission"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.price," per ticket"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>j(Math.max(1,i-1)),disabled:i<=1,children:"-"}),e.jsx("span",{className:"w-8 text-center",children:i}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>j(Math.min((s.max_attendees||s.maxAttendees||100)-(s.attendees_count||s.attendees||0),i+1)),disabled:i>=(s.max_attendees||s.maxAttendees||100)-(s.attendees_count||s.attendees||0),children:"+"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted rounded-lg",children:[e.jsx("span",{className:"font-semibold",children:"Total"}),e.jsx("span",{className:"text-xl font-bold",children:s.price==="Free"?"Free":`$${ne}`})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(n,{className:"flex-1 btn-event",onClick:()=>{c({title:"Booking Successful",description:`You've booked ${i} ticket(s) for ${s.title}`}),t()},children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),s.price==="Free"?"Reserve Spot":"Book Tickets"]}),e.jsxs(n,{variant:"outline",onClick:()=>re(!$),children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Contact"]})]}),$&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Contact Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"info@eventorganizer.com"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"www.eventorganizer.com"})]})]})]})]})]})})};return e.jsx(je,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Events"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Discover and book amazing local events"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(n,{variant:"outline",onClick:S,disabled:I,children:[e.jsx(de,{className:`w-4 h-4 mr-2 ${I?"animate-spin":""}`}),"Refresh"]}),e.jsx(n,{className:"btn-event",asChild:!0,children:e.jsxs(A,{to:"/create-event",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]})]}),e.jsxs(Ce,{value:se,onValueChange:ae,className:"space-y-6",children:[e.jsxs(ke,{className:"grid grid-cols-4 w-full",children:[e.jsxs(y,{value:"discover",className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Discover"]}),e.jsxs(y,{value:"trending",className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Trending"]}),e.jsxs(y,{value:"nearby",className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Nearby"]}),e.jsxs(y,{value:"my-events",className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"My Events"]})]}),e.jsxs(w,{value:"discover",className:"space-y-6",children:[e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ve,{placeholder:"Search events, organizers, or locations...",value:h,onChange:s=>v(s.target.value),className:"pl-10"})]}),e.jsxs(q,{value:o,onValueChange:d,children:[e.jsx(J,{className:"w-full lg:w-48",children:e.jsx(K,{placeholder:"Category"})}),e.jsx(X,{children:le.map(s=>e.jsx(C,{value:s.name,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.name," (",s.count,")"]})},s.id))})]}),e.jsxs(q,{value:B,onValueChange:Z,children:[e.jsx(J,{className:"w-full lg:w-40",children:e.jsx(K,{placeholder:"Sort by"})}),e.jsxs(X,{children:[e.jsx(C,{value:"date",children:"Date"}),e.jsx(C,{value:"popularity",children:"Popularity"}),e.jsx(C,{value:"price",children:"Price"})]})]}),e.jsxs("div",{className:"flex border rounded-lg",children:[e.jsx(n,{variant:u==="grid"?"default":"ghost",size:"sm",onClick:()=>z("grid"),className:"rounded-r-none",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx(n,{variant:u==="list"?"default":"ghost",size:"sm",onClick:()=>z("list"),className:"rounded-l-none",children:e.jsx(me,{className:"w-4 h-4"})})]})]})})}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:[o==="All Categories"?"All Events":o," (",p.length,")"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>D(!te),children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Filters"]})})]}),u==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f?[...Array(6)].map((s,a)=>e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},children:e.jsxs(m,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-muted rounded-t-lg"}),e.jsxs(x,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})]})},a)):p.length>0?p.map((s,a)=>e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},whileHover:{y:-5},children:e.jsx(Me,{event:s,onAttend:N,onBook:R,onLike:t=>{c({title:"Event Liked",description:"You've liked this event!"})},onChat:(t,i)=>{c({title:"Chat Started",description:"Opening chat with organizer..."})},verified:Math.random()>.7})},s.id)):e.jsx("div",{className:"col-span-full",children:e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:h||o!=="All Categories"?"No events match your search criteria.":"There are no events available at the moment."}),e.jsx(A,{to:"/create-event",children:e.jsxs(n,{className:"btn-event",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]})})})}):e.jsx("div",{className:"space-y-4",children:f?[...Array(6)].map((s,a)=>e.jsx(k.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:a*.1},children:e.jsx(m,{className:"animate-pulse",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-32 h-24 bg-muted rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})]})})})},a)):p.length>0?p.map((s,a)=>{var t,i,j;return e.jsx(k.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:a*.1},whileHover:{x:5},children:e.jsx(m,{className:"event-card group cursor-pointer hover:shadow-event transition-all duration-300",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("img",{src:s.image_url||s.image||"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=800&h=400&fit=crop",alt:s.title,className:"w-32 h-24 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.title,Math.random()>.7&&e.jsxs(Y,{className:"bg-blue-500 text-white text-xs",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:s.description})]}),e.jsx(n,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ue,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3"}),s.event_date||s.date]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),s.event_time||s.time]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-3 h-3"}),s.location_name||s.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),s.attendees_count||s.attendees||0," / ",s.max_attendees||s.maxAttendees||"∞"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(be,{className:"w-6 h-6",children:[e.jsx(ye,{src:s.organizer_avatar||((t=s.organizer)==null?void 0:t.avatar)}),e.jsx(we,{children:(s.organizer_name||((i=s.organizer)==null?void 0:i.name)||"E")[0]})]}),e.jsx("span",{className:"text-sm font-medium",children:s.organizer_name||((j=s.organizer)==null?void 0:j.name)||"Event Organizer"})]}),e.jsx(Y,{className:"badge-event",children:s.category})]}),e.jsxs(n,{className:"btn-event",onClick:()=>R(s),children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),s.price===0||s.price==="Free"?"Free":`$${s.price}`]})]})]})]})})})},s.id)}):e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:h||o!=="All Categories"?"No events match your search criteria.":"There are no events available at the moment."}),e.jsx(A,{to:"/create-event",children:e.jsxs(n,{className:"btn-event",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]})})})]})]}),e.jsx(w,{value:"trending",className:"space-y-6",children:e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(G,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Trending Events"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})]})})}),e.jsx(w,{value:"nearby",className:"space-y-6",children:e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(b,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nearby Events"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})]})})}),e.jsx(w,{value:"my-events",className:"space-y-6",children:e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"My Events"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})]})})})]}),F&&e.jsx(ie,{event:F,isOpen:ee,onClose:()=>{L(!1),M(null)}})]})})};export{cs as default};
