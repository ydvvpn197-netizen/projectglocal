import{v as e,b as s,u as a,d as t,r as i,j as r,B as l}from"./index-B5IYdG7F.js";import{R as n,H as c}from"./ResponsiveLayout-BzUw0buI.js";import{C as d,a as m,b as o,d as x}from"./card-Bm1jiGt-.js";import{B as h}from"./badge-Dh5Uj8vN.js";import{i as j,A as p,a as u,b as g}from"./sheet-CgDUfSpi.js";import{S as N}from"./separator-BZYZTYLW.js";import{D as f,a as v,b,c as w,d as k}from"./dialog-UfmTf-qG.js";import{T as y}from"./textarea-DnhiZrYB.js";import{L as C}from"./label-BIAuZBUP.js";import{u as _}from"./useEvents-CUKPPFr-.js";import{A as z}from"./arrow-left-CfH2SqfZ.js";import{C as S}from"./index-DD_J5sPn.js";import{C as E}from"./clock-BZvZzp4Q.js";import{M}from"./map-pin-BwnggLrZ.js";import{S as T}from"./share-2-D7lrZdDw.js";import{U as A}from"./users-Dh-Bdb-k.js";import{T as B}from"./tag-Dx1_YTf2.js";import{T as O}from"./ticket-BM1I36-t.js";import{M as P}from"./message-circle-CZlRU4gv.js";import{U as R}from"./user-UOowhO7W.js";import{f as D}from"./index-DWtoKlrM.js";import"./input-C4_QhDnm.js";import"./NotificationBell-DtnEojo4.js";import"./Combination-BxRIZ8rt.js";import"./scroll-area-Beiyt5Kx.js";import"./index-9msbY5CZ.js";import"./index-jVOyRz7F.js";import"./useNotifications-C0wifgqF.js";import"./tabs-DPPBWbFC.js";import"./check-C9wwFfOs.js";import"./bell-qeMkXRtc.js";import"./settings-DSEWn2wM.js";import"./NotificationButton-CqXjP_LK.js";import"./search-Co_OHmlK.js";import"./zap-DPSXpNso.js";import"./message-square-j4RxGxzk.js";import"./alert-CQybxmNr.js";import"./log-out-DchhrZ8K.js";import"./useLocation-BN9qq_uk.js";import"./locationService-BBE-Ay-I.js";import"./pointsService-D9LdhHSC.js";const $=()=>{const{eventId:$}=e(),F=s(),{events:L,loading:q,toggleAttendance:U}=_(),{user:V}=a(),{toast:Y}=t(),[H,I]=i.useState(null),[K,G]=i.useState(!1),[J,Q]=i.useState(!1),[W,X]=i.useState(1),[Z,ee]=i.useState(""),[se,ae]=i.useState(0);i.useEffect(()=>{if($&&L.length>0){const e=L.find(e=>e.id===$);I(e)}},[$,L]);const te=e=>{try{return D(new Date(e),"EEEE, MMMM dd, yyyy")}catch(s){return e}},ie=e=>0===e?"Free":`$${e}`;if(q)return r.jsx(n,{children:r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-muted rounded w-1/4 mb-4"}),r.jsx("div",{className:"h-96 bg-muted rounded-lg mb-6"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-6 bg-muted rounded w-3/4"}),r.jsx("div",{className:"h-4 bg-muted rounded w-full"}),r.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})]})})});if(!H)return r.jsx(n,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Event Not Found"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"The event you're looking for doesn't exist or has been removed."}),r.jsxs(l,{onClick:()=>F("/events"),children:[r.jsx(z,{className:"w-4 h-4 mr-2"}),"Back to Events"]})]})});const re=0===H.price?0:H.price*W;return r.jsx(n,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs(l,{variant:"ghost",onClick:()=>F("/events"),className:"mb-4",children:[r.jsx(z,{className:"w-4 h-4 mr-2"}),"Back to Events"]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:H.title}),r.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(S,{className:"w-4 h-4"}),te(H.event_date)]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(E,{className:"w-4 h-4"}),H.event_time]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(M,{className:"w-4 h-4"}),H.location_name]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(h,{className:"bg-orange-500 text-white font-semibold",children:ie(H.price)}),Math.random()>.7&&r.jsxs(h,{className:"bg-blue-500 text-white",children:[r.jsx(j,{className:"w-3 h-3 mr-1"}),"Verified"]})]})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:H.image_url||"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=800&h=400&fit=crop",alt:H.title,className:"w-full h-96 object-cover rounded-lg"}),r.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[r.jsx(l,{variant:"ghost",size:"sm",className:"bg-white/20 hover:bg-white/30 text-white",children:r.jsx(c,{className:"w-4 h-4"})}),r.jsx(l,{variant:"ghost",size:"sm",className:"bg-white/20 hover:bg-white/30 text-white",children:r.jsx(T,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs(d,{children:[r.jsx(m,{children:r.jsx(o,{children:"About This Event"})}),r.jsx(x,{children:r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:H.description||"No description available for this event."})})]}),r.jsxs(d,{children:[r.jsx(m,{children:r.jsx(o,{children:"Event Details"})}),r.jsx(x,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(S,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Date"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:te(H.event_date)})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(E,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Time"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:H.event_time})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(M,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Location"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:H.location_name})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(A,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Attendees"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[H.attendees_count," / ",H.max_attendees||"âˆž"," attending"]})]})]})]})})]}),H.tags&&H.tags.length>0&&r.jsxs(d,{children:[r.jsx(m,{children:r.jsx(o,{children:"Tags"})}),r.jsx(x,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:H.tags.map((e,s)=>r.jsxs(h,{variant:"secondary",children:[r.jsx(B,{className:"w-3 h-3 mr-1"}),e]},s))})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(d,{children:r.jsx(x,{className:"p-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs(l,{className:"w-full",variant:H.user_attending?"default":"outline",onClick:()=>U(H.id),children:[r.jsx(A,{className:"w-4 h-4 mr-2"}),H.user_attending?"Attending":"Attend Event"]}),r.jsxs(l,{className:"w-full btn-event",onClick:()=>{V?G(!0):Y({title:"Authentication Required",description:"Please sign in to book this event",variant:"destructive"})},children:[r.jsx(O,{className:"w-4 h-4 mr-2"}),"Book Tickets"]}),r.jsxs(l,{variant:"outline",className:"w-full",onClick:()=>{V?Q(!0):Y({title:"Authentication Required",description:"Please sign in to chat with the organizer",variant:"destructive"})},children:[r.jsx(P,{className:"w-4 h-4 mr-2"}),"Chat with Organizer"]})]})})}),r.jsxs(d,{children:[r.jsx(m,{children:r.jsx(o,{children:"Event Organizer"})}),r.jsxs(x,{children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors cursor-pointer",onClick:()=>{H&&F(`/profile/${H.user_id}`)},children:[r.jsxs(p,{className:"w-12 h-12",children:[r.jsx(u,{src:H.organizer_avatar}),r.jsx(g,{children:(H.organizer_name||"E")[0]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:H.organizer_name||"Event Organizer"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Creator"})]}),r.jsx(R,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsx(N,{className:"my-4"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(l,{variant:"outline",size:"sm",className:"w-full",children:[r.jsx(P,{className:"w-4 h-4 mr-2"}),"Send Message"]}),r.jsxs(l,{variant:"outline",size:"sm",className:"w-full",children:[r.jsx(R,{className:"w-4 h-4 mr-2"}),"View Profile"]})]})]})]}),r.jsxs(d,{children:[r.jsx(m,{children:r.jsx(o,{children:"Pricing"})}),r.jsxs(x,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-lg font-semibold",children:"Ticket Price"}),r.jsx("span",{className:"text-2xl font-bold text-orange-500",children:ie(H.price)})]}),H.price>0&&r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Price per ticket"})]})]})]})]}),r.jsx(f,{open:K,onOpenChange:G,children:r.jsxs(v,{className:"max-w-2xl",children:[r.jsxs(b,{children:[r.jsxs(w,{children:["Book Tickets - ",H.title]}),r.jsx(k,{children:"Select the number of tickets you'd like to book"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-4 p-4 bg-muted rounded-lg",children:[r.jsx("img",{src:H.image_url||"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=800&h=400&fit=crop",alt:H.title,className:"w-20 h-16 rounded object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold",children:H.title}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[te(H.event_date)," at ",H.event_time]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:H.location_name})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(C,{htmlFor:"tickets",children:"Number of Tickets"}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"General Admission"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[ie(H.price)," per ticket"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(l,{variant:"outline",size:"sm",onClick:()=>X(Math.max(1,W-1)),disabled:W<=1,children:"-"}),r.jsx("span",{className:"w-8 text-center",children:W}),r.jsx(l,{variant:"outline",size:"sm",onClick:()=>X(Math.min(H.max_attendees-H.attendees_count,W+1)),disabled:W>=H.max_attendees-H.attendees_count,children:"+"})]})]})]}),r.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted rounded-lg",children:[r.jsx("span",{className:"font-semibold",children:"Total"}),r.jsx("span",{className:"text-xl font-bold",children:ie(re)})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(l,{className:"flex-1 btn-event",onClick:()=>{Y({title:"Booking Successful",description:`You've booked ${W} ticket(s) for ${H.title}`}),G(!1)},children:[r.jsx(O,{className:"w-4 h-4 mr-2"}),0===H.price?"Reserve Spot":"Book Tickets"]}),r.jsx(l,{variant:"outline",onClick:()=>G(!1),children:"Cancel"})]})]})]})}),r.jsx(f,{open:J,onOpenChange:Q,children:r.jsxs(v,{className:"max-w-2xl",children:[r.jsxs(b,{children:[r.jsxs(w,{children:["Chat with ",H.organizer_name||"Event Organizer"]}),r.jsx(k,{children:"Send a message to the event organizer"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(C,{htmlFor:"message",children:"Your Message"}),r.jsx(y,{id:"message",placeholder:"Type your message here...",value:Z,onChange:e=>ee(e.target.value),rows:4})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(l,{className:"flex-1",onClick:()=>{Z.trim()&&(Y({title:"Message Sent",description:"Your message has been sent to the organizer"}),ee(""),Q(!1))},disabled:!Z.trim(),children:[r.jsx(P,{className:"w-4 h-4 mr-2"}),"Send Message"]}),r.jsx(l,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"})]})]})]})})]})})};export{$ as default};
