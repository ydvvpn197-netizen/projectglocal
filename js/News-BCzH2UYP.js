var te=Object.defineProperty,se=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var I=(h,e,t)=>e in h?te(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t,v=(h,e)=>{for(var t in e||(e={}))ae.call(e,t)&&I(h,t,e[t]);if(G)for(var t of G(e))ne.call(e,t)&&I(h,t,e[t]);return h},A=(h,e)=>se(h,re(e));var y=(h,e,t)=>I(h,typeof e!="symbol"?e+"":e,t);var u=(h,e,t)=>new Promise((s,a)=>{var n=c=>{try{i(t.next(c))}catch(m){a(m)}},o=c=>{try{i(t.throw(c))}catch(m){a(m)}},i=c=>c.done?s(c.value):Promise.resolve(c.value).then(n,o);i((t=t.apply(h,e)).next())});import{aA as oe,s as f,u as ie,g as le,r as b,j as r,B as O,e as ce,G as _,C as S,v as C}from"./main-jfCIwKxb.js";import{R as ue,N as P,d as j,E as he}from"./ResponsiveLayout-Dd-U-XTf.js";import{I as me}from"./index-DGobKVbi.js";import{B as U}from"./badge-Cxniq3nT.js";import{T as de,a as ge,b as F,c as D}from"./tabs-Bho2AISw.js";import{S as H,a as V,b as Z,c as Q,d as w}from"./select-BK9ujtwJ.js";import{U as M,A as k,a as T}from"./alert-f_BC70aV.js";import{u as pe}from"./useLocation-Dro6x-la.js";import{S as fe}from"./search-DIpOLffQ.js";import{G as we}from"./globe-DZ7FpNQD.js";import{M as z}from"./map-pin-B5hnRU36.js";import{C as ye}from"./clock-CT2ky6hG.js";import{T as xe}from"./trending-up-XhhBv7nP.js";import"./separator-CQeeh5sy.js";import"./index-D6sgUugm.js";import"./index-CaL9moq2.js";import"./databaseUtils-Cc-GydU0.js";import"./scroll-area-Bsyy6uVd.js";import"./index-DCmZQWeX.js";import"./check-CWeqS_MX.js";import"./useNotifications-DlynYvan.js";import"./notificationService-DPR46Nx3.js";import"./bell-CXNc_0l5.js";import"./user-cZSM4iEh.js";import"./calendar-CXbnSY_4.js";import"./zap-C2TAeX5H.js";import"./plus-Bi3vU8QF.js";import"./message-square-oWFCH1Pi.js";import"./wifi-Ue5kLFZw.js";import"./log-out-CxjypOOW.js";import"./index-BqrjOP3n.js";import"./chevron-up-DhaGujCg.js";import"./locationService-D_4XBFWa.js";class be{constructor(){y(this,"baseUrl","https://newsapi.org/v2");y(this,"apiKey");this.apiKey=oe.apiKey}fetchNews(e){return u(this,null,function*(){try{if(!this.apiKey)return console.warn("NewsAPI.org API key not configured"),[];const t=[];for(const s of e.categories)try{const a=yield this.fetchCategoryNews(s,e.location_bias);t.push(...a)}catch(a){console.error(`Error fetching category ${s}:`,a)}if(e.categories.length===0){const s=yield this.fetchTopHeadlines(e.location_bias);t.push(...s)}return t}catch(t){return console.error("Error fetching news from NewsAPI.org:",t),[]}})}fetchCategoryNews(e,t){return u(this,null,function*(){try{const s=new URLSearchParams({apiKey:this.apiKey,category:e,pageSize:"20",language:"en",sortBy:"publishedAt"});t&&s.append("country",this.getCountryCode(t));const a=yield fetch(`${this.baseUrl}/top-headlines?${s}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=yield a.json();if(n.status!=="ok")throw new Error(`API error: ${n.status}`);return n.articles||[]}catch(s){return console.error(`Error fetching category news for ${e}:`,s),[]}})}fetchTopHeadlines(e){return u(this,null,function*(){try{const t=new URLSearchParams({apiKey:this.apiKey,pageSize:"20",language:"en",sortBy:"publishedAt"});e&&t.append("country",this.getCountryCode(e));const s=yield fetch(`${this.baseUrl}/top-headlines?${t}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=yield s.json();if(a.status!=="ok")throw new Error(`API error: ${a.status}`);return a.articles||[]}catch(t){return console.error("Error fetching top headlines:",t),[]}})}searchNews(s){return u(this,arguments,function*(e,t={}){try{if(!this.apiKey)return console.warn("NewsAPI.org API key not configured"),[];const a=new URLSearchParams({apiKey:this.apiKey,q:e,pageSize:(t.pageSize||20).toString(),language:t.language||"en",sortBy:t.sortBy||"publishedAt"});t.from&&a.append("from",t.from),t.to&&a.append("to",t.to);const n=yield fetch(`${this.baseUrl}/everything?${a}`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const o=yield n.json();if(o.status!=="ok")throw new Error(`API error: ${o.status}`);return o.articles||[]}catch(a){return console.error("Error searching news:",a),[]}})}getAvailableCategories(){return[{name:"general",displayName:"General",description:"General news and updates"},{name:"business",displayName:"Business",description:"Business and economic news"},{name:"technology",displayName:"Technology",description:"Technology and innovation news"},{name:"entertainment",displayName:"Entertainment",description:"Entertainment and culture news"},{name:"sports",displayName:"Sports",description:"Sports news and updates"},{name:"health",displayName:"Health",description:"Health and wellness news"},{name:"science",displayName:"Science",description:"Science and research news"}]}getAvailableCountries(){return[{code:"us",name:"United States"},{code:"gb",name:"United Kingdom"},{code:"ca",name:"Canada"},{code:"au",name:"Australia"},{code:"in",name:"India"},{code:"de",name:"Germany"},{code:"fr",name:"France"},{code:"jp",name:"Japan"},{code:"cn",name:"China"},{code:"br",name:"Brazil"}]}getAvailableLanguages(){return[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"ru",name:"Russian"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"}]}getCountryCode(e){const t={"united states":"us",usa:"us",us:"us","united kingdom":"gb",uk:"gb","great britain":"gb",canada:"ca",australia:"au",india:"in",germany:"de",france:"fr",japan:"jp",china:"cn",brazil:"br"},s=e.toLowerCase().trim();return t[s]||"us"}testConnection(){return u(this,null,function*(){try{if(!this.apiKey)return{success:!1,message:"API key not configured"};const e=yield fetch(`${this.baseUrl}/top-headlines?apiKey=${this.apiKey}&country=us&pageSize=1`);if(!e.ok)return{success:!1,message:`HTTP error! status: ${e.status}`};const t=yield e.json();if(t.status!=="ok")return{success:!1,message:`API error: ${t.status}`};const s=e.headers.get("X-RateLimit-Used"),a=e.headers.get("X-RateLimit-Total");return{success:!0,message:"Connection successful",quota:s&&a?{used:parseInt(s),total:parseInt(a)}:void 0}}catch(e){return{success:!1,message:`Connection failed: ${e instanceof Error?e.message:"Unknown error"}`}}})}getUsageStats(){return u(this,null,function*(){return{totalRequests:0,remainingRequests:1e3,resetTime:void 0}})}}class Ne{constructor(){y(this,"baseUrl","https://gnews.io/api/v4");y(this,"apiKey","edcc8605b836ce982b924ab1bbe45056")}fetchNews(e){return u(this,null,function*(){try{const t=e.location_filter||"world",s=e.category_filter||"general",a=`${this.baseUrl}/top-headlines?country=${t}&category=${s}&max=20&apikey=${this.apiKey}`,n=yield fetch(a);if(!n.ok)throw new Error(`GNews API error: ${n.status}`);const o=yield n.json();if(o.status==="error")throw new Error(`GNews API error: ${o.message}`);return this.transformArticles(o.articles,e)}catch(t){return console.error("Error fetching news from Google News:",t),console.warn("Falling back to mock data due to API error"),this.getMockArticles(e)}})}fetchLocationNews(e,t,s=50,a){return u(this,null,function*(){try{const n=yield this.getLocationName(e,t),o=`${this.baseUrl}/search?q=${encodeURIComponent(n)}&max=20&sortby=publishedAt&apikey=${this.apiKey}`,i=yield fetch(o);if(!i.ok)throw new Error(`GNews API error: ${i.status}`);const c=yield i.json();if(c.status==="error")throw new Error(`GNews API error: ${c.message}`);const m=c.articles.filter(g=>this.isLocationRelevant(g,n,e,t,s));return this.transformArticles(m,a)}catch(n){return console.error("Error fetching location news:",n),this.getMockArticles(a)}})}transformArticles(e,t){return e.map(s=>{var a;return{source:{id:t.id,name:((a=s.source)==null?void 0:a.name)||t.name},author:s.author||"Unknown",title:s.title,description:s.description,url:s.url,urlToImage:s.image||s.urlToImage,publishedAt:s.publishedAt,content:s.content,location:s.location||null}})}isLocationRelevant(e,t,s,a,n){const o=`${e.title} ${e.description} ${e.content}`.toLowerCase(),i=t.toLowerCase();return o.includes(i)?!0:this.getNearbyLocationTerms(s,a).some(m=>o.includes(m.toLowerCase()))}getLocationName(e,t){return u(this,null,function*(){try{const s=yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=10`);if(s.ok)return(yield s.json()).display_name.split(",")[0]}catch(s){console.error("Error getting location name:",s)}return"local area"})}getNearbyLocationTerms(e,t){return["local","community","area","region","city","town"]}getMockArticles(e){return[{source:{id:e.id,name:e.name},author:"Local Reporter",title:"Community Development Project Approved",description:"Local council approves new mixed-use development that will include affordable housing, retail spaces, and a community center.",url:"https://example.com/local-event",urlToImage:"https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=400&h=200&fit=crop",publishedAt:new Date().toISOString(),content:"Local community event details..."},{source:{id:e.id,name:e.name},author:"Community News",title:"Farmers Market Returns for Summer Season",description:"The popular farmers market will return next weekend featuring over 50 local vendors, live music, and family activities.",url:"https://example.com/farmers-market",urlToImage:"https://images.unsplash.com/photo-1488459716781-31db52582fe9?w=400&h=200&fit=crop",publishedAt:new Date(Date.now()-36e5).toISOString(),content:"Farmers market details..."},{source:{id:e.id,name:e.name},author:"Arts & Culture",title:"Local Artists Collaborate for Public Mural Project",description:"Five local artists have been selected to create a new mural celebrating community diversity and local history.",url:"https://example.com/mural-project",urlToImage:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=200&fit=crop",publishedAt:new Date(Date.now()-72e5).toISOString(),content:"Mural project details..."}]}testConnection(){return u(this,null,function*(){try{const e=`${this.baseUrl}/top-headlines?country=us&max=1&apikey=${this.apiKey}`,t=yield fetch(e);if(t.ok){const s=yield t.json();return s.status==="error"?{success:!1,message:`GNews API error: ${s.message}`}:{success:!0,message:"GNews API connection successful"}}else return{success:!1,message:`HTTP error: ${t.status}`}}catch(e){return{success:!1,message:`Connection failed: ${e}`}}})}}class ve{fetchNews(e){return u(this,null,function*(){try{return(yield this.getLocalCommunityContent()).map(s=>this.convertToNewsArticle(s,e))}catch(t){return console.error("Error fetching local news:",t),[]}})}getLocalCommunityContent(){return u(this,null,function*(){try{const[e,t,s]=yield Promise.all([f.from("posts").select("*, profiles(username, full_name)").order("created_at",{ascending:!1}).limit(10),f.from("events").select("*, profiles(username, full_name)").order("created_at",{ascending:!1}).limit(10),f.from("reviews").select("*, profiles(username, full_name)").order("created_at",{ascending:!1}).limit(5)]);return[...(e.data||[]).map(n=>A(v({},n),{type:"post"})),...(t.data||[]).map(n=>A(v({},n),{type:"event"})),...(s.data||[]).map(n=>A(v({},n),{type:"review"}))].sort((n,o)=>new Date(o.created_at).getTime()-new Date(n.created_at).getTime())}catch(e){return console.error("Error fetching local community content:",e),[]}})}convertToNewsArticle(e,t){var o,i,c,m,g,x,N,p;const s=((o=e.profiles)==null?void 0:o.full_name)||((i=e.profiles)==null?void 0:i.username)||"Local Community Member";let a="",n="";switch(e.type){case"post":a=e.title||"Community Post",n=((c=e.content)==null?void 0:c.substring(0,200))+(((m=e.content)==null?void 0:m.length)>200?"...":"");break;case"event":a=e.title||"Local Event",n=((g=e.description)==null?void 0:g.substring(0,200))+(((x=e.description)==null?void 0:x.length)>200?"...":"");break;case"review":a=`${e.business_name||"Local Business"} Review`,n=((N=e.content)==null?void 0:N.substring(0,200))+(((p=e.content)==null?void 0:p.length)>200?"...":"");break;default:a="Local Community Update",n="New community content available"}return{source:{id:t.id,name:t.name},author:s,title:a,description:n,url:`/${e.type}/${e.id}`,urlToImage:e.image_url||null,publishedAt:e.created_at,content:e.content||e.description||""}}testConnection(){return u(this,null,function*(){try{const e=yield this.getLocalCommunityContent();return{success:!0,message:`Successfully connected to local news source. Found ${e.length} items.`,contentCount:e.length}}catch(e){return{success:!1,message:`Connection failed: ${e instanceof Error?e.message:"Unknown error"}`}}})}}class je{constructor(){y(this,"newsApiOrg");y(this,"googleNewsApi");y(this,"localNewsApi");this.newsApiOrg=new be,this.googleNewsApi=new Ne,this.localNewsApi=new ve}fetchFromExternalSource(e){return u(this,null,function*(){try{return e.api_endpoint.includes("newsapi.org")?yield this.newsApiOrg.fetchNews(e):e.api_endpoint.includes("news.google.com")?yield this.googleNewsApi.fetchNews(e):yield this.fetchFromGenericApi(e)}catch(t){return console.error(`Error fetching from external source ${e.name}:`,t),[]}})}fetchFromLocalSource(e){return u(this,null,function*(){try{return yield this.localNewsApi.fetchNews(e)}catch(t){return console.error(`Error fetching from local source ${e.name}:`,t),[]}})}fetchFromRssSource(e){return u(this,null,function*(){try{return yield this.fetchFromRssFeed(e.api_endpoint)}catch(t){return console.error(`Error fetching from RSS source ${e.name}:`,t),[]}})}fetchFromGenericApi(e){return u(this,null,function*(){try{const t=yield fetch(e.api_endpoint,{method:"GET",headers:v({"Content-Type":"application/json"},e.api_key&&{Authorization:`Bearer ${e.api_key}`})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=yield t.json();return this.parseGenericApiResponse(s,e)}catch(t){return console.error("Error fetching from generic API:",t),[]}})}parseGenericApiResponse(e,t){var s;try{let a=[];if(e.articles&&Array.isArray(e.articles))a=e.articles;else if((s=e.data)!=null&&s.articles&&Array.isArray(e.data.articles))a=e.data.articles;else if(Array.isArray(e))a=e;else if(e.results&&Array.isArray(e.results))a=e.results;else return console.warn("Unknown API response format:",e),[];return a.map(n=>this.normalizeArticle(n,t))}catch(a){return console.error("Error parsing generic API response:",a),[]}}fetchFromRssFeed(e){return u(this,null,function*(){try{return console.warn("RSS feed parsing not implemented yet"),[]}catch(t){return console.error("Error fetching RSS feed:",t),[]}})}normalizeArticle(e,t){var s,a,n;return{source:{id:((s=e.source)==null?void 0:s.id)||t.id,name:((a=e.source)==null?void 0:a.name)||t.name},author:e.author||e.byline||e.creator||null,title:e.title||e.headline||"",description:e.description||e.summary||e.excerpt||null,url:e.url||e.link||e.webUrl||"",urlToImage:e.urlToImage||e.image||((n=e.media)==null?void 0:n.url)||null,publishedAt:e.publishedAt||e.published_date||e.date||new Date().toISOString(),content:e.content||e.body||null}}testApiConnection(e){return u(this,null,function*(){try{let t=[];switch(e.source_type){case"external":t=yield this.fetchFromExternalSource(e);break;case"local":t=yield this.fetchFromLocalSource(e);break;case"rss":t=yield this.fetchFromRssSource(e);break;default:return{success:!1,message:`Unsupported source type: ${e.source_type}`}}return{success:!0,message:`Successfully fetched ${t.length} articles from ${e.name}`,articlesCount:t.length}}catch(t){return{success:!1,message:`Error testing connection: ${t instanceof Error?t.message:"Unknown error"}`}}})}getAvailableSources(){return[{name:"NewsAPI.org",type:"external",endpoint:"https://newsapi.org/v2",description:"Comprehensive news API with global coverage",requiresApiKey:!0},{name:"Google News",type:"external",endpoint:"https://news.google.com",description:"Google News RSS feeds",requiresApiKey:!1},{name:"Local Community",type:"local",endpoint:"internal",description:"Local community news and events",requiresApiKey:!1},{name:"Custom RSS Feed",type:"rss",endpoint:"https://example.com/feed.xml",description:"Custom RSS feed URL",requiresApiKey:!1}]}validateApiConfig(e){const t=[],s=[];return e.name||t.push("Source name is required"),e.api_endpoint||t.push("API endpoint is required"),e.api_endpoint&&!this.isValidUrl(e.api_endpoint)&&e.api_endpoint!=="internal"&&t.push("Invalid API endpoint URL"),e.api_endpoint.includes("newsapi.org")&&!e.api_key&&t.push("API key is required for NewsAPI.org"),e.rate_limit_per_hour<1&&s.push("Rate limit should be at least 1 request per hour"),e.categories.length===0&&s.push("No categories specified - will fetch all available categories"),{isValid:t.length===0,errors:t,warnings:s}}isValidUrl(e){try{return new URL(e),!0}catch(t){return!1}}getApiUsageStats(e){return u(this,null,function*(){return{totalRequests:0,successfulRequests:0,failedRequests:0,lastRequestTime:e.last_fetch_at,averageResponseTime:void 0}})}updateApiUsageStats(e,t,s){return u(this,null,function*(){console.log(`API Usage - Source: ${e.name}, Success: ${t}, Response Time: ${s}ms`)})}}class Ae{processArticle(e,t){return{id:"",source_id:t.id,external_id:this.generateExternalId(e),title:this.cleanTitle(e.title),description:this.cleanDescription(e.description),content:this.cleanContent(e.content),url:this.validateUrl(e.url),image_url:this.validateUrl(e.urlToImage),published_at:this.parseDate(e.publishedAt),author:this.cleanAuthor(e.author),category:this.detectCategory(e),tags:this.extractTags(e),location_lat:void 0,location_lng:void 0,location_name:void 0,relevance_score:.5,engagement_score:0,is_verified:this.isVerifiedSource(t),is_featured:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}cleanTitle(e){if(!e)return"Untitled Article";let t=e.trim().replace(/\s+/g," ");const s=["BREAKING:","UPDATE:","LIVE:","EXCLUSIVE:"];for(const a of s)t.toUpperCase().startsWith(a)&&(t=t.substring(a.length).trim());return t.charAt(0).toUpperCase()+t.slice(1)}cleanDescription(e){if(!e)return;let t=e.replace(/<[^>]*>/g,"");return t=t.trim().replace(/\s+/g," "),t.length>500&&(t=t.substring(0,497)+"..."),t}cleanContent(e){if(!e)return;let t=e.replace(/<[^>]*>/g,"");return t=t.trim().replace(/\s+/g," "),t.length>2e3&&(t=t.substring(0,1997)+"..."),t}validateUrl(e){if(e)try{return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="https://"+e),new URL(e),e}catch(t){return}}parseDate(e){if(e)try{const t=new Date(e);return isNaN(t.getTime())?void 0:t.toISOString()}catch(t){return}}cleanAuthor(e){if(!e)return;let t=e.trim().replace(/\s+/g," ");const s=["Reuters","AP","AFP","Associated Press"];for(const a of s)t.includes(a)&&(t=t.replace(a,"").trim());return t||void 0}detectCategory(e){const t=`${e.title} ${e.description} ${e.content}`.toLowerCase(),s={technology:["tech","software","app","digital","ai","artificial intelligence","startup","innovation"],business:["business","economy","market","finance","investment","company","corporate"],sports:["sport","football","basketball","baseball","soccer","tennis","olympics","championship"],entertainment:["movie","film","music","celebrity","hollywood","entertainment","show"],health:["health","medical","doctor","hospital","disease","treatment","medicine"],politics:["politics","government","election","president","congress","policy"],science:["science","research","study","scientist","discovery","experiment"],environment:["environment","climate","weather","pollution","green","sustainability"]};for(const[a,n]of Object.entries(s))for(const o of n)if(t.includes(o))return a;return"general"}extractTags(e){const t=`${e.title} ${e.description} ${e.content}`.toLowerCase(),s=[],a=t.match(/#\w+/g)||[];s.push(...a.map(i=>i.substring(1)));const n=t.match(/\b[A-Z][a-z]+(?:\s+[A-Z][a-z]+)*\b/g)||[],o=[...new Set(n)].slice(0,5);return s.push(...o),s.slice(0,10)}generateExternalId(e){if(e.url)try{return`${new URL(e.url).hostname}-${this.hashString(e.title)}`}catch(t){}return`${e.source.name}-${this.hashString(e.title)}`}hashString(e){let t=0;for(let s=0;s<e.length;s++){const a=e.charCodeAt(s);t=(t<<5)-t+a,t=t&t}return Math.abs(t).toString(36)}isVerifiedSource(e){return["Reuters","Associated Press","BBC News","CNN","The New York Times","The Washington Post","USA Today"].some(s=>e.name.toLowerCase().includes(s.toLowerCase()))}deduplicateArticles(e){const t=new Set,s=[];for(const a of e){const n=this.getDeduplicationKey(a);t.has(n)||(t.add(n),s.push(a))}return s}getDeduplicationKey(e){return`${e.source_id}-${this.normalizeTitle(e.title)}`}normalizeTitle(e){return e.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim()}filterByQuality(e,t=.3){return e.filter(s=>this.calculateQualityScore(s)>=t)}calculateQualityScore(e){let t=0;return e.title&&e.title.length>10&&(t+=.2),e.description&&e.description.length>50&&(t+=.2),e.author&&(t+=.1),e.image_url&&(t+=.1),e.is_verified&&(t+=.2),e.url&&(t+=.1),e.content&&e.content.length>100&&(t+=.1),Math.min(t,1)}}class _e{extractLocation(e){return u(this,null,function*(){try{const t=`${e.title} ${e.description} ${e.content}`.toLowerCase();return this.extractFromText(t)||this.extractFromLocationName(e.location_name)||this.extractFromTags(e.tags)}catch(t){return console.error("Error extracting location from article:",t),null}})}extractFromText(e){const t=[/in\s+([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)/g,/at\s+([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)/g,/from\s+([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)/g];for(const s of t){const a=e.match(s);if(a&&a.length>0){const n=a[0].replace(/^(in|at|from)\s+/i,"").trim(),o=this.getCityCoordinates(n);if(o)return{lat:o.lat,lng:o.lng,name:n,confidence:.7}}}return null}extractFromLocationName(e){if(!e)return null;const t=this.getCityCoordinates(e);return t?{lat:t.lat,lng:t.lng,name:e,confidence:.9}:null}extractFromTags(e){for(const t of e){const s=this.getCityCoordinates(t);if(s)return{lat:s.lat,lng:s.lng,name:t,confidence:.8}}return null}getCityCoordinates(e){const t={"new york":{lat:40.7128,lng:-74.006},"los angeles":{lat:34.0522,lng:-118.2437},chicago:{lat:41.8781,lng:-87.6298},houston:{lat:29.7604,lng:-95.3698},phoenix:{lat:33.4484,lng:-112.074},philadelphia:{lat:39.9526,lng:-75.1652},"san antonio":{lat:29.4241,lng:-98.4936},"san diego":{lat:32.7157,lng:-117.1611},dallas:{lat:32.7767,lng:-96.797},"san jose":{lat:37.3382,lng:-121.8863},austin:{lat:30.2672,lng:-97.7431},jacksonville:{lat:30.3322,lng:-81.6557},"fort worth":{lat:32.7555,lng:-97.3308},columbus:{lat:39.9612,lng:-82.9988},charlotte:{lat:35.2271,lng:-80.8431},"san francisco":{lat:37.7749,lng:-122.4194},indianapolis:{lat:39.7684,lng:-86.1581},seattle:{lat:47.6062,lng:-122.3321},denver:{lat:39.7392,lng:-104.9903},washington:{lat:38.9072,lng:-77.0369},boston:{lat:42.3601,lng:-71.0589},"el paso":{lat:31.7619,lng:-106.485},nashville:{lat:36.1627,lng:-86.7816},detroit:{lat:42.3314,lng:-83.0458},"oklahoma city":{lat:35.4676,lng:-97.5164},portland:{lat:45.5152,lng:-122.6784},"las vegas":{lat:36.1699,lng:-115.1398},memphis:{lat:35.1495,lng:-90.049},louisville:{lat:38.2527,lng:-85.7585},baltimore:{lat:39.2904,lng:-76.6122},milwaukee:{lat:43.0389,lng:-87.9065},albuquerque:{lat:35.0844,lng:-106.6504},tucson:{lat:32.2226,lng:-110.9747},fresno:{lat:36.7378,lng:-119.7871},sacramento:{lat:38.5816,lng:-121.4944},atlanta:{lat:33.749,lng:-84.388},"kansas city":{lat:39.0997,lng:-94.5786},miami:{lat:25.7617,lng:-80.1918},raleigh:{lat:35.7796,lng:-78.6382},omaha:{lat:41.2565,lng:-95.9345},minneapolis:{lat:44.9778,lng:-93.265},tulsa:{lat:36.154,lng:-95.9928},cleveland:{lat:41.4993,lng:-81.6944},wichita:{lat:37.6872,lng:-97.3301},arlington:{lat:32.7357,lng:-97.1081},"new orleans":{lat:29.9511,lng:-90.0715},bakersfield:{lat:35.3733,lng:-119.0187},tampa:{lat:27.9506,lng:-82.4572},honolulu:{lat:21.3099,lng:-157.8581},aurora:{lat:39.7294,lng:-104.8319},anaheim:{lat:33.8366,lng:-117.9143},"santa ana":{lat:33.7455,lng:-117.8677},"corpus christi":{lat:27.8006,lng:-97.3964},riverside:{lat:33.9533,lng:-117.3962},lexington:{lat:38.0406,lng:-84.5037},stockton:{lat:37.9577,lng:-121.2908},henderson:{lat:36.0395,lng:-114.9817},"saint paul":{lat:44.9537,lng:-93.09},"st. louis":{lat:38.627,lng:-90.1994},cincinnati:{lat:39.1031,lng:-84.512},pittsburgh:{lat:40.4406,lng:-79.9959},anchorage:{lat:61.2181,lng:-149.9003},greensboro:{lat:36.0726,lng:-79.792},plano:{lat:33.0198,lng:-96.6989},newark:{lat:40.7357,lng:-74.1724},lincoln:{lat:40.8136,lng:-96.7026},orlando:{lat:28.5383,lng:-81.3792},irvine:{lat:33.6846,lng:-117.8265},durham:{lat:35.994,lng:-78.8986},"chula vista":{lat:32.6401,lng:-117.0842},toledo:{lat:41.6528,lng:-83.5379},"fort wayne":{lat:41.0793,lng:-85.1394},"st. petersburg":{lat:27.7731,lng:-82.64},laredo:{lat:27.5064,lng:-99.5075},"jersey city":{lat:40.7178,lng:-74.0431},chandler:{lat:33.3062,lng:-111.8413},madison:{lat:43.0731,lng:-89.4012},lubbock:{lat:33.5779,lng:-101.8552},scottsdale:{lat:33.4942,lng:-111.9261},reno:{lat:39.5296,lng:-119.8138},buffalo:{lat:42.8864,lng:-78.8784},gilbert:{lat:33.3528,lng:-111.789},glendale:{lat:33.5387,lng:-112.186},"north las vegas":{lat:36.1989,lng:-115.1175},"winston-salem":{lat:36.0999,lng:-80.2442},chesapeake:{lat:36.7682,lng:-76.2875},norfolk:{lat:36.8508,lng:-76.2859},fremont:{lat:37.5485,lng:-121.9886},garland:{lat:32.9126,lng:-96.6389},irving:{lat:32.814,lng:-96.9489},hialeah:{lat:25.8576,lng:-80.2781},richmond:{lat:37.5407,lng:-77.436},boise:{lat:43.615,lng:-116.2023},spokane:{lat:47.6588,lng:-117.426}},s=e.toLowerCase().trim();return t[s]||null}extractFromUrl(e){if(!e)return null;try{const s=new URL(e).hostname.toLowerCase(),a=[/^([a-z]+)\.example\.com$/,/^news\.([a-z]+)\.com$/,/^([a-z]+)news\.com$/];for(const n of a){const o=s.match(n);if(o){const i=o[1],c=this.getCityCoordinates(i);if(c)return{lat:c.lat,lng:c.lng,name:i,confidence:.6}}}}catch(t){}return null}extractLocationsBatch(e){return u(this,null,function*(){const t=new Map;for(const s of e){const a=yield this.extractLocation(s);a&&t.set(s.id,a)}return t})}validateCoordinates(e,t){return e>=-90&&e<=90&&t>=-180&&t<=180}calculateDistance(e,t,s,a){const o=this.toRadians(s-e),i=this.toRadians(a-t),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(s))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}toRadians(e){return e*(Math.PI/180)}}class Se{constructor(){y(this,"categoryKeywords",{general:["announcement","update","news","report"],local:["local","community","neighborhood","city","town"],business:["business","company","market","economy","finance"],technology:["technology","tech","software","digital","ai"],entertainment:["entertainment","movie","music","celebrity"],sports:["sport","football","basketball","game","team"],health:["health","medical","doctor","hospital","treatment"],education:["education","school","university","student"],politics:["politics","election","government","policy"],environment:["environment","climate","weather","green"]})}categorizeArticle(e){return u(this,null,function*(){try{const t=`${e.title} ${e.description} ${e.content}`.toLowerCase(),s=this.calculateCategoryScores(t),a=this.findBestCategory(s);return a&&a.confidence>.3?a:null}catch(t){return console.error("Error categorizing article:",t),null}})}calculateCategoryScores(e){const t={};for(const[s,a]of Object.entries(this.categoryKeywords)){let n=0;const o=[];for(const i of a){const c=new RegExp(`\\b${i}\\b`,"gi"),m=e.match(c);m&&(n+=m.length,o.push(i))}t[s]={score:n,keywords:o}}return t}findBestCategory(e){let t="",s=0,a=[];for(const[o,i]of Object.entries(e))i.score>s&&(s=i.score,t=o,a=i.keywords);if(s===0)return null;const n=Math.min(s/10,1);return{category:t,confidence:n,keywords:a}}getAvailableCategories(){return Object.keys(this.categoryKeywords)}}class Ce{constructor(){y(this,"apiManager");y(this,"processor");y(this,"locationExtractor");y(this,"categorizer");this.apiManager=new je,this.processor=new Ae,this.locationExtractor=new _e,this.categorizer=new Se}fetchNewsFromAllSources(){return u(this,null,function*(){const e=Date.now();let t=0,s=0,a=0;const n=0;let o=0;const i=[];try{const{data:c,error:m}=yield f.from("news_sources").select("*").eq("is_active",!0);if(m)throw m;for(const g of c||[])try{if(console.log(`Fetching news from source: ${g.name}`),this.isRateLimited(g)){console.log(`Rate limited for source: ${g.name}`);continue}const x=yield this.fetchNewsFromSource(g);t+=x.length,i.push(g.name);const N=yield this.processArticles(x,g);s+=N.length;const p=yield this.storeArticles(N);a+=p,yield this.updateSourceFetchTime(g.id)}catch(x){console.error(`Error processing source ${g.name}:`,x),o++}return{total_articles_fetched:t,total_articles_processed:s,total_articles_stored:a,duplicates_removed:n,processing_errors:o,sources_processed:i,processing_time_ms:Date.now()-e}}catch(c){throw console.error("Error in news aggregation:",c),c}})}fetchNewsFromSource(e){return u(this,null,function*(){try{switch(e.source_type){case"external":return yield this.apiManager.fetchFromExternalSource(e);case"local":return yield this.apiManager.fetchFromLocalSource(e);case"rss":return yield this.apiManager.fetchFromRssSource(e);default:throw new Error(`Unsupported source type: ${e.source_type}`)}}catch(t){return console.error(`Error fetching from source ${e.name}:`,t),[]}})}processArticles(e,t){return u(this,null,function*(){const s=[];for(const a of e)try{if(yield this.isDuplicateArticle(a,t.id))continue;const o=yield this.processSingleArticle(a,t);o&&s.push(o)}catch(n){console.error("Error processing article:",n)}return s})}processSingleArticle(e,t){return u(this,null,function*(){try{const s=this.processor.processArticle(e,t),a=yield this.locationExtractor.extractLocation(s);a&&(s.location_lat=a.lat,s.location_lng=a.lng,s.location_name=a.name);const n=yield this.categorizer.categorizeArticle(s);return n&&(s.category=n.category,s.relevance_score=n.confidence),s.relevance_score=this.calculateRelevanceScore(s,t,(n==null?void 0:n.confidence)||.5),s}catch(s){return console.error("Error processing single article:",s),null}})}storeArticles(e){return u(this,null,function*(){if(e.length===0)return 0;try{const{data:t,error:s}=yield f.from("news_articles").insert(e).select("id");if(s)throw s;return(t==null?void 0:t.length)||0}catch(t){return console.error("Error storing articles:",t),0}})}isDuplicateArticle(e,t){return u(this,null,function*(){try{if(e.url){const{data:a}=yield f.from("news_articles").select("id").eq("url",e.url).single();if(a)return!0}const{data:s}=yield f.from("news_articles").select("id").eq("source_id",t).eq("title",e.title).gte("created_at",new Date(Date.now()-24*60*60*1e3).toISOString()).single();return!!s}catch(s){return!1}})}calculateRelevanceScore(e,t,s){let a=.5;a+=s*.3;const n=t.source_type==="local"?.2:.1;return a+=n,e.description&&e.description.length>100&&(a+=.1),e.image_url&&(a+=.05),e.author&&(a+=.05),e.location_lat&&e.location_lng&&(a+=.1),Math.min(a,1)}isRateLimited(e){return u(this,null,function*(){if(!e.last_fetch_at)return!1;const t=new Date(e.last_fetch_at),a=(new Date().getTime()-t.getTime())/(1e3*60*60),n=24/e.rate_limit_per_hour;return a<n})}updateSourceFetchTime(e){return u(this,null,function*(){try{yield f.from("news_sources").update({last_fetch_at:new Date().toISOString()}).eq("id",e)}catch(t){console.error("Error updating source fetch time:",t)}})}getUserNewsFeed(e,t=20){return u(this,null,function*(){try{const{data:s,error:a}=yield f.rpc("get_personalized_news_feed",{user_uuid:e,limit_count:t});if(a)throw a;return s||[]}catch(s){return console.error("Error getting user news feed:",s),[]}})}getNearbyNewsArticles(e,t,s=50,a,n=20){return u(this,null,function*(){try{const{data:o,error:i}=yield f.rpc("get_nearby_news_articles",{user_lat:e,user_lng:t,radius_km:s,category_filter:a||null,limit_count:n});if(i)throw i;return o||[]}catch(o){return console.error("Error getting nearby news articles:",o),[]}})}searchNewsArticles(a){return u(this,arguments,function*(e,t={},s=20){try{let n=f.from("news_articles").select("*").or(`title.ilike.%${e}%,description.ilike.%${e}%`).order("published_at",{ascending:!1}).limit(s);t.category&&(n=n.eq("category",t.category)),t.source&&(n=n.eq("source_id",t.source)),t.dateFrom&&(n=n.gte("published_at",t.dateFrom)),t.dateTo&&(n=n.lte("published_at",t.dateTo));const{data:o,error:i}=yield n;if(i)throw i;return t.location?(o==null?void 0:o.filter(c=>!c.location_lat||!c.location_lng?!1:this.calculateDistance(t.location.lat,t.location.lng,c.location_lat,c.location_lng)<=t.location.radius))||[]:o||[]}catch(n){return console.error("Error searching news articles:",n),[]}})}calculateDistance(e,t,s,a){const o=this.toRadians(s-e),i=this.toRadians(a-t),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(s))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}toRadians(e){return e*(Math.PI/180)}getNewsStatistics(){return u(this,null,function*(){try{const[{count:e},{count:t},{count:s},{count:a}]=yield Promise.all([f.from("news_articles").select("*",{count:"exact",head:!0}),f.from("news_sources").select("*",{count:"exact",head:!0}).eq("is_active",!0),f.from("news_categories").select("*",{count:"exact",head:!0}).eq("is_active",!0),f.from("news_articles").select("*",{count:"exact",head:!0}).gte("created_at",new Date(Date.now()-864e5).toISOString())]);return{total_articles:e||0,total_sources:t||0,total_categories:s||0,recent_articles:a||0}}catch(e){return console.error("Error getting news statistics:",e),{total_articles:0,total_sources:0,total_categories:0,recent_articles:0}}})}}const lt=()=>{const{user:h}=ie(),{currentLocation:e}=pe(),{toast:t}=le(),[s,a]=b.useState([]),[n,o]=b.useState(!0),[i,c]=b.useState(!1),[m,g]=b.useState(null),[x,N]=b.useState("all"),[p,q]=b.useState({category:"all",source:"all",timeRange:"all",searchQuery:""});b.useEffect(()=>{E()},[E]);const E=b.useCallback(()=>u(void 0,null,function*(){const l=new Ce;try{o(!0),g(null);let d=[];x==="local"&&e?d=yield l.getNearbyNewsArticles(e.latitude,e.longitude,50,p.category!=="all"?p.category:void 0,20):x==="personalized"&&h?d=yield l.getUserNewsFeed(h.id,20):d=yield l.searchNewsArticles(p.searchQuery||"",{category:p.category!=="all"?p.category:void 0,dateFrom:Y(p.timeRange)},20),a(d)}catch(d){console.error("Error loading news:",d),g("Failed to load news. Please try again."),t({title:"Error",description:"Failed to load news articles",variant:"destructive"})}finally{o(!1)}}),[x,e,h,p,t]),W=()=>u(void 0,null,function*(){c(!0),yield E(),c(!1),t({title:"Success",description:"News feed refreshed"})}),Y=l=>{const d=new Date;switch(l){case"today":return new Date(d.getFullYear(),d.getMonth(),d.getDate()).toISOString();case"week":return new Date(d.getTime()-7*24*60*60*1e3).toISOString();case"month":return new Date(d.getTime()-30*24*60*60*1e3).toISOString();default:return}},J=l=>{const d=new Date(l),$=(new Date().getTime()-d.getTime())/(1e3*60*60);return $<1?"Just now":$<24?`${Math.floor($)}h ago`:$<48?"Yesterday":d.toLocaleDateString()},X=l=>({politics:"bg-red-100 text-red-800",business:"bg-blue-100 text-blue-800",technology:"bg-purple-100 text-purple-800",entertainment:"bg-pink-100 text-pink-800",sports:"bg-green-100 text-green-800",health:"bg-emerald-100 text-emerald-800",science:"bg-indigo-100 text-indigo-800",local:"bg-orange-100 text-orange-800",world:"bg-gray-100 text-gray-800",national:"bg-yellow-100 text-yellow-800"})[l]||"bg-gray-100 text-gray-800",ee=l=>{q(d=>A(v({},d),{searchQuery:l}))},K=(l,d)=>{q(B=>A(v({},B),{[l]:d}))},L=l=>r.jsx(S,{className:"mb-4 hover:shadow-md transition-shadow",children:r.jsx(C,{className:"p-4",children:r.jsxs("div",{className:"flex gap-4",children:[l.image_url&&r.jsx("div",{className:"flex-shrink-0",children:r.jsx("img",{src:l.image_url,alt:l.title,className:"w-24 h-24 object-cover rounded-lg",onError:d=>{d.target.style.display="none"}})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsx("h3",{className:"font-semibold text-lg leading-tight line-clamp-2",children:l.title}),r.jsx(O,{variant:"ghost",size:"sm",onClick:()=>window.open(l.url||"#","_blank"),className:"flex-shrink-0",children:r.jsx(he,{className:"h-4 w-4"})})]}),r.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:l.description||l.summary}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(P,{className:"h-3 w-3"}),r.jsx("span",{children:l.source_name||"Unknown Source"})]}),l.author&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(M,{className:"h-3 w-3"}),r.jsx("span",{children:l.author})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ye,{className:"h-3 w-3"}),r.jsx("span",{children:J(l.published_at)})]}),l.location_name&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),r.jsx("span",{children:l.location_name})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[l.category&&r.jsx(U,{className:X(l.category),children:l.category}),l.is_breaking&&r.jsx(U,{variant:"destructive",className:"text-xs",children:"Breaking"}),l.is_trending&&r.jsxs(U,{variant:"secondary",className:"text-xs",children:[r.jsx(xe,{className:"h-3 w-3 mr-1"}),"Trending"]})]})]})]})]})})},l.id),R=()=>r.jsx(S,{className:"mb-4",children:r.jsx(C,{className:"p-4",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx(j,{className:"w-24 h-24 rounded-lg"}),r.jsxs("div",{className:"flex-1",children:[r.jsx(j,{className:"h-6 w-3/4 mb-2"}),r.jsx(j,{className:"h-4 w-full mb-2"}),r.jsx(j,{className:"h-4 w-2/3 mb-3"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(j,{className:"h-3 w-20"}),r.jsx(j,{className:"h-3 w-16"}),r.jsx(j,{className:"h-3 w-12"})]})]})]})})});return r.jsx(ue,{children:r.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(P,{className:"h-8 w-8 text-primary"}),"News Feed"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Stay updated with the latest local and global news"})]}),r.jsxs(O,{onClick:W,disabled:i,variant:"outline",size:"sm",children:[r.jsx(ce,{className:`h-4 w-4 mr-2 ${i?"animate-spin":""}`}),"Refresh"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(me,{placeholder:"Search news articles...",value:p.searchQuery,onChange:l=>ee(l.target.value),className:"pl-10"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(H,{value:p.category,onValueChange:l=>K("category",l),children:[r.jsx(V,{className:"w-32",children:r.jsx(Z,{placeholder:"Category"})}),r.jsxs(Q,{children:[r.jsx(w,{value:"all",children:"All Categories"}),r.jsx(w,{value:"politics",children:"Politics"}),r.jsx(w,{value:"business",children:"Business"}),r.jsx(w,{value:"technology",children:"Technology"}),r.jsx(w,{value:"entertainment",children:"Entertainment"}),r.jsx(w,{value:"sports",children:"Sports"}),r.jsx(w,{value:"health",children:"Health"}),r.jsx(w,{value:"science",children:"Science"}),r.jsx(w,{value:"local",children:"Local"}),r.jsx(w,{value:"world",children:"World"})]})]}),r.jsxs(H,{value:p.timeRange,onValueChange:l=>K("timeRange",l),children:[r.jsx(V,{className:"w-32",children:r.jsx(Z,{placeholder:"Time"})}),r.jsxs(Q,{children:[r.jsx(w,{value:"all",children:"All Time"}),r.jsx(w,{value:"today",children:"Today"}),r.jsx(w,{value:"week",children:"This Week"}),r.jsx(w,{value:"month",children:"This Month"})]})]})]})]})]}),r.jsxs(de,{value:x,onValueChange:N,className:"mb-6",children:[r.jsxs(ge,{className:"grid w-full grid-cols-3",children:[r.jsxs(F,{value:"all",className:"flex items-center gap-2",children:[r.jsx(we,{className:"h-4 w-4"}),"All News"]}),r.jsxs(F,{value:"local",className:"flex items-center gap-2",children:[r.jsx(z,{className:"h-4 w-4"}),"Local News"]}),r.jsxs(F,{value:"personalized",className:"flex items-center gap-2",children:[r.jsx(M,{className:"h-4 w-4"}),"For You"]})]}),r.jsxs(D,{value:"all",className:"mt-6",children:[m&&r.jsxs(k,{className:"mb-4",children:[r.jsx(_,{className:"h-4 w-4"}),r.jsx(T,{children:m})]}),n?r.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((l,d)=>R())}):s.length===0?r.jsx(S,{children:r.jsxs(C,{className:"p-8 text-center",children:[r.jsx(P,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No news articles found"}),r.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or check back later for new content."})]})}):r.jsx("div",{className:"space-y-4",children:s.map(L)})]}),r.jsx(D,{value:"local",className:"mt-6",children:e?r.jsxs(r.Fragment,{children:[m&&r.jsxs(k,{className:"mb-4",children:[r.jsx(_,{className:"h-4 w-4"}),r.jsx(T,{children:m})]}),n?r.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((l,d)=>R())}):s.length===0?r.jsx(S,{children:r.jsxs(C,{className:"p-8 text-center",children:[r.jsx(z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No local news found"}),r.jsx("p",{className:"text-gray-600",children:"We couldn't find any news articles for your area. Try expanding your search or check back later."})]})}):r.jsx("div",{className:"space-y-4",children:s.map(L)})]}):r.jsxs(k,{className:"mb-4",children:[r.jsx(_,{className:"h-4 w-4"}),r.jsx(T,{children:"Location access is required to show local news. Please enable location services."})]})}),r.jsx(D,{value:"personalized",className:"mt-6",children:h?r.jsxs(r.Fragment,{children:[m&&r.jsxs(k,{className:"mb-4",children:[r.jsx(_,{className:"h-4 w-4"}),r.jsx(T,{children:m})]}),n?r.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((l,d)=>R())}):s.length===0?r.jsx(S,{children:r.jsxs(C,{className:"p-8 text-center",children:[r.jsx(M,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No personalized news yet"}),r.jsx("p",{className:"text-gray-600",children:"Your personalized feed will improve as you interact with more articles."})]})}):r.jsx("div",{className:"space-y-4",children:s.map(L)})]}):r.jsxs(k,{className:"mb-4",children:[r.jsx(_,{className:"h-4 w-4"}),r.jsx(T,{children:"Please sign in to view your personalized news feed."})]})})]})]})})};export{lt as default};
