import{r as e,j as s,B as t,X as a,u as i,b as r,a as l,d as o,s as n}from"./index-B5IYdG7F.js";import{R as c}from"./ResponsiveLayout-BzUw0buI.js";import{I as d}from"./input-C4_QhDnm.js";import{L as u}from"./label-BIAuZBUP.js";import{B as p}from"./badge-Dh5Uj8vN.js";import{C as m,a as h,b as x,c as j,d as v}from"./card-Bm1jiGt-.js";import{T as f}from"./textarea-DnhiZrYB.js";import{S as y,a as g,b,c as N,d as S}from"./select-DME_qdt9.js";import{P}from"./zap-DPSXpNso.js";import{P as k}from"./sheet-CgDUfSpi.js";import{D as w}from"./dollar-sign-DW2P0OIR.js";import"./separator-BZYZTYLW.js";import"./NotificationBell-DtnEojo4.js";import"./Combination-BxRIZ8rt.js";import"./scroll-area-Beiyt5Kx.js";import"./index-9msbY5CZ.js";import"./index-jVOyRz7F.js";import"./useNotifications-C0wifgqF.js";import"./tabs-DPPBWbFC.js";import"./check-C9wwFfOs.js";import"./bell-qeMkXRtc.js";import"./settings-DSEWn2wM.js";import"./user-UOowhO7W.js";import"./index-DWtoKlrM.js";import"./NotificationButton-CqXjP_LK.js";import"./search-Co_OHmlK.js";import"./map-pin-BwnggLrZ.js";import"./index-DD_J5sPn.js";import"./users-Dh-Bdb-k.js";import"./message-square-j4RxGxzk.js";import"./alert-CQybxmNr.js";import"./log-out-DchhrZ8K.js";import"./index-_KG4atBu.js";import"./chevron-up-DvjQ7ry8.js";const C={music:["Vocals","Guitar","Piano","Drums","DJ","Live Band","Solo Performance"],visual:["Photography","Videography","Painting","Digital Art","Portrait Art","Wedding Photography"],performance:["Dancing","Acting","Comedy","Magic","Acrobatics","Theater"],event:["Event Planning","MC/Host","Wedding Planning","Corporate Events","Birthday Parties"],craft:["Crafts","Jewelry Making","Pottery","Woodworking","Textile Art","Sculpture"]},_=({onSubmit:i,loading:r,initialData:l})=>{var o,n;const[c,_]=e.useState((null==l?void 0:l.artistSkills)||[]),[M,R]=e.useState(""),[A,D]=e.useState((null==(o=null==l?void 0:l.hourlyRateMin)?void 0:o.toString())||""),[B,E]=e.useState((null==(n=null==l?void 0:l.hourlyRateMax)?void 0:n.toString())||""),[U,q]=e.useState(""),[L,O]=e.useState((null==l?void 0:l.portfolioUrls)||[]),[T,F]=e.useState((null==l?void 0:l.bio)||""),[V,z]=e.useState((null==l?void 0:l.specialty)||""),W=e=>{_(c.filter(s=>s!==e))},H=()=>{M.trim()&&!c.includes(M.trim())&&(_([...c,M.trim()]),R(""))},I=()=>{U.trim()&&!L.includes(U.trim())&&(O([...L,U.trim()]),q(""))};return s.jsx("form",{onSubmit:e=>{e.preventDefault(),0!==c.length&&i({artistSkills:c,hourlyRateMin:parseFloat(A)||0,hourlyRateMax:parseFloat(B)||0,portfolioUrls:L,bio:T,specialty:V})},className:"space-y-6",children:s.jsxs(m,{children:[s.jsxs(h,{children:[s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(P,{className:"h-5 w-5"}),"Artist Profile Setup"]}),s.jsx(j,{children:"Tell potential clients about your skills and services"})]}),s.jsxs(v,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"specialty",children:"Primary Specialty"}),s.jsxs(y,{value:V,onValueChange:z,children:[s.jsx(g,{children:s.jsx(b,{placeholder:"Select your main specialty"})}),s.jsxs(N,{children:[s.jsx(S,{value:"musician",children:"Musician"}),s.jsx(S,{value:"photographer",children:"Photographer"}),s.jsx(S,{value:"performer",children:"Performer"}),s.jsx(S,{value:"visual_artist",children:"Visual Artist"}),s.jsx(S,{value:"event_planner",children:"Event Planner"}),s.jsx(S,{value:"crafter",children:"Crafter"}),s.jsx(S,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"bio",children:"Bio"}),s.jsx(f,{id:"bio",placeholder:"Tell clients about yourself, your experience, and what makes you unique...",value:T,onChange:e=>F(e.target.value),rows:4})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(u,{children:"Skills & Services"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select up to 10 skills that best describe your services"})]}),s.jsx("div",{className:"grid gap-4",children:Object.entries(C).map(([e,i])=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium capitalize",children:e}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(e=>s.jsxs(t,{type:"button",variant:c.includes(e)?"default":"outline",size:"sm",onClick:()=>c.includes(e)?W(e):(e=>{!c.includes(e)&&c.length<10&&_([...c,e])})(e),disabled:!c.includes(e)&&c.length>=10,children:[e,c.includes(e)&&s.jsx(a,{className:"ml-1 h-3 w-3"})]},e))})]},e))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{placeholder:"Add custom skill...",value:M,onChange:e=>R(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),H())}),s.jsx(t,{type:"button",onClick:H,disabled:c.length>=10,children:s.jsx(k,{className:"h-4 w-4"})})]}),c.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{children:["Selected Skills (",c.length,"/10)"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(e=>s.jsxs(p,{variant:"secondary",className:"gap-1",children:[e,s.jsx(a,{className:"h-3 w-3 cursor-pointer",onClick:()=>W(e)})]},e))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(u,{className:"flex items-center gap-2",children:[s.jsx(w,{className:"h-4 w-4"}),"Hourly Rate Range (Optional)"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(d,{type:"number",placeholder:"Min rate",value:A,onChange:e=>D(e.target.value),min:"0",step:"0.01"})}),s.jsx("div",{children:s.jsx(d,{type:"number",placeholder:"Max rate",value:B,onChange:e=>E(e.target.value),min:"0",step:"0.01"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty if you prefer to negotiate rates per project"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(u,{children:"Portfolio Links (Optional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{placeholder:"Add portfolio URL...",value:U,onChange:e=>q(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),I())}),s.jsx(t,{type:"button",onClick:I,children:s.jsx(k,{className:"h-4 w-4"})})]}),L.length>0&&s.jsx("div",{className:"space-y-2",children:L.map((e,i)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-md",children:[s.jsx("span",{className:"flex-1 text-sm truncate",children:e}),s.jsx(t,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{O(L.filter(s=>s!==e))})(e),children:s.jsx(a,{className:"h-4 w-4"})})]},i))})]}),s.jsx(t,{type:"submit",className:"w-full",disabled:r||0===c.length,children:r?"Saving...":"Complete Artist Profile"})]})]})})},M=()=>{const{user:t}=i(),a=r(),d=l(),{toast:u}=o(),[p,m]=e.useState(!1),[h,x]=e.useState(null);e.useEffect(()=>{var e;(null==(e=d.state)?void 0:e.artistData)&&x(d.state.artistData)},[d.state]);return s.jsx(c,{children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Complete Your Artist Profile"}),s.jsx("p",{className:"text-muted-foreground",children:"Tell potential clients about your skills and services to start receiving bookings."})]}),s.jsx(_,{onSubmit:e=>((e,s,t)=>new Promise((a,i)=>{var r=e=>{try{o(t.next(e))}catch(s){i(s)}},l=e=>{try{o(t.throw(e))}catch(s){i(s)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,l);o((t=t.apply(e,s)).next())}))(void 0,null,function*(){if(t){m(!0);try{const{error:s}=yield n.from("profiles").update({user_type:"artist",bio:e.bio,artist_skills:e.artistSkills,hourly_rate_min:e.hourlyRateMin>0?e.hourlyRateMin:null,hourly_rate_max:e.hourlyRateMax>0?e.hourlyRateMax:null,portfolio_urls:e.portfolioUrls.length>0?e.portfolioUrls:null}).eq("user_id",t.id);if(s)throw s;const{error:i}=yield n.from("artists").upsert({user_id:t.id,specialty:e.artistSkills&&e.artistSkills.length>0?e.artistSkills:[],experience_years:0,portfolio_urls:e.portfolioUrls,hourly_rate_min:e.hourlyRateMin>0?e.hourlyRateMin:null,hourly_rate_max:e.hourlyRateMax>0?e.hourlyRateMax:null,bio:e.bio,is_available:!0,updated_at:(new Date).toISOString()},{onConflict:"user_id"});if(i)throw i;u({title:"Artist Profile Created!",description:"Your artist profile has been set up successfully. You can now receive booking requests."}),a("/feed")}catch(s){u({title:"Error",description:"Failed to create artist profile. Please try again.",variant:"destructive"})}finally{m(!1)}}else u({title:"Authentication Required",description:"Please sign in to complete your artist profile.",variant:"destructive"})}),loading:p,initialData:h})]})})};export{M as default};
