var V=(_,c,l)=>new Promise((f,N)=>{var h=d=>{try{o(l.next(d))}catch(u){N(u)}},v=d=>{try{o(l.throw(d))}catch(u){N(u)}},o=d=>d.done?f(d.value):Promise.resolve(d.value).then(h,v);o((l=l.apply(_,c)).next())});import{r,j as e}from"./chunk-V8Tq47hD.js";import{ResponsiveLayout as ce}from"./ResponsiveLayout.tsx-CBMj4ano.js";import{u as oe,e as de,B as n,C as m,a as x}from"./main-nj8_qmr1.js";import{I as me}from"./chunk-CfjvP89K.js";import{B as O}from"./chunk-BqqQDpKD.js";import{A as xe,a as he,b as ue}from"./chunk-CJL1E-Mt.js";import{T as ge,a as pe,b,c as y}from"./chunk-Dqojk3_S.js";import{S as H,a as G,b as U,c as Q,d as w}from"./chunk-BJzCN5QX.js";import{D as je,a as fe,b as Ne,c as ve,d as be}from"./chunk-B-6hVeMl.js";import{L as E}from"./chunk-BbVfpXIH.js";import{u as ye}from"./chunk-B8PQiX0I.js";import{a as we,u as Ce}from"./chunk-e6ItqUv0.js";import{E as ke}from"./chunk-Bz-NoICJ.js";import{p as Se}from"./chunk-aOfXXddH.js";import{r as W,k as Ee,l as Ae,U as A,m as Te,s as _e,D as ze,t as Be,o as Fe,B as Me,u as Le,R as De,P as T,v as Y,T as q,M as C,C as g,w as Ie,x as Pe,j as Re,y as $e,z as J,i as K,E as X,I as Ve,G as Oe}from"./chunk-BD2ShIYc.js";import{m as k}from"./chunk-axyawUmi.js";import"./chunk-7Gxbu0Lx.js";import"./chunk-HDUI5Ctd.js";import"./chunk-jOF7Mqj2.js";import"./chunk-DkszvQuI.js";import"./chunk-Cv5hKDJv.js";import"./chunk-CHdjBz-i.js";import"./chunk-DJWri4GU.js";import"./chunk-M09l3cRM.js";const Ns=()=>{const{user:_}=oe();Se();const{toast:c}=de(),{events:l,loading:f,toggleAttendance:N}=ye();we(),Ce();const[h,v]=r.useState(""),[o,d]=r.useState("All Categories"),[u,z]=r.useState("grid"),[B,Z]=r.useState("date"),[F,M]=r.useState(null),[ee,L]=r.useState(!1),[se,ae]=r.useState("discover"),[te,D]=r.useState(!1),[He,Ge]=r.useState(!1),[I,P]=r.useState(!1),[Ue,Qe]=r.useState({category:"All Categories",dateRange:"All Time",priceRange:"Any Price",location:"Any Location",sortBy:"date"}),le=[{id:"all",name:"All Categories",icon:W,color:"bg-gray-500",count:l.length},{id:"music",name:"Music",icon:Ee,color:"bg-purple-500",count:l.filter(s=>s.category==="Music").length},{id:"art",name:"Art",icon:Ae,color:"bg-pink-500",count:l.filter(s=>s.category==="Art").length},{id:"community",name:"Community",icon:A,color:"bg-blue-500",count:l.filter(s=>s.category==="Community").length},{id:"food",name:"Food",icon:Te,color:"bg-orange-500",count:l.filter(s=>s.category==="Food").length},{id:"tech",name:"Technology",icon:_e,color:"bg-indigo-500",count:l.filter(s=>s.category==="Technology").length},{id:"wellness",name:"Health & Wellness",icon:ze,color:"bg-green-500",count:l.filter(s=>s.category==="Health & Wellness").length},{id:"sports",name:"Sports",icon:Be,color:"bg-red-500",count:l.filter(s=>s.category==="Sports").length},{id:"education",name:"Education",icon:Fe,color:"bg-yellow-500",count:l.filter(s=>s.category==="Education").length},{id:"business",name:"Business",icon:Me,color:"bg-gray-600",count:l.filter(s=>s.category==="Business").length},{id:"entertainment",name:"Entertainment",icon:Le,color:"bg-pink-600",count:l.filter(s=>s.category==="Entertainment").length}],p=[...l.filter(s=>{const a=s.title.toLowerCase().includes(h.toLowerCase())||s.description&&s.description.toLowerCase().includes(h.toLowerCase())||s.tags&&s.tags.some(i=>i.toLowerCase().includes(h.toLowerCase())),t=o==="All Categories"||s.category===o;return a&&t})].sort((s,a)=>{switch(B){case"date":try{const t=new Date(s.event_date||s.date),i=new Date(a.event_date||a.date);return t.getTime()-i.getTime()}catch(t){return 0}case"popularity":return(a.attendees_count||a.attendees||0)-(s.attendees_count||s.attendees||0);case"price":{const t=s.price==="Free"?0:typeof s.price=="string"?parseInt(s.price.replace("$","")):s.price,i=a.price==="Free"?0:typeof a.price=="string"?parseInt(a.price.replace("$","")):a.price;return t-i}default:return 0}}),S=r.useCallback(()=>V(null,null,function*(){P(!0);try{yield new Promise(s=>setTimeout(s,1e3)),c({title:"Events Refreshed",description:"Latest events have been loaded."})}catch(s){c({title:"Refresh Failed",description:"Unable to refresh events. Please try again.",variant:"destructive"})}finally{P(!1)}}),[c]);r.useCallback(s=>{const a=s.toLowerCase();if(a.includes("search")){const t=s.replace(/search\s+/i,"");v(t),c({title:"Voice Search",description:`Searching for: ${t}`})}else a.includes("filter")?(D(t=>!t),c({title:"Voice Filter",description:"Opening filters panel"})):a.includes("refresh")&&S()},[S,c]);const R=s=>{M(s),L(!0)},ie=({event:s,isOpen:a,onClose:t})=>{const[i,j]=r.useState(1),[$,re]=r.useState(!1),ne=s.price==="Free"?0:parseInt(s.price.replace("$",""))*i;return e.jsx(je,{open:a,onOpenChange:t,children:e.jsxs(fe,{className:"max-w-2xl",children:[e.jsxs(Ne,{children:[e.jsx(ve,{className:"text-2xl font-bold",children:s.title}),e.jsx(be,{children:"Book your tickets for this amazing event"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:s.image_url||s.image||"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=800&h=400&fit=crop",alt:s.title,className:"w-32 h-24 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(g,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.event_date||s.date})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(J,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.event_time||s.time})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(C,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.location_name||s.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[s.attendees_count||s.attendees||0," / ",s.max_attendees||s.maxAttendees||"∞"," attending"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Select Tickets"}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"General Admission"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.price," per ticket"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>j(Math.max(1,i-1)),disabled:i<=1,children:"-"}),e.jsx("span",{className:"w-8 text-center",children:i}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>j(Math.min((s.max_attendees||s.maxAttendees||100)-(s.attendees_count||s.attendees||0),i+1)),disabled:i>=(s.max_attendees||s.maxAttendees||100)-(s.attendees_count||s.attendees||0),children:"+"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted rounded-lg",children:[e.jsx("span",{className:"font-semibold",children:"Total"}),e.jsx("span",{className:"text-xl font-bold",children:s.price==="Free"?"Free":`$${ne}`})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(n,{className:"flex-1 btn-event",onClick:()=>{c({title:"Booking Successful",description:`You've booked ${i} ticket(s) for ${s.title}`}),t()},children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),s.price==="Free"?"Reserve Spot":"Book Tickets"]}),e.jsxs(n,{variant:"outline",onClick:()=>re(!$),children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Contact"]})]}),$&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Contact Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"info@eventorganizer.com"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{children:"www.eventorganizer.com"})]})]})]})]})]})})};return e.jsx(ce,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Events"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Discover and book amazing local events"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(n,{variant:"outline",onClick:S,disabled:I,children:[e.jsx(De,{className:`w-4 h-4 mr-2 ${I?"animate-spin":""}`}),"Refresh"]}),e.jsx(n,{className:"btn-event",asChild:!0,children:e.jsxs(E,{to:"/create-event",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]})]}),e.jsxs(ge,{value:se,onValueChange:ae,className:"space-y-6",children:[e.jsxs(pe,{className:"grid grid-cols-4 w-full",children:[e.jsxs(b,{value:"discover",className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Discover"]}),e.jsxs(b,{value:"trending",className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"Trending"]}),e.jsxs(b,{value:"nearby",className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Nearby"]}),e.jsxs(b,{value:"my-events",className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"My Events"]})]}),e.jsxs(y,{value:"discover",className:"space-y-6",children:[e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search events, organizers, or locations...",value:h,onChange:s=>v(s.target.value),className:"pl-10"})]}),e.jsxs(H,{value:o,onValueChange:d,children:[e.jsx(G,{className:"w-full lg:w-48",children:e.jsx(U,{placeholder:"Category"})}),e.jsx(Q,{children:le.map(s=>e.jsx(w,{value:s.name,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.name," (",s.count,")"]})},s.id))})]}),e.jsxs(H,{value:B,onValueChange:Z,children:[e.jsx(G,{className:"w-full lg:w-40",children:e.jsx(U,{placeholder:"Sort by"})}),e.jsxs(Q,{children:[e.jsx(w,{value:"date",children:"Date"}),e.jsx(w,{value:"popularity",children:"Popularity"}),e.jsx(w,{value:"price",children:"Price"})]})]}),e.jsxs("div",{className:"flex border rounded-lg",children:[e.jsx(n,{variant:u==="grid"?"default":"ghost",size:"sm",onClick:()=>z("grid"),className:"rounded-r-none",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx(n,{variant:u==="list"?"default":"ghost",size:"sm",onClick:()=>z("list"),className:"rounded-l-none",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})})}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:[o==="All Categories"?"All Events":o," (",p.length,")"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>D(!te),children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Filters"]})})]}),u==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f?[...Array(6)].map((s,a)=>e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},children:e.jsxs(m,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-muted rounded-t-lg"}),e.jsxs(x,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})]})},a)):p.length>0?p.map((s,a)=>e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},whileHover:{y:-5},children:e.jsx(ke,{event:s,onAttend:N,onBook:R,onLike:t=>{c({title:"Event Liked",description:"You've liked this event!"})},onChat:(t,i)=>{c({title:"Chat Started",description:"Opening chat with organizer..."})},verified:Math.random()>.7})},s.id)):e.jsx("div",{className:"col-span-full",children:e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:h||o!=="All Categories"?"No events match your search criteria.":"There are no events available at the moment."}),e.jsx(E,{to:"/create-event",children:e.jsxs(n,{className:"btn-event",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]})})})}):e.jsx("div",{className:"space-y-4",children:f?[...Array(6)].map((s,a)=>e.jsx(k.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:a*.1},children:e.jsx(m,{className:"animate-pulse",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-32 h-24 bg-muted rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})]})})})},a)):p.length>0?p.map((s,a)=>{var t,i,j;return e.jsx(k.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:a*.1},whileHover:{x:5},children:e.jsx(m,{className:"event-card group cursor-pointer hover:shadow-event transition-all duration-300",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("img",{src:s.image_url||s.image||"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=800&h=400&fit=crop",alt:s.title,className:"w-32 h-24 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.title,Math.random()>.7&&e.jsxs(O,{className:"bg-blue-500 text-white text-xs",children:[e.jsx(Re,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:s.description})]}),e.jsx(n,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($e,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3"}),s.event_date||s.date]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"}),s.event_time||s.time]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),s.location_name||s.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3"}),s.attendees_count||s.attendees||0," / ",s.max_attendees||s.maxAttendees||"∞"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(xe,{className:"w-6 h-6",children:[e.jsx(he,{src:s.organizer_avatar||((t=s.organizer)==null?void 0:t.avatar)}),e.jsx(ue,{children:(s.organizer_name||((i=s.organizer)==null?void 0:i.name)||"E")[0]})]}),e.jsx("span",{className:"text-sm font-medium",children:s.organizer_name||((j=s.organizer)==null?void 0:j.name)||"Event Organizer"})]}),e.jsx(O,{className:"badge-event",children:s.category})]}),e.jsxs(n,{className:"btn-event",onClick:()=>R(s),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),s.price===0||s.price==="Free"?"Free":`$${s.price}`]})]})]})]})})})},s.id)}):e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:h||o!=="All Categories"?"No events match your search criteria.":"There are no events available at the moment."}),e.jsx(E,{to:"/create-event",children:e.jsxs(n,{className:"btn-event",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]})})})]})]}),e.jsx(y,{value:"trending",className:"space-y-6",children:e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(q,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Trending Events"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})]})})}),e.jsx(y,{value:"nearby",className:"space-y-6",children:e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(C,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nearby Events"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})]})})}),e.jsx(y,{value:"my-events",className:"space-y-6",children:e.jsx(m,{children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"My Events"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})]})})})]}),F&&e.jsx(ie,{event:F,isOpen:ee,onClose:()=>{L(!1),M(null)}})]})})};export{Ns as default};
