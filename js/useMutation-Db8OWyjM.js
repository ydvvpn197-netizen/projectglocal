var jt=Object.defineProperty,Kt=Object.defineProperties;var zt=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var Ot=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable;var Mt=s=>{throw TypeError(s)};var Et=(s,t,e)=>t in s?jt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,Q=(s,t)=>{for(var e in t||(t={}))Ot.call(t,e)&&Et(s,e,t[e]);if($)for(var e of $(t))It.call(t,e)&&Et(s,e,t[e]);return s},tt=(s,t)=>Kt(s,zt(t));var xt=(s,t)=>{var e={};for(var r in s)Ot.call(s,r)&&t.indexOf(r)<0&&(e[r]=s[r]);if(s!=null&&$)for(var r of $(s))t.indexOf(r)<0&&It.call(s,r)&&(e[r]=s[r]);return e};var ot=(s,t,e)=>t.has(s)||Mt("Cannot "+e);var i=(s,t,e)=>(ot(s,t,"read from private field"),e?e.call(s):t.get(s)),f=(s,t,e)=>t.has(s)?Mt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),c=(s,t,e,r)=>(ot(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e),d=(s,t,e)=>(ot(s,t,"access private method"),e);import{c as Wt,ag as kt,ah as wt,ai as I,aj as st,ak as V,al as it,am as ut,an as Tt,ao as qt,ap as Vt,aq as Gt,ar as Qt,as as rt,at as _t,au as Jt,r as R,av as Bt,af as Nt}from"./main-Dczk40-q.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=Wt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);var y,n,G,m,P,N,x,_,J,A,H,L,k,U,j,u,q,ct,lt,dt,ft,pt,bt,mt,At,Pt,Xt=(Pt=class extends kt{constructor(t,e){super();f(this,u);f(this,y);f(this,n);f(this,G);f(this,m);f(this,P);f(this,N);f(this,x);f(this,_);f(this,J);f(this,A);f(this,H);f(this,L);f(this,k);f(this,U);f(this,j,new Set);this.options=e,c(this,y,t),c(this,_,null),c(this,x,wt()),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,n).addObserver(this),Ut(i(this,n),this.options)?d(this,u,q).call(this):this.updateResult(),d(this,u,ft).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return vt(i(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return vt(i(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,u,pt).call(this),d(this,u,bt).call(this),i(this,n).removeObserver(this)}setOptions(t){const e=this.options,r=i(this,n);if(this.options=i(this,y).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof I(this.options.enabled,i(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");d(this,u,mt).call(this),i(this,n).setOptions(this.options),e._defaulted&&!st(this.options,e)&&i(this,y).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,n),observer:this});const a=this.hasListeners();a&&Ft(i(this,n),r,this.options,e)&&d(this,u,q).call(this),this.updateResult(),a&&(i(this,n)!==r||I(this.options.enabled,i(this,n))!==I(e.enabled,i(this,n))||V(this.options.staleTime,i(this,n))!==V(e.staleTime,i(this,n)))&&d(this,u,ct).call(this);const h=d(this,u,lt).call(this);a&&(i(this,n)!==r||I(this.options.enabled,i(this,n))!==I(e.enabled,i(this,n))||h!==i(this,U))&&d(this,u,dt).call(this,h)}getOptimisticResult(t){const e=i(this,y).getQueryCache().build(i(this,y),t),r=this.createResult(e,t);return Zt(this,r)&&(c(this,m,r),c(this,N,this.options),c(this,P,i(this,n).state)),r}getCurrentResult(){return i(this,m)}trackResult(t,e){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),e==null||e(a),a==="promise"&&!this.options.experimental_prefetchInRender&&i(this,x).status==="pending"&&i(this,x).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(t){i(this,j).add(t)}getCurrentQuery(){return i(this,n)}refetch(e={}){var t=xt(e,[]);return this.fetch(Q({},t))}fetchOptimistic(t){const e=i(this,y).defaultQueryOptions(t),r=i(this,y).getQueryCache().build(i(this,y),e);return r.fetch().then(()=>this.createResult(r,e))}fetch(t){var e;return d(this,u,q).call(this,tt(Q({},t),{cancelRefetch:(e=t.cancelRefetch)!=null?e:!0})).then(()=>(this.updateResult(),i(this,m)))}createResult(t,e){var Ct;const r=i(this,n),a=this.options,h=i(this,m),o=i(this,P),C=i(this,N),v=t!==r?t.state:i(this,G),{state:E}=t;let l=Q({},E),K=!1,b;if(e._optimisticResults){const O=this.hasListeners(),Y=!O&&Ut(t,e),B=O&&Ft(t,r,e,a);(Y||B)&&(l=Q(Q({},l),Gt(E.data,t.options))),e._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:z,errorUpdatedAt:W,status:S}=l;b=l.data;let X=!1;if(e.placeholderData!==void 0&&b===void 0&&S==="pending"){let O;h!=null&&h.isPlaceholderData&&e.placeholderData===(C==null?void 0:C.placeholderData)?(O=h.data,X=!0):O=typeof e.placeholderData=="function"?e.placeholderData((Ct=i(this,H))==null?void 0:Ct.state.data,i(this,H)):e.placeholderData,O!==void 0&&(S="success",b=Qt(h==null?void 0:h.data,O,e),K=!0)}if(e.select&&b!==void 0&&!X)if(h&&b===(o==null?void 0:o.data)&&e.select===i(this,J))b=i(this,A);else try{c(this,J,e.select),b=e.select(b),b=Qt(h==null?void 0:h.data,b,e),c(this,A,b),c(this,_,null)}catch(O){c(this,_,O)}i(this,_)&&(z=i(this,_),b=i(this,A),W=Date.now(),S="error");const at=l.fetchStatus==="fetching",nt=S==="pending",ht=S==="error",Rt=nt&&at,St=b!==void 0,M={status:S,fetchStatus:l.fetchStatus,isPending:nt,isSuccess:S==="success",isError:ht,isInitialLoading:Rt,isLoading:Rt,data:b,dataUpdatedAt:l.dataUpdatedAt,error:z,errorUpdatedAt:W,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>v.dataUpdateCount||l.errorUpdateCount>v.errorUpdateCount,isFetching:at,isRefetching:at&&!nt,isLoadingError:ht&&!St,isPaused:l.fetchStatus==="paused",isPlaceholderData:K,isRefetchError:ht&&St,isStale:gt(t,e),refetch:this.refetch,promise:i(this,x),isEnabled:I(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const O=Z=>{M.status==="error"?Z.reject(M.error):M.data!==void 0&&Z.resolve(M.data)},Y=()=>{const Z=c(this,x,M.promise=wt());O(Z)},B=i(this,x);switch(B.status){case"pending":t.queryHash===r.queryHash&&O(B);break;case"fulfilled":(M.status==="error"||M.data!==B.value)&&Y();break;case"rejected":(M.status!=="error"||M.error!==B.reason)&&Y();break}}return M}updateResult(){const t=i(this,m),e=this.createResult(i(this,n),this.options);if(c(this,P,i(this,n).state),c(this,N,this.options),i(this,P).data!==void 0&&c(this,H,i(this,n)),st(e,t))return;c(this,m,e);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,h=typeof a=="function"?a():a;if(h==="all"||!h&&!i(this,j).size)return!0;const o=new Set(h!=null?h:i(this,j));return this.options.throwOnError&&o.add("error"),Object.keys(i(this,m)).some(C=>{const p=C;return i(this,m)[p]!==t[p]&&o.has(p)})};d(this,u,At).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,u,ft).call(this)}},y=new WeakMap,n=new WeakMap,G=new WeakMap,m=new WeakMap,P=new WeakMap,N=new WeakMap,x=new WeakMap,_=new WeakMap,J=new WeakMap,A=new WeakMap,H=new WeakMap,L=new WeakMap,k=new WeakMap,U=new WeakMap,j=new WeakMap,u=new WeakSet,q=function(t){d(this,u,mt).call(this);let e=i(this,n).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(it)),e},ct=function(){d(this,u,pt).call(this);const t=V(this.options.staleTime,i(this,n));if(ut||i(this,m).isStale||!Tt(t))return;const r=qt(i(this,m).dataUpdatedAt,t)+1;c(this,L,setTimeout(()=>{i(this,m).isStale||this.updateResult()},r))},lt=function(){var t;return(t=typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,n)):this.options.refetchInterval)!=null?t:!1},dt=function(t){d(this,u,bt).call(this),c(this,U,t),!(ut||I(this.options.enabled,i(this,n))===!1||!Tt(i(this,U))||i(this,U)===0)&&c(this,k,setInterval(()=>{(this.options.refetchIntervalInBackground||Vt.isFocused())&&d(this,u,q).call(this)},i(this,U)))},ft=function(){d(this,u,ct).call(this),d(this,u,dt).call(this,d(this,u,lt).call(this))},pt=function(){i(this,L)&&(clearTimeout(i(this,L)),c(this,L,void 0))},bt=function(){i(this,k)&&(clearInterval(i(this,k)),c(this,k,void 0))},mt=function(){const t=i(this,y).getQueryCache().build(i(this,y),this.options);if(t===i(this,n))return;const e=i(this,n);c(this,n,t),c(this,G,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},At=function(t){rt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(i(this,m))}),i(this,y).getQueryCache().notify({query:i(this,n),type:"observerResultsUpdated"})})},Pt);function Yt(s,t){return I(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function Ut(s,t){return Yt(s,t)||s.state.data!==void 0&&vt(s,t,t.refetchOnMount)}function vt(s,t,e){if(I(t.enabled,s)!==!1&&V(t.staleTime,s)!=="static"){const r=typeof e=="function"?e(s):e;return r==="always"||r!==!1&&gt(s,t)}return!1}function Ft(s,t,e,r){return(s!==t||I(r.enabled,s)===!1)&&(!e.suspense||s.state.status!=="error")&&gt(s,e)}function gt(s,t){return I(t.enabled,s)!==!1&&s.isStaleByTime(V(t.staleTime,s))}function Zt(s,t){return!st(s.getCurrentResult(),t)}var F,D,g,w,T,et,yt,Lt,$t=(Lt=class extends kt{constructor(t,e){super();f(this,T);f(this,F);f(this,D);f(this,g);f(this,w);c(this,F,t),this.setOptions(e),this.bindMethods(),d(this,T,et).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=i(this,F).defaultMutationOptions(t),st(this.options,e)||i(this,F).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,g),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&_t(e.mutationKey)!==_t(this.options.mutationKey)?this.reset():((r=i(this,g))==null?void 0:r.state.status)==="pending"&&i(this,g).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=i(this,g))==null||t.removeObserver(this)}onMutationUpdate(t){d(this,T,et).call(this),d(this,T,yt).call(this,t)}getCurrentResult(){return i(this,D)}reset(){var t;(t=i(this,g))==null||t.removeObserver(this),c(this,g,void 0),d(this,T,et).call(this),d(this,T,yt).call(this)}mutate(t,e){var r;return c(this,w,e),(r=i(this,g))==null||r.removeObserver(this),c(this,g,i(this,F).getMutationCache().build(i(this,F),this.options)),i(this,g).addObserver(this),i(this,g).execute(t)}},F=new WeakMap,D=new WeakMap,g=new WeakMap,w=new WeakMap,T=new WeakSet,et=function(){var e,r;const t=(r=(e=i(this,g))==null?void 0:e.state)!=null?r:Jt();c(this,D,tt(Q({},t),{isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}))},yt=function(t){rt.batch(()=>{var e,r,a,h,o,C,p,v;if(i(this,w)&&this.hasListeners()){const E=i(this,D).variables,l=i(this,D).context;(t==null?void 0:t.type)==="success"?((r=(e=i(this,w)).onSuccess)==null||r.call(e,t.data,E,l),(h=(a=i(this,w)).onSettled)==null||h.call(a,t.data,null,E,l)):(t==null?void 0:t.type)==="error"&&((C=(o=i(this,w)).onError)==null||C.call(o,t.error,E,l),(v=(p=i(this,w)).onSettled)==null||v.call(p,void 0,t.error,E,l))}this.listeners.forEach(E=>{E(i(this,D))})})},Lt),Ht=R.createContext(!1),te=()=>R.useContext(Ht);Ht.Provider;function ee(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var se=R.createContext(ee()),ie=()=>R.useContext(se),re=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},ae=s=>{R.useEffect(()=>{s.clearReset()},[s])},ne=({result:s,errorResetBoundary:t,throwOnError:e,query:r,suspense:a})=>s.isError&&!t.isReset()&&!s.isFetching&&r&&(a&&s.data===void 0||Bt(e,[s.error,r])),he=s=>{if(s.suspense){const e=a=>a==="static"?a:Math.max(a!=null?a:1e3,1e3),r=s.staleTime;s.staleTime=typeof r=="function"?(...a)=>e(r(...a)):e(r),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},oe=(s,t)=>s.isLoading&&s.isFetching&&!t,ue=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,Dt=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function ce(s,t,e){var l,K,b,z,W;const r=te(),a=ie(),h=Nt(),o=h.defaultQueryOptions(s);(K=(l=h.getDefaultOptions().queries)==null?void 0:l._experimental_beforeQuery)==null||K.call(l,o),o._optimisticResults=r?"isRestoring":"optimistic",he(o),re(o,a),ae(a);const C=!h.getQueryCache().get(o.queryHash),[p]=R.useState(()=>new t(h,o)),v=p.getOptimisticResult(o),E=!r&&s.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(S=>{const X=E?p.subscribe(rt.batchCalls(S)):it;return p.updateResult(),X},[p,E]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),R.useEffect(()=>{p.setOptions(o)},[o,p]),ue(o,v))throw Dt(o,p,a);if(ne({result:v,errorResetBoundary:a,throwOnError:o.throwOnError,query:h.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw v.error;if((z=(b=h.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||z.call(b,o,v),o.experimental_prefetchInRender&&!ut&&oe(v,r)){const S=C?Dt(o,p,a):(W=h.getQueryCache().get(o.queryHash))==null?void 0:W.promise;S==null||S.catch(it).finally(()=>{p.updateResult()})}return o.notifyOnChangeProps?v:p.trackResult(v)}function be(s,t){return ce(s,Xt)}function me(s,t){const e=Nt(),[r]=R.useState(()=>new $t(e,s));R.useEffect(()=>{r.setOptions(s)},[r,s]);const a=R.useSyncExternalStore(R.useCallback(o=>r.subscribe(rt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),h=R.useCallback((o,C)=>{r.mutate(o,C).catch(it)},[r]);if(a.error&&Bt(r.options.throwOnError,[a.error]))throw a.error;return tt(Q({},a),{mutate:h,mutateAsync:a.mutate})}export{pe as B,me as a,be as u};
