var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,c=(e,s)=>{for(var a in s||(s={}))i.call(s,a)&&l(e,a,s[a]);if(t)for(var a of t(s))r.call(s,a)&&l(e,a,s[a]);return e},n=(e,t)=>s(e,a(t)),d=(e,s,a)=>l(e,"symbol"!=typeof s?s+"":s,a),h=(e,s,a)=>new Promise((t,i)=>{var r=e=>{try{c(a.next(e))}catch(s){i(s)}},l=e=>{try{c(a.throw(e))}catch(s){i(s)}},c=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,l);c((a=a.apply(e,s)).next())});import{c as o,r as m,j as x,C as p,v as u,w as j,B as y,y as f,W as w,X as g,s as v,u as N,_ as b}from"./main-6fHUpRzT.js";import{u as _,a as S}from"./useMutation-DtLmB3rI.js";import{T as C,a as k,b as W,c as L}from"./tabs-BNobDGc4.js";import{S as F}from"./separator-55ip2E4B.js";import{A as P,a as T}from"./alert-BCcU8rrr.js";import{D as q,e as U,a as E,b as O,c as M}from"./dialog-DM8TTFu4.js";import{u as D,a as z,o as I,b as V,_ as $,s as A}from"./schemas-DqzGSLce.js";import{I as K}from"./input-C0XSs2D-.js";import{T as B}from"./textarea-DdxXr3wS.js";import{S as R,a as Y,b as G,c as H,d as Q}from"./select-CsS9Kpur.js";import{L as X}from"./label-B5VpaZlr.js";import{B as Z}from"./badge-Bj-CyBpD.js";import{S as J}from"./switch-Q7TOPnz_.js";import{H as ee,R as se}from"./ResponsiveLayout-Bc2JEU4o.js";import{B as ae}from"./book-open-BleqYpSu.js";import{S as te}from"./save-BJKp3Xcg.js";import{S as ie}from"./shield-CcNVjYJS.js";import{L as re}from"./lock-ByGl_0i4.js";import{U as le}from"./users-Czby48qY.js";import{G as ce}from"./globe-BcuJ5ITU.js";import{E as ne}from"./eye-B6Cx85SJ.js";import{A as de,a as he,b as oe,P as me,i as xe}from"./sheet-D2smYKYW.js";import{A as pe,a as ue,b as je,c as ye,d as fe,e as we,f as ge,g as ve,h as Ne}from"./alert-dialog-BidrEG0_.js";import{C as be}from"./checkbox-nU9JBj1_.js";import{S as _e}from"./share-2-D3j1vOAy.js";import{S as Se}from"./search-CeL_nYcN.js";import{U as Ce}from"./user-DoINJrqZ.js";import{C as ke}from"./check-BVB7WkBF.js";import{P as We}from"./pen-square-CXs4EIjz.js";import{T as Le}from"./index-GQUAIkZv.js";import{C as Fe}from"./index-YNlOS8aM.js";import{f as Pe}from"./index-BWgURBCN.js";import"./index-BlbmBgSN.js";import"./index-jVOyRz7F.js";import"./Combination-Bb2n9b59.js";import"./index-WEre3Vep.js";import"./chevron-up-k-AfHmE-.js";import"./NotificationBell-C-odGad4.js";import"./scroll-area-DRpKKhsW.js";import"./useNotifications-DlOFbLc9.js";import"./bell-DFXHEubE.js";import"./NotificationButton-CnmvsVP-.js";import"./map-pin-DJOBTPKn.js";import"./zap-Dyj-3m1T.js";import"./message-square-BNIlY-fX.js";import"./wifi-D7M5OVnX.js";import"./log-out-B3lkkfQi.js";import"./index-DAhRH4lY.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=o("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),qe=I({title:A().min(1,"Title is required").max(100,"Title must be less than 100 characters"),content:A().min(10,"Content must be at least 10 characters").max(2e3,"Content must be less than 2000 characters"),visibility:$(["private","public","family"]),is_encrypted:V().default(!0)}),Ue=({wish:e,onSave:s,onCancel:a,mode:t="create"})=>{var i,r,l;const[d,o]=m.useState(null==(i=null==e?void 0:e.is_encrypted)||i),[g,v]=m.useState(!1),N=D({resolver:z(qe),defaultValues:{title:(null==e?void 0:e.title)||"",content:(null==e?void 0:e.content)||"",visibility:(null==e?void 0:e.visibility)||"private",is_encrypted:null==(r=null==e?void 0:e.is_encrypted)||r}}),b=a=>h(void 0,null,function*(){try{a.title,a.content,a.visibility,a.is_encrypted;yield new Promise(e=>setTimeout(e,1e3));const i={id:(null==e?void 0:e.id)||"new-id",user_id:"current-user",title:a.title,content:a.content,visibility:a.visibility,is_encrypted:a.is_encrypted,created_at:(null==e?void 0:e.created_at)||(new Date).toISOString(),updated_at:(new Date).toISOString()};null==s||s(i),w.success("create"===t?"Life wish created successfully":"Life wish updated successfully")}catch(i){w.error("Failed to save life wish")}}),_=e=>{switch(e){case"private":default:return x.jsx(re,{className:"w-4 h-4"});case"public":return x.jsx(ce,{className:"w-4 h-4"});case"family":return x.jsx(le,{className:"w-4 h-4"})}},S=e=>{switch(e){case"private":default:return"bg-gray-100 text-gray-700";case"public":return"bg-blue-100 text-blue-700";case"family":return"bg-green-100 text-green-700"}};return g?x.jsxs(p,{className:"border-2 border-primary/20",children:[x.jsx(u,{className:"bg-gradient-to-r from-primary/5 to-secondary/5",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs(j,{className:"flex items-center gap-2 text-primary",children:[x.jsx(ee,{className:"w-5 h-5"}),"Preview"]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs(y,{variant:"outline",size:"sm",onClick:()=>v(!1),children:[x.jsx(ae,{className:"w-4 h-4 mr-2"}),"Edit"]}),x.jsxs(y,{size:"sm",onClick:N.handleSubmit(b),children:[x.jsx(te,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})}),x.jsx(f,{className:"p-6",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:N.watch("title")||"Your Life Wish"}),x.jsxs("div",{className:"flex items-center justify-center gap-2",children:[_(N.watch("visibility")),x.jsx(Z,{className:S(N.watch("visibility")),children:N.watch("visibility")}),d&&x.jsxs(Z,{variant:"secondary",className:"bg-yellow-100 text-yellow-700",children:[x.jsx(ie,{className:"w-3 h-3 mr-1"}),"Encrypted"]})]})]}),x.jsx(F,{}),x.jsx("div",{className:"prose max-w-none",children:x.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white p-6 rounded-lg border border-gray-200",children:x.jsx("p",{className:"text-lg leading-relaxed text-gray-700 whitespace-pre-wrap",children:N.watch("content")||"Your life wish content will appear here..."})})}),x.jsx("div",{className:"text-center text-sm text-gray-500 mt-4",children:x.jsx("p",{children:"This is how your life wish will appear to others"})})]})})]}):x.jsxs(p,{className:"border-2 border-primary/20",children:[x.jsxs(u,{className:"bg-gradient-to-r from-primary/5 to-secondary/5",children:[x.jsxs(j,{className:"flex items-center gap-2 text-primary",children:[x.jsx(ee,{className:"w-5 h-5"}),"create"===t?"Create Life Wish":"Edit Life Wish"]}),x.jsxs(P,{children:[x.jsx(ee,{className:"h-4 w-4"}),x.jsx(T,{children:"Share what you want to be remembered for. This is a safe space to express your deepest wishes and legacy."})]})]}),x.jsx(f,{className:"p-6",children:x.jsxs("form",{onSubmit:N.handleSubmit(b),className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx(X,{htmlFor:"title",className:"text-base font-medium",children:"What do you want to be remembered for?"}),x.jsx(K,n(c({id:"title"},N.register("title")),{placeholder:"e.g., A person who brought joy to others",className:"mt-2 text-lg"})),N.formState.errors.title&&x.jsx("p",{className:"text-sm text-red-500 mt-1",children:N.formState.errors.title.message})]}),x.jsxs("div",{children:[x.jsx(X,{htmlFor:"content",className:"text-base font-medium",children:"Your Life Wish"}),x.jsx(B,n(c({id:"content"},N.register("content")),{placeholder:"Share your thoughts, dreams, and what you hope your legacy will be. What impact do you want to have on the world? What values do you want to pass on?",className:"mt-2 min-h-[200px] text-base leading-relaxed",rows:8})),N.formState.errors.content&&x.jsx("p",{className:"text-sm text-red-500 mt-1",children:N.formState.errors.content.message}),x.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm text-gray-500",children:[x.jsxs("span",{children:[(null==(l=N.watch("content"))?void 0:l.length)||0," / 2000 characters"]}),x.jsxs("div",{className:"flex items-center gap-2",children:[d&&x.jsx(ie,{className:"w-4 h-4"}),x.jsx("span",{children:d?"Encrypted":"Not encrypted"})]})]})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx(X,{className:"text-base font-medium",children:"Privacy Settings"}),x.jsxs("div",{className:"grid gap-4",children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[_(N.watch("visibility")),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium",children:"Visibility"}),x.jsx("div",{className:"text-sm text-gray-500",children:(e=>{switch(e){case"private":return"Only you can see this wish";case"public":return"Visible to everyone in the community memorial space";case"family":return"Shared with designated family members";default:return""}})(N.watch("visibility"))})]})]}),x.jsxs(R,{value:N.watch("visibility"),onValueChange:e=>N.setValue("visibility",e),children:[x.jsx(Y,{className:"w-40",children:x.jsx(G,{})}),x.jsxs(H,{children:[x.jsx(Q,{value:"private",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(re,{className:"w-4 h-4"}),"Private"]})}),x.jsx(Q,{value:"family",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(le,{className:"w-4 h-4"}),"Family"]})}),x.jsx(Q,{value:"public",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(ce,{className:"w-4 h-4"}),"Public"]})})]})]})]}),x.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(ie,{className:"w-4 h-4"}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium",children:"Encryption"}),x.jsx("div",{className:"text-sm text-gray-500",children:"Keep your wish secure with encryption"})]})]}),x.jsx(J,{checked:d,onCheckedChange:e=>{o(e),N.setValue("is_encrypted",e)}})]})]})]}),x.jsxs(P,{className:"bg-blue-50 border-blue-200",children:[x.jsx(ie,{className:"h-4 w-4 text-blue-600"}),x.jsx(T,{className:"text-blue-800",children:"Your privacy is important to us. Private wishes are encrypted and only visible to you. Family wishes are shared only with designated family members. Public wishes contribute to our community memorial space."})]}),x.jsxs("div",{className:"flex gap-3 pt-4",children:[a&&x.jsx(y,{type:"button",variant:"outline",onClick:a,className:"flex-1",children:"Cancel"}),x.jsxs(y,{type:"button",variant:"outline",onClick:()=>v(!0),className:"flex-1",children:[x.jsx(ne,{className:"w-4 h-4 mr-2"}),"Preview"]}),x.jsxs(y,{type:"submit",className:"flex-1 bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70",children:[x.jsx(ee,{className:"w-4 h-4 mr-2"}),"create"===t?"Create Wish":"Save Changes"]})]})]})})]})},Ee=({wish:e,onShare:s,children:a})=>{const[t,i]=m.useState(!1),[r,l]=m.useState(""),[d,o]=m.useState([]),[p,u]=m.useState([]),[j,f]=m.useState({canView:!0,canEdit:!1,canShare:!1,canDelete:!1}),[N,b]=m.useState(!1),[_,S]=m.useState(!1);m.useEffect(()=>{const e=setTimeout(()=>{(e=>{h(void 0,null,function*(){if(e.trim()){b(!0);try{const{data:s,error:a}=yield v.from("profiles").select("user_id, display_name, username, avatar_url").or(`display_name.ilike.%${e}%,username.ilike.%${e}%`).limit(10);if(a)throw a;const{data:{user:t}}=yield v.auth.getUser(),i=(null==s?void 0:s.filter(e=>e.user_id!==(null==t?void 0:t.id)).map(e=>({id:e.user_id,email:`${e.username||e.display_name}@example.com`,display_name:e.display_name||e.username||"Unknown User",username:e.username,avatar_url:e.avatar_url})))||[];o(i)}catch(s){w.error("Failed to search users")}finally{b(!1)}}else o([])})})(r)},300);return()=>clearTimeout(e)},[r]);return x.jsxs(q,{open:t,onOpenChange:i,children:[x.jsx(U,{asChild:!0,children:a}),x.jsxs(E,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[x.jsx(O,{children:x.jsxs(M,{className:"flex items-center gap-2",children:[x.jsx(_e,{className:"w-5 h-5 text-primary"}),"Share Life Wish"]})}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.title}),x.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.content}),x.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[x.jsx(Z,{variant:"outline",className:"text-xs",children:"public"===e.visibility?"Public":"family"===e.visibility?"Family":"Private"}),e.is_encrypted&&x.jsx(Z,{variant:"secondary",className:"text-xs",children:"Encrypted"})]})]}),x.jsx(F,{}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx(X,{htmlFor:"user-search",children:"Search Users"}),x.jsxs("div",{className:"relative mt-1",children:[x.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),x.jsx(K,{id:"user-search",placeholder:"Search by name or username...",value:r,onChange:e=>l(e.target.value),className:"pl-10"})]})]}),d.length>0&&x.jsx("div",{className:"border rounded-lg max-h-40 overflow-y-auto",children:d.map(e=>x.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0",onClick:()=>(e=>{p.find(s=>s.id===e.id)||u([...p,e]),l(""),o([])})(e),children:[x.jsxs(de,{className:"w-8 h-8",children:[x.jsx(he,{src:e.avatar_url}),x.jsx(oe,{children:x.jsx(Ce,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"font-medium text-sm truncate",children:e.display_name||e.username||"Unknown User"}),x.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),x.jsx(y,{variant:"ghost",size:"sm",children:x.jsx(ke,{className:"w-4 h-4"})})]},e.id))}),p.length>0&&x.jsxs("div",{className:"space-y-3",children:[x.jsxs(X,{children:["Selected Users (",p.length,")"]}),x.jsx("div",{className:"space-y-2",children:p.map(e=>x.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[x.jsxs(de,{className:"w-8 h-8",children:[x.jsx(he,{src:e.avatar_url}),x.jsx(oe,{children:x.jsx(Ce,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"font-medium text-sm truncate",children:e.display_name||e.username||"Unknown User"}),x.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),x.jsx(y,{variant:"ghost",size:"sm",onClick:()=>(e=>{u(p.filter(s=>s.id!==e))})(e.id),children:x.jsx(g,{className:"w-4 h-4"})})]},e.id))})]})]}),x.jsx(F,{}),x.jsxs("div",{className:"space-y-4",children:[x.jsx(X,{children:"Permissions"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(be,{id:"can-view",checked:j.canView,onCheckedChange:e=>f(s=>n(c({},s),{canView:!!e}))}),x.jsxs(X,{htmlFor:"can-view",className:"flex items-center gap-2",children:[x.jsx(ne,{className:"w-4 h-4"}),"Can view"]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(be,{id:"can-edit",checked:j.canEdit,onCheckedChange:e=>f(s=>n(c({},s),{canEdit:!!e}))}),x.jsxs(X,{htmlFor:"can-edit",className:"flex items-center gap-2",children:[x.jsx(We,{className:"w-4 h-4"}),"Can edit"]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(be,{id:"can-share",checked:j.canShare,onCheckedChange:e=>f(s=>n(c({},s),{canShare:!!e}))}),x.jsxs(X,{htmlFor:"can-share",className:"flex items-center gap-2",children:[x.jsx(_e,{className:"w-4 h-4"}),"Can share"]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(be,{id:"can-delete",checked:j.canDelete,onCheckedChange:e=>f(s=>n(c({},s),{canDelete:!!e}))}),x.jsxs(X,{htmlFor:"can-delete",className:"flex items-center gap-2",children:[x.jsx(Le,{className:"w-4 h-4"}),"Can delete"]})]})]})]}),x.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[x.jsx(y,{variant:"outline",onClick:()=>i(!1),disabled:_,children:"Cancel"}),x.jsx(y,{onClick:()=>h(void 0,null,function*(){if(0!==p.length){S(!0);try{const{data:{user:a}}=yield v.auth.getUser();if(!a)throw new Error("Not authenticated");for(const s of p){const{error:t}=yield v.from("life_wish_shares").insert({wish_id:e.id,shared_by:a.id,shared_with:s.id,share_type:"user",permissions:j});if(t)throw t}w.success(`Life wish shared with ${p.length} user(s)`),i(!1),u([]),null==s||s(e)}catch(a){w.error("Failed to share life wish")}finally{S(!1)}}else w.error("Please select at least one user to share with")}),disabled:0===p.length||_,children:_?"Sharing...":`Share with ${p.length} user(s)`})]})]})]})]})},Oe=({wish:e,showUserInfo:s=!1,onEdit:a,onDelete:t,onShare:i,isOwner:r=!1,className:l=""})=>{const[c,n]=m.useState(!1),[d,o]=m.useState(!1),{user:j}=N(),w=(null==j?void 0:j.id)===e.user_id,g=e=>{switch(e){case"private":default:return x.jsx(re,{className:"w-4 h-4"});case"public":return x.jsx(ce,{className:"w-4 h-4"});case"family":return x.jsx(le,{className:"w-4 h-4"})}},v=e=>{switch(e){case"private":default:return"bg-gray-100 text-gray-700 border-gray-200";case"public":return"bg-blue-100 text-blue-700 border-blue-200";case"family":return"bg-green-100 text-green-700 border-green-200"}},b=e=>{switch(e){case"private":default:return"Private";case"public":return"Public";case"family":return"Family"}},_=e=>Pe(new Date(e),{addSuffix:!0}),S=e.content.length>200?e.content.substring(0,200)+"...":e.content;return x.jsxs(p,{className:`group hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/20 ${l}`,children:[x.jsx(u,{className:"pb-3",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[s&&x.jsxs(de,{className:"w-10 h-10",children:[x.jsx(he,{src:"/placeholder-avatar.jpg"}),x.jsx(oe,{children:x.jsx(Ce,{className:"w-5 h-5"})})]}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-800 group-hover:text-primary transition-colors",children:e.title}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsxs(Z,{variant:"outline",className:`${v(e.visibility)} text-xs`,children:[g(e.visibility),x.jsx("span",{className:"ml-1",children:b(e.visibility)})]}),e.is_encrypted&&x.jsxs(Z,{variant:"secondary",className:"bg-yellow-100 text-yellow-700 border-yellow-200 text-xs",children:[x.jsx(ie,{className:"w-3 h-3 mr-1"}),"Encrypted"]}),x.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[x.jsx(Fe,{className:"w-3 h-3"}),_(e.created_at)]})]})]})]}),(r||w)&&x.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[x.jsxs(q,{children:[x.jsx(U,{asChild:!0,children:x.jsx(y,{variant:"ghost",size:"sm",children:x.jsx(ne,{className:"w-4 h-4"})})}),x.jsxs(E,{className:"max-w-2xl",children:[x.jsx(O,{children:x.jsxs(M,{className:"flex items-center gap-2",children:[x.jsx(ee,{className:"w-5 h-5 text-primary"}),e.title]})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[g(e.visibility),x.jsx(Z,{className:v(e.visibility),children:b(e.visibility)}),e.is_encrypted&&x.jsxs(Z,{variant:"secondary",className:"bg-yellow-100 text-yellow-700",children:[x.jsx(ie,{className:"w-3 h-3 mr-1"}),"Encrypted"]})]}),x.jsx(F,{}),x.jsx("div",{className:"prose max-w-none",children:x.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white p-6 rounded-lg border border-gray-200",children:x.jsx("p",{className:"text-lg leading-relaxed text-gray-700 whitespace-pre-wrap",children:e.content})})}),x.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Created ",_(e.created_at)]})]})]})]}),a&&x.jsx(y,{variant:"ghost",size:"sm",onClick:()=>a(e),children:x.jsx(We,{className:"w-4 h-4"})}),x.jsx(Ee,{wish:e,onShare:()=>null==i?void 0:i(e),children:x.jsx(y,{variant:"ghost",size:"sm",children:x.jsx(_e,{className:"w-4 h-4"})})}),t&&x.jsxs(pe,{children:[x.jsx(ue,{asChild:!0,children:x.jsx(y,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:x.jsx(Le,{className:"w-4 h-4"})})}),x.jsxs(je,{children:[x.jsxs(ye,{children:[x.jsx(fe,{children:"Delete Life Wish"}),x.jsxs(we,{children:['Are you sure you want to delete "',e.title,'"? This action cannot be undone and will permanently remove this life wish.']})]}),x.jsxs(ge,{children:[x.jsx(ve,{children:"Cancel"}),x.jsx(Ne,{onClick:()=>h(void 0,null,function*(){o(!0);try{yield null==t?void 0:t(e.id)}finally{o(!1)}}),disabled:d,className:"bg-red-600 hover:bg-red-700",children:d?"Deleting...":"Delete"})]})]})]})]})]})}),x.jsx(f,{className:"pt-0",children:x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"prose max-w-none",children:[x.jsx("p",{className:"text-gray-700 leading-relaxed",children:c?e.content:S}),e.content.length>200&&x.jsx(y,{variant:"link",className:"p-0 h-auto text-primary hover:text-primary/80",onClick:()=>n(!c),children:c?"Show less":"Read more"})]}),x.jsx("div",{className:"flex items-center justify-center pt-2",children:x.jsxs("div",{className:"flex items-center gap-1 text-primary/60",children:[x.jsx(ee,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"A life wish shared with love"})]})})]})})]})},Me=e=>x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5 rounded-lg -z-10"}),x.jsx(Oe,n(c({},e),{className:"bg-white/80 backdrop-blur-sm border-primary/30"}))]}),De=({wish:e,sharedBy:s,sharedAt:a,permissions:t,onShare:i,className:r=""})=>{const[l,c]=m.useState(!1),n=e=>{switch(e){case"private":default:return x.jsx(re,{className:"w-4 h-4"});case"public":return x.jsx(ce,{className:"w-4 h-4"});case"family":return x.jsx(le,{className:"w-4 h-4"})}},d=e=>{switch(e){case"private":default:return"bg-gray-100 text-gray-700 border-gray-200";case"public":return"bg-blue-100 text-blue-700 border-blue-200";case"family":return"bg-green-100 text-green-700 border-green-200"}},h=e=>{switch(e){case"private":default:return"Private";case"public":return"Public";case"family":return"Family"}},o=e=>Pe(new Date(e),{addSuffix:!0}),j=e.content.length>200?e.content.substring(0,200)+"...":e.content;return x.jsxs(p,{className:`group hover:shadow-lg transition-all duration-300 border-2 border-green-200 hover:border-green-300 ${r}`,children:[x.jsx(u,{className:"pb-3",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs(de,{className:"w-10 h-10",children:[x.jsx(he,{src:null==s?void 0:s.avatar_url}),x.jsx(oe,{children:x.jsx(Ce,{className:"w-5 h-5"})})]}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-800 group-hover:text-primary transition-colors",children:e.title}),x.jsxs(Z,{variant:"outline",className:"bg-green-100 text-green-700 border-green-200 text-xs",children:[x.jsx(Te,{className:"w-3 h-3 mr-1"}),"Shared"]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs(Z,{variant:"outline",className:`${d(e.visibility)} text-xs`,children:[n(e.visibility),x.jsx("span",{className:"ml-1",children:h(e.visibility)})]}),e.is_encrypted&&x.jsxs(Z,{variant:"secondary",className:"bg-yellow-100 text-yellow-700 border-yellow-200 text-xs",children:[x.jsx(ie,{className:"w-3 h-3 mr-1"}),"Encrypted"]}),x.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[x.jsx(Fe,{className:"w-3 h-3"}),o(e.created_at)]})]}),s&&x.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Shared by ",x.jsx("span",{className:"font-medium",children:s.display_name||s.username||"Unknown User"}),a&&` ${o(a)}`]})]})]}),x.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[x.jsxs(q,{children:[x.jsx(U,{asChild:!0,children:x.jsx(y,{variant:"ghost",size:"sm",children:x.jsx(ne,{className:"w-4 h-4"})})}),x.jsxs(E,{className:"max-w-2xl",children:[x.jsx(O,{children:x.jsxs(M,{className:"flex items-center gap-2",children:[x.jsx(ee,{className:"w-5 h-5 text-primary"}),e.title]})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[n(e.visibility),x.jsx(Z,{className:d(e.visibility),children:h(e.visibility)}),e.is_encrypted&&x.jsxs(Z,{variant:"secondary",className:"bg-yellow-100 text-yellow-700",children:[x.jsx(ie,{className:"w-3 h-3 mr-1"}),"Encrypted"]}),x.jsxs(Z,{variant:"outline",className:"bg-green-100 text-green-700",children:[x.jsx(Te,{className:"w-3 h-3 mr-1"}),"Shared"]})]}),s&&x.jsxs("div",{className:"text-sm text-gray-600",children:["Shared by ",x.jsx("span",{className:"font-medium",children:s.display_name||s.username||"Unknown User"}),a&&` ${o(a)}`]}),x.jsx(F,{}),x.jsx("div",{className:"prose max-w-none",children:x.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white p-6 rounded-lg border border-gray-200",children:x.jsx("p",{className:"text-lg leading-relaxed text-gray-700 whitespace-pre-wrap",children:e.content})})}),x.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Created ",o(e.created_at)]})]})]})]}),(null==t?void 0:t.canShare)&&x.jsx(Ee,{wish:e,onShare:()=>null==i?void 0:i(e),children:x.jsx(y,{variant:"ghost",size:"sm",children:x.jsx(_e,{className:"w-4 h-4"})})})]})]})}),x.jsx(f,{className:"pt-0",children:x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"prose max-w-none",children:[x.jsx("p",{className:"text-gray-700 leading-relaxed",children:l?e.content:j}),e.content.length>200&&x.jsx(y,{variant:"link",className:"p-0 h-auto text-primary hover:text-primary/80",onClick:()=>c(!l),children:l?"Show less":"Read more"})]}),x.jsx("div",{className:"flex items-center justify-center pt-2",children:x.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[x.jsx(ee,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"A life wish shared with love"})]})})]})})]})},ze=class e{constructor(){d(this,"encryptionKey","your-encryption-key")}static getInstance(){return e.instance||(e.instance=new e),e.instance}encryptText(e){return btoa(e)}decryptText(e){return atob(e)}createLifeWish(e){return h(this,null,function*(){var s;try{const{title:a,content:t,visibility:i,is_encrypted:r=!0}=e,l={title:a,visibility:i,is_encrypted:r};r?(l.encrypted_content=this.encryptText(t),l.content=""):l.content=t;const{data:d,error:h}=yield v.from("life_wishes").insert(n(c({},l),{user_id:null==(s=(yield v.auth.getUser()).data.user)?void 0:s.id})).select().single();if(h)throw h;return d.is_encrypted&&d.encrypted_content&&(d.content=this.decryptText(d.encrypted_content)),w.success("Life wish created successfully"),d}catch(a){throw w.error("Failed to create life wish"),a}})}getMyLifeWishes(){return h(this,null,function*(){try{const{data:e,error:s}=yield v.from("life_wishes").select("*").order("updated_at",{ascending:!1});if(s)throw s;return(e||[]).map(e=>(e.is_encrypted&&e.encrypted_content&&(e.content=this.decryptText(e.encrypted_content)),e))}catch(e){throw w.error("Failed to fetch life wishes"),e}})}getPublicLifeWishes(){return h(this,null,function*(){try{const{data:e,error:s}=yield v.from("life_wishes").select("*, user_profiles!inner(name, avatar_url)").eq("visibility","public").order("created_at",{ascending:!1});if(s)throw s;return(e||[]).map(e=>(e.is_encrypted&&e.encrypted_content&&(e.content=this.decryptText(e.encrypted_content)),e))}catch(e){throw w.error("Failed to fetch public life wishes"),e}})}getSharedLifeWishes(){return h(this,null,function*(){var e;try{const{data:s,error:a}=yield v.from("life_wishes").select("\n          *,\n          life_wish_shares!inner(shared_with)\n        ").eq("life_wish_shares.shared_with",null==(e=(yield v.auth.getUser()).data.user)?void 0:e.id).order("created_at",{ascending:!1});if(a)throw a;return(s||[]).map(e=>(e.is_encrypted&&e.encrypted_content&&(e.content=this.decryptText(e.encrypted_content)),e))}catch(s){throw w.error("Failed to fetch shared life wishes"),s}})}getLifeWish(e){return h(this,null,function*(){try{const{data:s,error:a}=yield v.from("life_wishes").select("*").eq("id",e).single();if(a)throw a;return s?(s.is_encrypted&&s.encrypted_content&&(s.content=this.decryptText(s.encrypted_content)),s):null}catch(s){throw w.error("Failed to fetch life wish"),s}})}updateLifeWish(e,s){return h(this,null,function*(){try{const a={};s.title&&(a.title=s.title),s.visibility&&(a.visibility=s.visibility),void 0!==s.is_encrypted&&(a.is_encrypted=s.is_encrypted),s.content&&(!1!==s.is_encrypted?(a.encrypted_content=this.encryptText(s.content),a.content=""):(a.content=s.content,a.encrypted_content=null));const{data:t,error:i}=yield v.from("life_wishes").update(a).eq("id",e).select().single();if(i)throw i;return t.is_encrypted&&t.encrypted_content&&(t.content=this.decryptText(t.encrypted_content)),w.success("Life wish updated successfully"),t}catch(a){throw w.error("Failed to update life wish"),a}})}deleteLifeWish(e){return h(this,null,function*(){try{const{error:s}=yield v.from("life_wishes").delete().eq("id",e);if(s)throw s;w.success("Life wish deleted successfully")}catch(s){throw w.error("Failed to delete life wish"),s}})}shareLifeWish(e,s){return h(this,null,function*(){var a;try{const{data:t,error:i}=yield v.from("life_wish_shares").insert({wish_id:e,shared_by:null==(a=(yield v.auth.getUser()).data.user)?void 0:a.id,shared_with:"user"===s.shareType?s.sharedWith:null,shared_email:"email"===s.shareType?s.sharedEmail:null,share_type:s.shareType,permissions:s.permissions||{},expires_at:s.expiresAt}).select().single();if(i)throw i;return w.success("Life wish shared successfully"),t}catch(t){throw w.error("Failed to share life wish"),t}})}getLifeWishShares(e){return h(this,null,function*(){try{const{data:s,error:a}=yield v.from("life_wish_shares").select("*").eq("wish_id",e).order("created_at",{ascending:!1});if(a)throw a;return s||[]}catch(s){throw w.error("Failed to fetch life wish shares"),s}})}removeShare(e){return h(this,null,function*(){try{const{error:s}=yield v.from("life_wish_shares").delete().eq("id",e);if(s)throw s;w.success("Share removed successfully")}catch(s){throw w.error("Failed to remove share"),s}})}getMySharedWishes(){return h(this,null,function*(){var e;try{const{data:s,error:a}=yield v.from("life_wish_shares").select("\n          *,\n          life_wishes!inner(title, visibility)\n        ").eq("shared_by",null==(e=(yield v.auth.getUser()).data.user)?void 0:e.id).order("created_at",{ascending:!1});if(a)throw a;return s||[]}catch(s){throw w.error("Failed to fetch shared wishes"),s}})}hasPermissionToView(e){return h(this,null,function*(){var s;try{const a=null==(s=(yield v.auth.getUser()).data.user)?void 0:s.id;if(!a)return!1;const{data:t}=yield v.from("life_wishes").select("id").eq("id",e).eq("user_id",a).single();if(t)return!0;const{data:i}=yield v.from("life_wishes").select("id").eq("id",e).eq("visibility","public").single();if(i)return!0;const{data:r}=yield v.from("life_wish_shares").select("id").eq("wish_id",e).eq("shared_with",a).single();return!!r}catch(a){return!1}})}getLifeWishStats(){return h(this,null,function*(){try{const e=yield this.getMyLifeWishes(),s=yield this.getMySharedWishes();return{total:e.length,private:e.filter(e=>"private"===e.visibility).length,public:e.filter(e=>"public"===e.visibility).length,family:e.filter(e=>"family"===e.visibility).length,shared:s.length}}catch(e){return{total:0,private:0,public:0,family:0,shared:0}}})}};d(ze,"instance");const Ie=ze.getInstance(),Ve=()=>{const[e,s]=m.useState("my-wishes"),[a,t]=m.useState(!1),[i,r]=m.useState(null);b();const{data:l=[],refetch:c}=_({queryKey:["my-life-wishes"],queryFn:()=>Ie.getMyLifeWishes()}),{data:n=[],refetch:d}=_({queryKey:["public-life-wishes"],queryFn:()=>Ie.getPublicLifeWishes()}),{data:h=[],refetch:o}=_({queryKey:["shared-life-wishes"],queryFn:()=>Ie.getSharedLifeWishes()}),{data:g}=_({queryKey:["life-wish-stats"],queryFn:()=>Ie.getLifeWishStats()}),v=S({mutationFn:e=>Ie.createLifeWish(e),onSuccess:()=>{c(),t(!1),w.success("Life wish created successfully")},onError:e=>{w.error("Failed to create life wish")}}),N=S({mutationFn:({wishId:e,updates:s})=>Ie.updateLifeWish(e,s),onSuccess:()=>{c(),r(null),w.success("Life wish updated successfully")},onError:e=>{w.error("Failed to update life wish")}}),D=S({mutationFn:e=>Ie.deleteLifeWish(e),onSuccess:()=>{c(),w.success("Life wish deleted successfully")},onError:e=>{w.error("Failed to delete life wish")}}),z=e=>{o(),w.success("Life wish shared successfully")};return x.jsx(se,{children:x.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center",children:x.jsx(ee,{className:"w-6 h-6 text-pink-600"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Life Wishes"}),x.jsx("p",{className:"text-gray-600",children:"Preserve and share your life's most important wishes"})]})]}),x.jsxs(q,{open:a,onOpenChange:t,children:[x.jsx(U,{asChild:!0,children:x.jsxs(y,{className:"bg-pink-600 hover:bg-pink-700",children:[x.jsx(me,{className:"w-4 h-4 mr-2"}),"Create Life Wish"]})}),x.jsxs(E,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[x.jsx(O,{children:x.jsxs(M,{className:"flex items-center gap-2",children:[x.jsx(ee,{className:"w-5 h-5 text-pink-600"}),"Create New Life Wish"]})}),x.jsx(Ue,{mode:"create",onSave:e=>{v.mutate(e)},onCancel:()=>t(!1)})]})]})]}),x.jsxs(P,{className:"bg-pink-50 border-pink-200",children:[x.jsx(ee,{className:"h-4 w-4 text-pink-600"}),x.jsxs(T,{className:"text-pink-800",children:[x.jsx("strong",{children:"Life Wishes:"})," Create, preserve, and share your most important life wishes with loved ones. These can include personal messages, legacy wishes, or important decisions you want to communicate."]})]})]}),g&&x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[x.jsx(p,{children:x.jsx(f,{className:"p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-600",children:"My Wishes"}),x.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(null==g?void 0:g.total)||0})]}),x.jsx(ee,{className:"w-8 h-8 text-pink-600"})]})})}),x.jsx(p,{children:x.jsx(f,{className:"p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-600",children:"Public Wishes"}),x.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(null==g?void 0:g.public)||0})]}),x.jsx(ce,{className:"w-8 h-8 text-blue-600"})]})})}),x.jsx(p,{children:x.jsx(f,{className:"p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-600",children:"Shared With Me"}),x.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(null==g?void 0:g.shared)||0})]}),x.jsx(le,{className:"w-8 h-8 text-green-600"})]})})}),x.jsx(p,{children:x.jsx(f,{className:"p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-600",children:"Total Views"}),x.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(null==g?void 0:g.total)||0})]}),x.jsx(ne,{className:"w-8 h-8 text-purple-600"})]})})})]}),x.jsxs(C,{value:e,onValueChange:s,className:"space-y-6",children:[x.jsxs(k,{className:"grid w-full grid-cols-3",children:[x.jsxs(W,{value:"my-wishes",className:"flex items-center gap-2",children:[x.jsx(ee,{className:"w-4 h-4"}),"My Wishes"]}),x.jsxs(W,{value:"public",className:"flex items-center gap-2",children:[x.jsx(ce,{className:"w-4 h-4"}),"Public Wishes"]}),x.jsxs(W,{value:"shared",className:"flex items-center gap-2",children:[x.jsx(le,{className:"w-4 h-4"}),"Shared With Me"]})]}),x.jsx(L,{value:"my-wishes",className:"space-y-6",children:x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[x.jsx("div",{className:"lg:col-span-1",children:x.jsxs(p,{children:[x.jsx(u,{children:x.jsxs(j,{className:"flex items-center gap-2",children:[x.jsx(ee,{className:"w-5 h-5"}),"My Wishes"]})}),x.jsxs(f,{className:"space-y-4",children:[x.jsx("div",{className:"text-sm text-gray-600",children:x.jsx("p",{children:"Your personal life wishes that you can keep private or share with others."})}),x.jsx(F,{}),x.jsxs("div",{className:"text-xs text-gray-500 space-y-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(re,{className:"w-3 h-3"}),x.jsx("span",{children:"Private by default"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(_e,{className:"w-3 h-3"}),x.jsx("span",{children:"Share with specific people"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(ce,{className:"w-3 h-3"}),x.jsx("span",{children:"Make public if desired"})]})]})]})]})}),x.jsx("div",{className:"lg:col-span-3",children:0===l.length?x.jsx(p,{children:x.jsxs(f,{className:"text-center py-12",children:[x.jsx(ee,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),x.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No life wishes yet"}),x.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first life wish to get started. These can be personal messages, legacy wishes, or important decisions you want to preserve."}),x.jsxs(y,{onClick:()=>t(!0),className:"bg-pink-600 hover:bg-pink-700",children:[x.jsx(me,{className:"w-4 h-4 mr-2"}),"Create Life Wish"]})]})}):x.jsx("div",{className:"space-y-6",children:l.map(e=>x.jsx(Oe,{wish:e,showUserInfo:!1,onEdit:()=>r(e),onDelete:()=>(e=>{D.mutate(e)})(e.id),onShare:z,isOwner:!0},e.id))})})]})}),x.jsx(L,{value:"public",className:"space-y-6",children:x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[x.jsx("div",{className:"lg:col-span-1",children:x.jsxs(p,{children:[x.jsx(u,{children:x.jsxs(j,{className:"flex items-center gap-2",children:[x.jsx(ce,{className:"w-5 h-5"}),"Public Wishes"]})}),x.jsxs(f,{className:"space-y-4",children:[x.jsx("div",{className:"text-sm text-gray-600",children:x.jsx("p",{children:"Life wishes that others have chosen to share publicly with the community."})}),x.jsx(F,{}),x.jsxs("div",{className:"text-xs text-gray-500 space-y-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(ce,{className:"w-3 h-3"}),x.jsx("span",{children:"Publicly shared"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(xe,{className:"w-3 h-3"}),x.jsx("span",{children:"Community inspiration"})]})]})]})]})}),x.jsx("div",{className:"lg:col-span-3",children:0===n.length?x.jsx(p,{children:x.jsxs(f,{className:"text-center py-12",children:[x.jsx(ce,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),x.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No public wishes yet"}),x.jsx("p",{className:"text-gray-500 mb-6",children:"When others share their life wishes publicly, they'll appear here for community inspiration."})]})}):x.jsx("div",{className:"space-y-6",children:n.map(e=>x.jsx(Me,{wish:e,showUserInfo:!0},e.id))})})]})}),x.jsx(L,{value:"shared",className:"space-y-6",children:x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[x.jsx("div",{className:"lg:col-span-1",children:x.jsxs(p,{children:[x.jsx(u,{children:x.jsxs(j,{className:"flex items-center gap-2",children:[x.jsx(le,{className:"w-5 h-5"}),"Shared With Me"]})}),x.jsxs(f,{className:"space-y-4",children:[x.jsx("div",{className:"text-sm text-gray-600",children:x.jsx("p",{children:"Life wishes that others have chosen to share with you."})}),x.jsx(F,{}),x.jsxs("div",{className:"text-xs text-gray-500 space-y-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(ee,{className:"w-3 h-3"}),x.jsx("span",{children:"Personal connections"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(ie,{className:"w-3 h-3"}),x.jsx("span",{children:"Trusted sharing"})]})]})]})]})}),x.jsx("div",{className:"lg:col-span-3",children:0===h.length?x.jsx(p,{children:x.jsxs(f,{className:"text-center py-12",children:[x.jsx(le,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),x.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No shared wishes yet"}),x.jsx("p",{className:"text-gray-500 mb-6",children:"When others share their life wishes with you, they'll appear here."})]})}):x.jsx("div",{className:"space-y-6",children:h.map(e=>x.jsx(De,{wish:e,onShare:z},e.id))})})]})})]}),i&&x.jsx(q,{open:!!i,onOpenChange:()=>r(null),children:x.jsxs(E,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[x.jsx(O,{children:x.jsxs(M,{className:"flex items-center gap-2",children:[x.jsx(ee,{className:"w-5 h-5 text-pink-600"}),"Edit Life Wish"]})}),x.jsx(Ue,{wish:i,mode:"edit",onSave:e=>{i&&N.mutate({wishId:i.id,updates:e})},onCancel:()=>r(null)})]})})]})})};export{Ve as default};
