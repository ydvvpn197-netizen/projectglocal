import{U as e,b as s,u as a,d as t,r as i,j as r,B as l,C as n,v as c,w as d,y as m}from"./main-6fHUpRzT.js";import{R as o,H as x}from"./ResponsiveLayout-Bc2JEU4o.js";import{B as h}from"./badge-Bj-CyBpD.js";import{i as j,A as p,a as u,b as g}from"./sheet-D2smYKYW.js";import{S as N}from"./separator-55ip2E4B.js";import{D as f,a as v,b as w,c as b,d as k}from"./dialog-DM8TTFu4.js";import{T as y}from"./textarea-DdxXr3wS.js";import{L as C}from"./label-B5VpaZlr.js";import{u as _}from"./useEvents-LUc3ZOwt.js";import{A as z}from"./arrow-left-CQA9bfHi.js";import{C as S}from"./index-YNlOS8aM.js";import{C as E}from"./clock-CuUFWr0o.js";import{M as T}from"./map-pin-DJOBTPKn.js";import{S as M}from"./share-2-D3j1vOAy.js";import{U as A}from"./users-Czby48qY.js";import{T as B}from"./tag-BTUrL2J5.js";import{T as O}from"./ticket-APu0ivd1.js";import{M as P}from"./message-circle-clGX_rmg.js";import{U as R}from"./user-DoINJrqZ.js";import{f as L}from"./index-GQUAIkZv.js";import"./input-C0XSs2D-.js";import"./NotificationBell-C-odGad4.js";import"./Combination-Bb2n9b59.js";import"./scroll-area-DRpKKhsW.js";import"./index-BlbmBgSN.js";import"./index-jVOyRz7F.js";import"./useNotifications-DlOFbLc9.js";import"./tabs-BNobDGc4.js";import"./check-BVB7WkBF.js";import"./bell-DFXHEubE.js";import"./NotificationButton-CnmvsVP-.js";import"./search-CeL_nYcN.js";import"./zap-Dyj-3m1T.js";import"./message-square-BNIlY-fX.js";import"./alert-BCcU8rrr.js";import"./wifi-D7M5OVnX.js";import"./log-out-B3lkkfQi.js";import"./useLocation-Bl6dvRZN.js";import"./locationService-BtZ0rgoF.js";import"./pointsService-BOpHKILN.js";const $=()=>{const{eventId:$}=e(),q=s(),{events:D,loading:F,toggleAttendance:U}=_(),{user:Y}=a(),{toast:K}=t(),[V,W]=i.useState(null),[X,G]=i.useState(!1),[H,I]=i.useState(!1),[Q,J]=i.useState(1),[Z,ee]=i.useState(""),[se,ae]=i.useState(0);i.useEffect(()=>{if($&&D.length>0){const e=D.find(e=>e.id===$);W(e)}},[$,D]);const te=e=>{try{return L(new Date(e),"EEEE, MMMM dd, yyyy")}catch(s){return e}},ie=e=>0===e?"Free":`$${e}`;if(F)return r.jsx(o,{children:r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-muted rounded w-1/4 mb-4"}),r.jsx("div",{className:"h-96 bg-muted rounded-lg mb-6"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-6 bg-muted rounded w-3/4"}),r.jsx("div",{className:"h-4 bg-muted rounded w-full"}),r.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})]})})});if(!V)return r.jsx(o,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Event Not Found"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"The event you're looking for doesn't exist or has been removed."}),r.jsxs(l,{onClick:()=>q("/events"),children:[r.jsx(z,{className:"w-4 h-4 mr-2"}),"Back to Events"]})]})});const re=0===V.price?0:V.price*Q;return r.jsx(o,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs(l,{variant:"ghost",onClick:()=>q("/events"),className:"mb-4",children:[r.jsx(z,{className:"w-4 h-4 mr-2"}),"Back to Events"]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:V.title}),r.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(S,{className:"w-4 h-4"}),te(V.event_date)]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(E,{className:"w-4 h-4"}),V.event_time]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(T,{className:"w-4 h-4"}),V.location_name]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(h,{className:"bg-orange-500 text-white font-semibold",children:ie(V.price)}),Math.random()>.7&&r.jsxs(h,{className:"bg-blue-500 text-white",children:[r.jsx(j,{className:"w-3 h-3 mr-1"}),"Verified"]})]})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:V.image_url||"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=800&h=400&fit=crop",alt:V.title,className:"w-full h-96 object-cover rounded-lg"}),r.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[r.jsx(l,{variant:"ghost",size:"sm",className:"bg-white/20 hover:bg-white/30 text-white",children:r.jsx(x,{className:"w-4 h-4"})}),r.jsx(l,{variant:"ghost",size:"sm",className:"bg-white/20 hover:bg-white/30 text-white",children:r.jsx(M,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs(n,{children:[r.jsx(c,{children:r.jsx(d,{children:"About This Event"})}),r.jsx(m,{children:r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:V.description||"No description available for this event."})})]}),r.jsxs(n,{children:[r.jsx(c,{children:r.jsx(d,{children:"Event Details"})}),r.jsx(m,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(S,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Date"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:te(V.event_date)})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(E,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Time"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:V.event_time})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(T,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Location"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:V.location_name})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(A,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Attendees"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[V.attendees_count," / ",V.max_attendees||"âˆž"," attending"]})]})]})]})})]}),V.tags&&V.tags.length>0&&r.jsxs(n,{children:[r.jsx(c,{children:r.jsx(d,{children:"Tags"})}),r.jsx(m,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:V.tags.map((e,s)=>r.jsxs(h,{variant:"secondary",children:[r.jsx(B,{className:"w-3 h-3 mr-1"}),e]},s))})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(n,{children:r.jsx(m,{className:"p-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs(l,{className:"w-full",variant:V.user_attending?"default":"outline",onClick:()=>U(V.id),children:[r.jsx(A,{className:"w-4 h-4 mr-2"}),V.user_attending?"Attending":"Attend Event"]}),r.jsxs(l,{className:"w-full btn-event",onClick:()=>{Y?G(!0):K({title:"Authentication Required",description:"Please sign in to book this event",variant:"destructive"})},children:[r.jsx(O,{className:"w-4 h-4 mr-2"}),"Book Tickets"]}),r.jsxs(l,{variant:"outline",className:"w-full",onClick:()=>{Y?I(!0):K({title:"Authentication Required",description:"Please sign in to chat with the organizer",variant:"destructive"})},children:[r.jsx(P,{className:"w-4 h-4 mr-2"}),"Chat with Organizer"]})]})})}),r.jsxs(n,{children:[r.jsx(c,{children:r.jsx(d,{children:"Event Organizer"})}),r.jsxs(m,{children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors cursor-pointer",onClick:()=>{V&&q(`/profile/${V.user_id}`)},children:[r.jsxs(p,{className:"w-12 h-12",children:[r.jsx(u,{src:V.organizer_avatar}),r.jsx(g,{children:(V.organizer_name||"E")[0]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:V.organizer_name||"Event Organizer"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Event Creator"})]}),r.jsx(R,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsx(N,{className:"my-4"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(l,{variant:"outline",size:"sm",className:"w-full",children:[r.jsx(P,{className:"w-4 h-4 mr-2"}),"Send Message"]}),r.jsxs(l,{variant:"outline",size:"sm",className:"w-full",children:[r.jsx(R,{className:"w-4 h-4 mr-2"}),"View Profile"]})]})]})]}),r.jsxs(n,{children:[r.jsx(c,{children:r.jsx(d,{children:"Pricing"})}),r.jsxs(m,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-lg font-semibold",children:"Ticket Price"}),r.jsx("span",{className:"text-2xl font-bold text-orange-500",children:ie(V.price)})]}),V.price>0&&r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Price per ticket"})]})]})]})]}),r.jsx(f,{open:X,onOpenChange:G,children:r.jsxs(v,{className:"max-w-2xl",children:[r.jsxs(w,{children:[r.jsxs(b,{children:["Book Tickets - ",V.title]}),r.jsx(k,{children:"Select the number of tickets you'd like to book"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-4 p-4 bg-muted rounded-lg",children:[r.jsx("img",{src:V.image_url||"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=800&h=400&fit=crop",alt:V.title,className:"w-20 h-16 rounded object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold",children:V.title}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[te(V.event_date)," at ",V.event_time]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:V.location_name})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(C,{htmlFor:"tickets",children:"Number of Tickets"}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"General Admission"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[ie(V.price)," per ticket"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(l,{variant:"outline",size:"sm",onClick:()=>J(Math.max(1,Q-1)),disabled:Q<=1,children:"-"}),r.jsx("span",{className:"w-8 text-center",children:Q}),r.jsx(l,{variant:"outline",size:"sm",onClick:()=>J(Math.min(V.max_attendees-V.attendees_count,Q+1)),disabled:Q>=V.max_attendees-V.attendees_count,children:"+"})]})]})]}),r.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted rounded-lg",children:[r.jsx("span",{className:"font-semibold",children:"Total"}),r.jsx("span",{className:"text-xl font-bold",children:ie(re)})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(l,{className:"flex-1 btn-event",onClick:()=>{K({title:"Booking Successful",description:`You've booked ${Q} ticket(s) for ${V.title}`}),G(!1)},children:[r.jsx(O,{className:"w-4 h-4 mr-2"}),0===V.price?"Reserve Spot":"Book Tickets"]}),r.jsx(l,{variant:"outline",onClick:()=>G(!1),children:"Cancel"})]})]})]})}),r.jsx(f,{open:H,onOpenChange:I,children:r.jsxs(v,{className:"max-w-2xl",children:[r.jsxs(w,{children:[r.jsxs(b,{children:["Chat with ",V.organizer_name||"Event Organizer"]}),r.jsx(k,{children:"Send a message to the event organizer"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(C,{htmlFor:"message",children:"Your Message"}),r.jsx(y,{id:"message",placeholder:"Type your message here...",value:Z,onChange:e=>ee(e.target.value),rows:4})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(l,{className:"flex-1",onClick:()=>{Z.trim()&&(K({title:"Message Sent",description:"Your message has been sent to the organizer"}),ee(""),I(!1))},disabled:!Z.trim(),children:[r.jsx(P,{className:"w-4 h-4 mr-2"}),"Send Message"]}),r.jsx(l,{variant:"outline",onClick:()=>I(!1),children:"Cancel"})]})]})]})})]})})};export{$ as default};
