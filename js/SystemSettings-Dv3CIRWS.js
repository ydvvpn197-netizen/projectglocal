var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,l=(e,s)=>{for(var a in s||(s={}))i.call(s,a)&&n(e,a,s[a]);if(t)for(var a of t(s))r.call(s,a)&&n(e,a,s[a]);return e},c=(e,t)=>s(e,a(t)),o=(e,s,a)=>new Promise((t,i)=>{var r=e=>{try{l(a.next(e))}catch(s){i(s)}},n=e=>{try{l(a.throw(e))}catch(s){i(s)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);l((a=a.apply(e,s)).next())});import{c as d,r as m,j as h,B as x}from"./index-B5IYdG7F.js";import{C as j,a as p,b as u,c as _,d as g}from"./card-Bm1jiGt-.js";import{I as v}from"./input-C4_QhDnm.js";import{L as f}from"./label-BIAuZBUP.js";import{S as y}from"./switch-1GU9K-FH.js";import{T as N}from"./textarea-DnhiZrYB.js";import{S as b,a as w,b as C,c as S,d as F}from"./select-DME_qdt9.js";import{A as k,a as P}from"./alert-CQybxmNr.js";import{T as A,a as q,b as E,c as M}from"./tabs-DPPBWbFC.js";import{u as T,A as U,a as R,b as L}from"./AdminLayout-_0vC0t44.js";import{A as z}from"./alert-triangle-C5DO0cvR.js";import{G as O}from"./globe-OHzMOe5M.js";import{P as D,Z as V}from"./zap-DPSXpNso.js";import{S as B}from"./shield-CcnVg-IR.js";import{L as G}from"./lock-VT3miBjZ.js";import{U as I}from"./users-Dh-Bdb-k.js";import{F as J}from"./file-text-BY8H24ea.js";import{B as W}from"./bell-qeMkXRtc.js";import{M as Y}from"./mail-D46AJ_e2.js";import{S as Z}from"./settings-DSEWn2wM.js";import{R as $}from"./refresh-cw-B0silJ51.js";import{S as H}from"./save-BfDrAOGF.js";import"./index-_KG4atBu.js";import"./index-jVOyRz7F.js";import"./index-9msbY5CZ.js";import"./Combination-BxRIZ8rt.js";import"./chevron-up-DvjQ7ry8.js";import"./check-C9wwFfOs.js";import"./eye-off-Yicyrlvk.js";import"./eye-DAEnomQ6.js";import"./loader-2-DMKXv0ZB.js";import"./scroll-area-Beiyt5Kx.js";import"./log-out-DchhrZ8K.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=d("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Q=()=>{T();const[e,s]=m.useState(!0),[a,t]=m.useState(!1),[i,r]=m.useState(null),[n,d]=m.useState(null),[Q,X]=m.useState({}),ee=new U;m.useEffect(()=>{se()},[]);const se=()=>o(void 0,null,function*(){try{s(!0),r(null);const e=yield ee.getSystemSettings(),a={};e.forEach(e=>{a[e.setting_key]=e}),X(a)}catch(e){r(e instanceof Error?e.message:"Failed to load settings")}finally{s(!1)}}),ae=(e,s)=>{X(a=>c(l({},a),{[e]:c(l({},a[e]),{setting_value:s.toString()})}))},te=(e,s="")=>{var a;return(null==(a=Q[e])?void 0:a.setting_value)||s};return e?h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):h.jsx(R,{requiredPermission:"settings:manage",children:h.jsx(L,{children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),h.jsx("p",{className:"text-gray-600",children:"Configure platform settings and system preferences"})]}),i&&h.jsxs(k,{className:"mb-6",children:[h.jsx(z,{className:"h-4 w-4"}),h.jsx(P,{children:i})]}),n&&h.jsx(k,{className:"mb-6",children:h.jsx(P,{className:"text-green-800",children:n})}),h.jsxs(A,{defaultValue:"general",className:"space-y-6",children:[h.jsxs(q,{children:[h.jsx(E,{value:"general",children:"General"}),h.jsx(E,{value:"security",children:"Security"}),h.jsx(E,{value:"users",children:"Users"}),h.jsx(E,{value:"content",children:"Content"}),h.jsx(E,{value:"notifications",children:"Notifications"}),h.jsx(E,{value:"advanced",children:"Advanced"})]}),h.jsxs(M,{value:"general",className:"space-y-6",children:[h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(O,{className:"h-5 w-5"}),"Platform Information"]}),h.jsx(_,{children:"Basic platform configuration"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"platform_name",children:"Platform Name"}),h.jsx(v,{id:"platform_name",value:te("platform_name","Glocal"),onChange:e=>ae("platform_name",e.target.value),placeholder:"Enter platform name"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"platform_description",children:"Platform Description"}),h.jsx(v,{id:"platform_description",value:te("platform_description"),onChange:e=>ae("platform_description",e.target.value),placeholder:"Enter platform description"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"contact_email",children:"Contact Email"}),h.jsx(v,{id:"contact_email",type:"email",value:te("contact_email"),onChange:e=>ae("contact_email",e.target.value),placeholder:"admin@example.com"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"timezone",children:"Default Timezone"}),h.jsxs(b,{value:te("timezone","UTC"),onValueChange:e=>ae("timezone",e),children:[h.jsx(w,{children:h.jsx(C,{})}),h.jsxs(S,{children:[h.jsx(F,{value:"UTC",children:"UTC"}),h.jsx(F,{value:"America/New_York",children:"Eastern Time"}),h.jsx(F,{value:"America/Chicago",children:"Central Time"}),h.jsx(F,{value:"America/Denver",children:"Mountain Time"}),h.jsx(F,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]})})]}),h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(D,{className:"h-5 w-5"}),"Appearance"]}),h.jsx(_,{children:"Platform appearance settings"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"logo_url",children:"Logo URL"}),h.jsx(v,{id:"logo_url",value:te("logo_url"),onChange:e=>ae("logo_url",e.target.value),placeholder:"https://example.com/logo.png"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"favicon_url",children:"Favicon URL"}),h.jsx(v,{id:"favicon_url",value:te("favicon_url"),onChange:e=>ae("favicon_url",e.target.value),placeholder:"https://example.com/favicon.ico"})]})]})})]})]}),h.jsxs(M,{value:"security",className:"space-y-6",children:[h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(B,{className:"h-5 w-5"}),"Security Settings"]}),h.jsx(_,{children:"Platform security configuration"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"maintenance_mode",children:"Maintenance Mode"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Enable maintenance mode to restrict access"})]}),h.jsx(y,{id:"maintenance_mode",checked:"true"===te("maintenance_mode"),onCheckedChange:e=>ae("maintenance_mode",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"registration_enabled",children:"User Registration"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Allow new users to register"})]}),h.jsx(y,{id:"registration_enabled",checked:"true"===te("registration_enabled","true"),onCheckedChange:e=>ae("registration_enabled",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"email_verification_required",children:"Email Verification Required"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Require email verification for new accounts"})]}),h.jsx(y,{id:"email_verification_required",checked:"true"===te("email_verification_required","true"),onCheckedChange:e=>ae("email_verification_required",e)})]})]})})]}),h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(G,{className:"h-5 w-5"}),"Authentication"]}),h.jsx(_,{children:"Authentication and session settings"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"session_timeout",children:"Session Timeout (minutes)"}),h.jsx(v,{id:"session_timeout",type:"number",value:te("session_timeout","60"),onChange:e=>ae("session_timeout",e.target.value),min:"15",max:"1440"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"max_login_attempts",children:"Max Login Attempts"}),h.jsx(v,{id:"max_login_attempts",type:"number",value:te("max_login_attempts","5"),onChange:e=>ae("max_login_attempts",e.target.value),min:"3",max:"10"})]})]})})]})]}),h.jsxs(M,{value:"users",className:"space-y-6",children:[h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(I,{className:"h-5 w-5"}),"User Management"]}),h.jsx(_,{children:"User account and profile settings"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"allow_profile_editing",children:"Allow Profile Editing"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Users can edit their profiles"})]}),h.jsx(y,{id:"allow_profile_editing",checked:"true"===te("allow_profile_editing","true"),onCheckedChange:e=>ae("allow_profile_editing",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"require_location",children:"Require Location"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Users must provide location information"})]}),h.jsx(y,{id:"require_location",checked:"true"===te("require_location","false"),onCheckedChange:e=>ae("require_location",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"auto_approve_users",children:"Auto-approve New Users"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Automatically approve new user registrations"})]}),h.jsx(y,{id:"auto_approve_users",checked:"true"===te("auto_approve_users","true"),onCheckedChange:e=>ae("auto_approve_users",e)})]})]})})]}),h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(V,{className:"h-5 w-5"}),"User Limits"]}),h.jsx(_,{children:"User activity and content limits"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"max_posts_per_day",children:"Max Posts Per Day"}),h.jsx(v,{id:"max_posts_per_day",type:"number",value:te("max_posts_per_day","10"),onChange:e=>ae("max_posts_per_day",e.target.value),min:"1",max:"100"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"max_events_per_month",children:"Max Events Per Month"}),h.jsx(v,{id:"max_events_per_month",type:"number",value:te("max_events_per_month","5"),onChange:e=>ae("max_events_per_month",e.target.value),min:"1",max:"50"})]})]})})]})]}),h.jsxs(M,{value:"content",className:"space-y-6",children:[h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(J,{className:"h-5 w-5"}),"Content Moderation"]}),h.jsx(_,{children:"Content moderation and filtering settings"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"auto_moderate_content",children:"Auto-moderate Content"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Automatically filter inappropriate content"})]}),h.jsx(y,{id:"auto_moderate_content",checked:"true"===te("auto_moderate_content","false"),onCheckedChange:e=>ae("auto_moderate_content",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"require_content_approval",children:"Require Content Approval"}),h.jsx("p",{className:"text-sm text-gray-500",children:"All content must be approved before publishing"})]}),h.jsx(y,{id:"require_content_approval",checked:"true"===te("require_content_approval","false"),onCheckedChange:e=>ae("require_content_approval",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"allow_anonymous_posts",children:"Allow Anonymous Posts"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Users can post without revealing their identity"})]}),h.jsx(y,{id:"allow_anonymous_posts",checked:"true"===te("allow_anonymous_posts","false"),onCheckedChange:e=>ae("allow_anonymous_posts",e)})]})]})})]}),h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(K,{className:"h-5 w-5"}),"Content Storage"]}),h.jsx(_,{children:"Content storage and retention settings"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"max_file_size_mb",children:"Max File Size (MB)"}),h.jsx(v,{id:"max_file_size_mb",type:"number",value:te("max_file_size_mb","10"),onChange:e=>ae("max_file_size_mb",e.target.value),min:"1",max:"100"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"content_retention_days",children:"Content Retention (days)"}),h.jsx(v,{id:"content_retention_days",type:"number",value:te("content_retention_days","365"),onChange:e=>ae("content_retention_days",e.target.value),min:"30",max:"3650"})]})]})})]})]}),h.jsxs(M,{value:"notifications",className:"space-y-6",children:[h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(W,{className:"h-5 w-5"}),"Notification Settings"]}),h.jsx(_,{children:"Platform notification configuration"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"email_notifications_enabled",children:"Email Notifications"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Enable email notifications for users"})]}),h.jsx(y,{id:"email_notifications_enabled",checked:"true"===te("email_notifications_enabled","true"),onCheckedChange:e=>ae("email_notifications_enabled",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"push_notifications_enabled",children:"Push Notifications"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Enable push notifications"})]}),h.jsx(y,{id:"push_notifications_enabled",checked:"true"===te("push_notifications_enabled","true"),onCheckedChange:e=>ae("push_notifications_enabled",e)})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"welcome_email_enabled",children:"Welcome Email"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Send welcome email to new users"})]}),h.jsx(y,{id:"welcome_email_enabled",checked:"true"===te("welcome_email_enabled","true"),onCheckedChange:e=>ae("welcome_email_enabled",e)})]})]})})]}),h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(Y,{className:"h-5 w-5"}),"Email Configuration"]}),h.jsx(_,{children:"Email service configuration"})]}),h.jsx(g,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"smtp_host",children:"SMTP Host"}),h.jsx(v,{id:"smtp_host",value:te("smtp_host"),onChange:e=>ae("smtp_host",e.target.value),placeholder:"smtp.gmail.com"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"smtp_port",children:"SMTP Port"}),h.jsx(v,{id:"smtp_port",type:"number",value:te("smtp_port","587"),onChange:e=>ae("smtp_port",e.target.value),placeholder:"587"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"smtp_username",children:"SMTP Username"}),h.jsx(v,{id:"smtp_username",value:te("smtp_username"),onChange:e=>ae("smtp_username",e.target.value),placeholder:"your-email@gmail.com"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"smtp_password",children:"SMTP Password"}),h.jsx(v,{id:"smtp_password",type:"password",value:te("smtp_password"),onChange:e=>ae("smtp_password",e.target.value),placeholder:"Enter SMTP password"})]})]})})]})]}),h.jsx(M,{value:"advanced",className:"space-y-6",children:h.jsxs(j,{children:[h.jsxs(p,{children:[h.jsxs(u,{className:"flex items-center gap-2",children:[h.jsx(Z,{className:"h-5 w-5"}),"Advanced Settings"]}),h.jsx(_,{children:"Advanced platform configuration"})]}),h.jsxs(g,{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(f,{htmlFor:"cache_ttl",children:"Cache TTL (seconds)"}),h.jsx(v,{id:"cache_ttl",type:"number",value:te("cache_ttl","3600"),onChange:e=>ae("cache_ttl",e.target.value),min:"60",max:"86400"})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"rate_limit_requests",children:"Rate Limit (requests/min)"}),h.jsx(v,{id:"rate_limit_requests",type:"number",value:te("rate_limit_requests","100"),onChange:e=>ae("rate_limit_requests",e.target.value),min:"10",max:"1000"})]})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"custom_css",children:"Custom CSS"}),h.jsx(N,{id:"custom_css",value:te("custom_css"),onChange:e=>ae("custom_css",e.target.value),placeholder:"/* Custom CSS styles */",rows:6})]}),h.jsxs("div",{children:[h.jsx(f,{htmlFor:"custom_js",children:"Custom JavaScript"}),h.jsx(N,{id:"custom_js",value:te("custom_js"),onChange:e=>ae("custom_js",e.target.value),placeholder:"// Custom JavaScript code",rows:6})]})]})]})})]}),h.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[h.jsxs(x,{variant:"outline",onClick:se,children:[h.jsx($,{className:"mr-2 h-4 w-4"}),"Reset to Defaults"]}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsxs(x,{variant:"outline",onClick:se,children:[h.jsx($,{className:"mr-2 h-4 w-4"}),"Reload"]}),h.jsxs(x,{onClick:()=>o(void 0,null,function*(){try{t(!0),r(null),d(null);const e=Object.values(Q).filter(e=>e.is_public);yield ee.updateSystemSettings(e),d("Settings saved successfully")}catch(e){r(e instanceof Error?e.message:"Failed to save settings")}finally{t(!1)}}),disabled:a,children:[h.jsx(H,{className:"mr-2 h-4 w-4"}),a?"Saving...":"Save Settings"]})]})]})]})})})};export{Q as default};
