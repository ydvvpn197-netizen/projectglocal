var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,n=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&l(e,t,s[t]);if(a)for(var t of a(s))i.call(s,t)&&l(e,t,s[t]);return e},c=(e,a)=>s(e,t(a)),o=(e,s,t)=>new Promise((a,r)=>{var i=e=>{try{n(t.next(e))}catch(s){r(s)}},l=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,l);n((t=t.apply(e,s)).next())});import{c as d,s as m,u as x,d as u,r as h,j as p,B as g,b as j}from"./index-B5IYdG7F.js";import{H as f,R as v}from"./ResponsiveLayout-BzUw0buI.js";import{I as N}from"./input-C4_QhDnm.js";import{C as y,d as b}from"./card-Bm1jiGt-.js";import{B as w}from"./badge-Dh5Uj8vN.js";import{i as _,P as C,A as k,a as P,b as S}from"./sheet-CgDUfSpi.js";import{T as D,a as U,b as B,c as F}from"./tabs-DPPBWbFC.js";import{D as T,e as E,a as A,b as $,c as L,d as O}from"./dialog-UfmTf-qG.js";import{T as q}from"./textarea-DnhiZrYB.js";import{L as z}from"./label-BIAuZBUP.js";import{u as M,T as R,M as I,a as J}from"./usePoints-CMVXcg0x.js";import{Z as Y}from"./zap-DPSXpNso.js";import{T as H}from"./trending-up-B5v9qFws.js";import{A as V}from"./award-BlnV44YH.js";import{S as K}from"./share-2-D7lrZdDw.js";import{C as W}from"./index-DD_J5sPn.js";import{M as X}from"./message-circle-CZlRU4gv.js";import{L as Z}from"./loader-2-DMKXv0ZB.js";import{M as G}from"./map-pin-BwnggLrZ.js";import{P as Q}from"./pen-square-BqxdmQl9.js";import{U as ee}from"./users-Dh-Bdb-k.js";import{M as se}from"./more-horizontal-h1dCe7B5.js";import{C as te}from"./clock-BZvZzp4Q.js";import{A as ae}from"./alert-circle-ClvX60e_.js";import{X as re}from"./x-circle-DK-YyWpW.js";import{C as ie}from"./check-circle-CNkceqte.js";import{F as le}from"./flame-s6aFt2GQ.js";import{S as ne}from"./shield-CcnVg-IR.js";import{C as ce}from"./crown-quQRDa1G.js";import"./separator-BZYZTYLW.js";import"./NotificationBell-DtnEojo4.js";import"./Combination-BxRIZ8rt.js";import"./scroll-area-Beiyt5Kx.js";import"./index-9msbY5CZ.js";import"./index-jVOyRz7F.js";import"./useNotifications-C0wifgqF.js";import"./check-C9wwFfOs.js";import"./bell-qeMkXRtc.js";import"./settings-DSEWn2wM.js";import"./user-UOowhO7W.js";import"./index-DWtoKlrM.js";import"./NotificationButton-CqXjP_LK.js";import"./search-Co_OHmlK.js";import"./message-square-j4RxGxzk.js";import"./alert-CQybxmNr.js";import"./log-out-DchhrZ8K.js";import"./pointsService-D9LdhHSC.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=d("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const de=new class{getUserProfile(e){return o(this,null,function*(){try{const{data:s,error:t}=yield m.from("profiles").select("*").eq("user_id",e).single();return t?null:s}catch(s){return null}})}updateUserProfile(e,s){return o(this,null,function*(){try{const{error:t}=yield m.from("profiles").update(c(n({},s),{updated_at:(new Date).toISOString()})).eq("user_id",e);return t?{success:!1,error:t.message}:{success:!0}}catch(t){return{success:!1,error:t.message}}})}getUserStats(e){return o(this,null,function*(){try{const{data:s}=yield m.from("events").select("id").eq("user_id",e),{data:t}=yield m.from("posts").select("id").eq("user_id",e),{data:a}=yield m.from("follows").select("id").eq("followed_id",e),{data:r}=yield m.from("follows").select("id").eq("follower_id",e),i=10*((null==s?void 0:s.length)||0)+5*((null==t?void 0:t.length)||0)+2*((null==a?void 0:a.length)||0);return{eventsAttended:0,eventsCreated:(null==s?void 0:s.length)||0,communitiesJoined:0,postsCreated:(null==t?void 0:t.length)||0,followers:(null==a?void 0:a.length)||0,following:(null==r?void 0:r.length)||0,points:i}}catch(s){return{eventsAttended:0,eventsCreated:0,communitiesJoined:0,postsCreated:0,followers:0,following:0,points:0}}})}getUserPosts(e){return o(this,null,function*(){try{const{data:s,error:t}=yield m.from("posts").select("\n          id,\n          title,\n          content,\n          likes_count,\n          comments_count,\n          created_at,\n          image_url\n        ").eq("user_id",e).order("created_at",{ascending:!1}).limit(10);return t?[]:(null==s?void 0:s.map(e=>({id:e.id,title:e.title||"Untitled Post",content:e.content,likes:e.likes_count||0,comments:e.comments_count||0,date:this.formatRelativeDate(e.created_at),image:e.image_url})))||[]}catch(s){return[]}})}getUserBookings(e){return o(this,null,function*(){try{const{data:s,error:t}=yield m.from("event_attendees").select("\n          id,\n          status,\n          events (\n            id,\n            title,\n            image_url,\n            event_date,\n            event_time,\n            location_name,\n            location_city,\n            location_state,\n            location_country\n          )\n        ").eq("user_id",e).eq("status","attending").order("created_at",{ascending:!1}).limit(10);if(t)return[];const{data:a,error:r}=yield m.from("artist_bookings").select("\n          id,\n          event_date,\n          event_location,\n          event_description,\n          status,\n          artists (\n            id,\n            specialty,\n            bio\n          )\n        ").eq("user_id",e).order("created_at",{ascending:!1}).limit(10),i=[];return null==s||s.forEach(e=>{if(e.events){const s=[e.events.location_city,e.events.location_state,e.events.location_country].filter(Boolean).join(", ")||e.events.location_name;i.push({id:e.id,eventTitle:e.events.title,eventImage:e.events.image_url||"",date:this.formatDate(e.events.event_date),time:e.events.event_time,location:s,status:"attending"===e.status?"confirmed":"pending",tickets:1})}}),null==a||a.forEach(e=>{var s,t;const a=(null==(t=null==(s=e.artists)?void 0:s.specialty)?void 0:t[0])||"Artist";i.push({id:e.id,eventTitle:`${a} Booking`,eventImage:"",date:this.formatDate(e.event_date),time:"TBD",location:e.event_location,status:e.status,tickets:1})}),i.sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime()).slice(0,10)}catch(s){return[]}})}getUserCommunities(e){return o(this,null,function*(){try{return[{id:"1",name:"Local Artists Collective",image:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=100&h=100&fit=crop",members:234,role:"admin",joinedDate:"Jan 2024"},{id:"2",name:"Food Lovers United",image:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=100&h=100&fit=crop",members:456,role:"member",joinedDate:"Feb 2024"}]}catch(e){return[]}})}getUserBadges(e){return o(this,null,function*(){try{const s=yield this.getUserStats(e),t=[];return s.eventsCreated>=5&&t.push({id:1,name:"Community Leader",icon:"Crown",color:"bg-yellow-500",description:"Created 5+ successful events"}),s.postsCreated>=10&&t.push({id:2,name:"Top Contributor",icon:"Trophy",color:"bg-orange-500",description:"Top 10% contributor"}),s.followers>=100&&t.push({id:3,name:"Social Butterfly",icon:"Users",color:"bg-pink-500",description:"100+ followers"}),s.points>=1e3&&t.push({id:4,name:"Point Collector",icon:"Star",color:"bg-purple-500",description:"Earned 1000+ points"}),t}catch(s){return[]}})}uploadAvatar(e,s){return o(this,null,function*(){try{const t=s.name.split(".").pop(),a=`avatars/${`${e}-${Date.now()}.${t}`}`,{error:r}=yield m.storage.from("avatars").upload(a,s);if(r)return{success:!1,error:r.message};const{data:{publicUrl:i}}=m.storage.from("avatars").getPublicUrl(a),{error:l}=yield m.from("profiles").update({avatar_url:i}).eq("user_id",e);return l?{success:!1,error:l.message}:{success:!0,url:i}}catch(t){return{success:!1,error:t.message}}})}formatRelativeDate(e){const s=new Date(e),t=new Date,a=Math.floor((t.getTime()-s.getTime())/36e5);if(a<1)return"Just now";if(a<24)return`${a} hour${a>1?"s":""} ago`;const r=Math.floor(a/24);if(r<7)return`${r} day${r>1?"s":""} ago`;const i=Math.floor(r/7);return i<4?`${i} week${i>1?"s":""} ago`:s.toLocaleDateString()}formatDate(e){if(!e)return"TBD";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},me=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString(),xe=e=>e<=3?p.jsx(R,{className:"w-4 h-4 text-yellow-500"}):e<=10?p.jsx(I,{className:"w-4 h-4 text-gray-400"}):e<=50?p.jsx(_,{className:"w-4 h-4 text-blue-500"}):p.jsx(J,{className:"w-4 h-4 text-gray-500"}),ue=e=>e<=3?"bg-gradient-to-r from-yellow-400 to-yellow-600 text-white":e<=10?"bg-gradient-to-r from-gray-300 to-gray-500 text-white":e<=50?"bg-gradient-to-r from-blue-400 to-blue-600 text-white":"bg-gray-100 text-gray-800",he=e=>{switch(e){case"post_created":return p.jsx(C,{className:"w-4 h-4 text-green-500"});case"comment_created":return p.jsx(X,{className:"w-4 h-4 text-blue-500"});case"post_like_received":case"comment_like_received":return p.jsx(f,{className:"w-4 h-4 text-red-500"});case"event_organized":return p.jsx(W,{className:"w-4 h-4 text-purple-500"});case"event_attended":return p.jsx(W,{className:"w-4 h-4 text-green-500"});case"post_shared":return p.jsx(K,{className:"w-4 h-4 text-orange-500"});case"poll_created":return p.jsx(V,{className:"w-4 h-4 text-indigo-500"});case"poll_voted":return p.jsx(J,{className:"w-4 h-4 text-cyan-500"});default:return p.jsx(Y,{className:"w-4 h-4 text-gray-500"})}},pe=e=>{switch(e){case"post_created":return"Created a post";case"comment_created":return"Added a comment";case"post_like_received":return"Post received a like";case"comment_like_received":return"Comment received a like";case"post_like_given":return"Liked a post";case"comment_like_given":return"Liked a comment";case"event_organized":return"Organized an event";case"event_attended":return"Attended an event";case"post_shared":return"Shared a post";case"poll_created":return"Created a poll";case"poll_voted":return"Voted in a poll";case"post_deleted":return"Deleted a post";case"comment_deleted":return"Deleted a comment";case"event_deleted":return"Deleted an event";case"poll_deleted":return"Deleted a poll";default:return"Earned points"}},ge=({userId:e,className:s="",showDetails:t=!0,compact:a=!1})=>{const{userPoints:r,loading:i,error:l,pointHistory:n,historyLoading:c}=M(),[o,d]=h.useState(!1);if(i)return p.jsx(y,{className:`user-points-display ${s}`,children:p.jsx(b,{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"}),p.jsxs("div",{className:"flex-1 space-y-2",children:[p.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),p.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 animate-pulse"})]})]})})});if(l||!r)return p.jsx(y,{className:`user-points-display ${s}`,children:p.jsx(b,{className:"p-4",children:p.jsxs("div",{className:"text-center text-gray-500",children:[p.jsx(Y,{className:"w-6 h-6 mx-auto mb-2"}),p.jsx("p",{className:"text-sm",children:"Points not available"})]})})});const m=n.slice(0,5);return p.jsx(p.Fragment,{children:p.jsx(y,{className:`user-points-display ${s}`,children:p.jsx(b,{className:""+(a?"p-3":"p-4"),children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-orange-400 to-red-400 rounded-full",children:xe(r.rank)}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-bold text-lg text-orange-600",children:me(r.total_points)}),p.jsxs(w,{className:`text-xs ${ue(r.rank)}`,children:["Rank #",r.rank]})]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Community Points"})]})]}),t&&p.jsxs(T,{open:o,onOpenChange:d,children:[p.jsx(E,{asChild:!0,children:p.jsxs(g,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-200 hover:bg-orange-50",children:[p.jsx(H,{className:"w-4 h-4 mr-1"}),"Details"]})}),p.jsxs(A,{className:"max-w-md",children:[p.jsxs($,{children:[p.jsxs(L,{className:"flex items-center gap-2",children:[p.jsx(R,{className:"w-5 h-5 text-orange-500"}),"Points Details"]}),p.jsx(O,{children:"Your community engagement history and points breakdown"})]}),p.jsxs(D,{defaultValue:"overview",className:"w-full",children:[p.jsxs(U,{className:"grid w-full grid-cols-2",children:[p.jsx(B,{value:"overview",children:"Overview"}),p.jsx(B,{value:"history",children:"History"})]}),p.jsxs(F,{value:"overview",className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[p.jsx("div",{className:"font-bold text-2xl text-orange-600",children:me(r.total_points)}),p.jsx("div",{className:"text-xs text-orange-700",children:"Total Points"})]}),p.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[p.jsxs("div",{className:"font-bold text-2xl text-blue-600",children:["#",r.rank]}),p.jsx("div",{className:"text-xs text-blue-700",children:"Community Rank"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h4",{className:"font-semibold text-sm",children:"Recent Activity"}),m.length>0?p.jsx("div",{className:"space-y-2",children:m.map(e=>p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[he(e.transaction_type),p.jsx("div",{className:"flex-1 text-sm",children:pe(e.transaction_type)}),p.jsxs("span",{className:"text-xs font-semibold "+(e.points>0?"text-green-600":"text-red-600"),children:[e.points>0?"+":"",e.points]})]},e.id))}):p.jsx("p",{className:"text-sm text-gray-500",children:"No recent activity"})]})]}),p.jsx(F,{value:"history",className:"space-y-4",children:p.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:c?p.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((e,s)=>p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded animate-pulse",children:[p.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),p.jsx("div",{className:"flex-1 h-4 bg-gray-200 rounded"}),p.jsx("div",{className:"w-8 h-4 bg-gray-200 rounded"})]},s))}):n.length>0?n.map(e=>p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100",children:[he(e.transaction_type),p.jsx("div",{className:"flex-1 text-sm",children:pe(e.transaction_type)}),p.jsxs("div",{className:"text-right",children:[p.jsxs("span",{className:"text-xs font-semibold "+(e.points>0?"text-green-600":"text-red-600"),children:[e.points>0?"+":"",e.points]}),p.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]})]},e.id)):p.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No transaction history available"})})})]})]})]})]})})})})},je=()=>{var e;const s=j(),{user:t}=x(),{toast:a}=u(),r=h.useRef(null),{profile:i,stats:l,posts:d,bookings:m,communities:M,badges:I,loading:J,updating:V,updateProfile:me,uploadAvatar:xe}=(()=>{const{user:e}=x(),{toast:s}=u(),[t,a]=h.useState(null),[r,i]=h.useState(null),[l,n]=h.useState([]),[c,d]=h.useState([]),[m,p]=h.useState([]),[g,j]=h.useState([]),[f,v]=h.useState(!0),[N,y]=h.useState(!1),b=null==e?void 0:e.id,w=h.useCallback(()=>o(void 0,null,function*(){if(b)try{v(!0);const e=yield de.getUserProfile(b);a(e)}catch(e){s({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{v(!1)}else v(!1)}),[b,s]),_=h.useCallback(()=>o(void 0,null,function*(){if(b)try{const e=yield de.getUserStats(b);i(e)}catch(e){}}),[b]),C=h.useCallback(()=>o(void 0,null,function*(){if(b)try{const e=yield de.getUserPosts(b);n(e)}catch(e){}}),[b]),k=h.useCallback(()=>o(void 0,null,function*(){if(b)try{const e=yield de.getUserBookings(b);d(e)}catch(e){}}),[b]),P=h.useCallback(()=>o(void 0,null,function*(){if(b)try{const e=yield de.getUserCommunities(b);p(e)}catch(e){}}),[b]),S=h.useCallback(()=>o(void 0,null,function*(){if(b)try{const e=yield de.getUserBadges(b);j(e)}catch(e){}}),[b]),D=h.useCallback(e=>o(void 0,null,function*(){if(!b)return s({title:"Error",description:"User not authenticated",variant:"destructive"}),{success:!1};try{y(!0);const t=yield de.updateUserProfile(b,e);return t.success?(s({title:"Success",description:"Profile updated successfully"}),yield w()):s({title:"Error",description:t.error||"Failed to update profile",variant:"destructive"}),t}catch(t){return s({title:"Error",description:"Failed to update profile",variant:"destructive"}),{success:!1,error:"Unknown error"}}finally{y(!1)}}),[b,s,w]),U=h.useCallback(e=>o(void 0,null,function*(){if(!b)return s({title:"Error",description:"User not authenticated",variant:"destructive"}),{success:!1};try{y(!0);const t=yield de.uploadAvatar(b,e);return t.success?(s({title:"Success",description:"Avatar uploaded successfully"}),yield w()):s({title:"Error",description:t.error||"Failed to upload avatar",variant:"destructive"}),t}catch(t){return s({title:"Error",description:"Failed to upload avatar",variant:"destructive"}),{success:!1,error:"Unknown error"}}finally{y(!1)}}),[b,s,w]),B=h.useCallback(()=>o(void 0,null,function*(){b&&(yield Promise.all([w(),_(),C(),k(),P(),S()]))}),[b,w,_,C,k,P,S]);return h.useEffect(()=>{B()},[B]),{profile:t,stats:r,posts:l,bookings:c,communities:m,badges:g,loading:f,updating:N,updateProfile:D,uploadAvatar:U,refreshAll:B,fetchProfile:w,fetchStats:_,fetchPosts:C,fetchBookings:k,fetchCommunities:P,fetchBadges:S}})(),[ue,he]=h.useState(!1),[pe,je]=h.useState({display_name:(null==i?void 0:i.display_name)||"",bio:(null==i?void 0:i.bio)||"",location_city:(null==i?void 0:i.location_city)||"",location_state:(null==i?void 0:i.location_state)||"",location_country:(null==i?void 0:i.location_country)||""});h.useEffect(()=>{i&&je({display_name:i.display_name||"",bio:i.bio||"",location_city:i.location_city||"",location_state:i.location_state||"",location_country:i.location_country||""})},[i]);const fe=()=>{s("/create")},ve=e=>{switch(e){case"confirmed":return p.jsx(ie,{className:"w-4 h-4 text-green-500"});case"pending":return p.jsx(te,{className:"w-4 h-4 text-yellow-500"});case"cancelled":return p.jsx(re,{className:"w-4 h-4 text-red-500"});default:return p.jsx(ae,{className:"w-4 h-4 text-gray-500"})}},Ne=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ye=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"moderator":return"bg-blue-100 text-blue-800";case"member":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};if(J)return p.jsx(v,{children:p.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Z,{className:"h-6 w-6 animate-spin"}),p.jsx("span",{children:"Loading profile..."})]})})});if(!i)return p.jsx(v,{children:p.jsxs("div",{className:"text-center py-12",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Profile Not Found"}),p.jsx("p",{className:"text-muted-foreground mb-6",children:"Unable to load profile data. Please try refreshing the page."}),p.jsx(g,{onClick:()=>window.location.reload(),children:"Refresh Page"})]})});const be=i.display_name||(null==(e=null==t?void 0:t.email)?void 0:e.split("@")[0])||"User",we=[i.location_city,i.location_state,i.location_country].filter(Boolean).join(", ")||"Location not set";return p.jsx(v,{children:p.jsxs("div",{className:"space-y-8",children:[p.jsxs(y,{className:"relative overflow-hidden",children:[p.jsx("div",{className:"h-32 bg-gradient-to-r from-purple-500 to-pink-500"}),p.jsx(b,{className:"relative pt-0",children:p.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-6",children:[p.jsxs("div",{className:"relative -mt-16",children:[p.jsxs(k,{className:"w-32 h-32 border-4 border-white shadow-lg",children:[p.jsx(P,{src:i.avatar_url||void 0,alt:be}),p.jsx(S,{className:"text-2xl font-bold bg-gradient-to-br from-primary to-primary/80 text-primary-foreground",children:be.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})]}),p.jsx(g,{size:"icon",className:"absolute bottom-0 right-0 rounded-full",onClick:()=>{var e;return null==(e=r.current)?void 0:e.click()},disabled:V,children:V?p.jsx(Z,{className:"w-4 h-4 animate-spin"}):p.jsx(oe,{className:"w-4 h-4"})}),p.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:e=>o(void 0,null,function*(){var s;const t=null==(s=e.target.files)?void 0:s[0];t&&(t.type.startsWith("image/")?t.size>5242880?a({title:"File too large",description:"Please select an image smaller than 5MB",variant:"destructive"}):yield xe(t):a({title:"Invalid file type",description:"Please select an image file",variant:"destructive"}))}),className:"hidden"})]}),p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold mb-2",children:be}),p.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground mb-2",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(G,{className:"w-4 h-4"}),we]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(W,{className:"w-4 h-4"}),"Joined ",(e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long"})}catch(s){return"Unknown"}})(i.created_at)]})]}),p.jsx("p",{className:"text-muted-foreground max-w-2xl",children:i.bio||"No bio available"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(g,{variant:"outline",size:"sm",children:[p.jsx(K,{className:"w-4 h-4 mr-2"}),"Share Profile"]}),p.jsxs(T,{open:ue,onOpenChange:he,children:[p.jsx(E,{asChild:!0,children:p.jsxs(g,{size:"sm",children:[p.jsx(Q,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})}),p.jsxs(A,{className:"max-w-2xl",children:[p.jsxs($,{children:[p.jsx(L,{children:"Edit Profile"}),p.jsx(O,{children:"Update your profile information and settings"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(z,{htmlFor:"display_name",children:"Display Name"}),p.jsx(N,{id:"display_name",value:pe.display_name,onChange:e=>je(c(n({},pe),{display_name:e.target.value})),placeholder:"Enter your display name"})]}),p.jsxs("div",{children:[p.jsx(z,{htmlFor:"bio",children:"Bio"}),p.jsx(q,{id:"bio",value:pe.bio,onChange:e=>je(c(n({},pe),{bio:e.target.value})),rows:4,placeholder:"Tell us about yourself..."})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx(z,{htmlFor:"location_city",children:"City"}),p.jsx(N,{id:"location_city",value:pe.location_city,onChange:e=>je(c(n({},pe),{location_city:e.target.value})),placeholder:"City"})]}),p.jsxs("div",{children:[p.jsx(z,{htmlFor:"location_state",children:"State"}),p.jsx(N,{id:"location_state",value:pe.location_state,onChange:e=>je(c(n({},pe),{location_state:e.target.value})),placeholder:"State"})]}),p.jsxs("div",{children:[p.jsx(z,{htmlFor:"location_country",children:"Country"}),p.jsx(N,{id:"location_country",value:pe.location_country,onChange:e=>je(c(n({},pe),{location_country:e.target.value})),placeholder:"Country"})]})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx(g,{variant:"outline",onClick:()=>he(!1),children:"Cancel"}),p.jsx(g,{onClick:()=>o(void 0,null,function*(){(yield me(pe)).success&&he(!1)}),disabled:V,children:V?p.jsxs(p.Fragment,{children:[p.jsx(Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})]})]})]})})]})})]}),l&&p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[p.jsx(y,{children:p.jsxs(b,{className:"p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-primary",children:l.eventsCreated}),p.jsx("div",{className:"text-sm text-muted-foreground",children:"Events Created"})]})}),p.jsx(y,{children:p.jsxs(b,{className:"p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-primary",children:l.postsCreated}),p.jsx("div",{className:"text-sm text-muted-foreground",children:"Posts Created"})]})}),p.jsx(y,{children:p.jsxs(b,{className:"p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-primary",children:l.communitiesJoined}),p.jsx("div",{className:"text-sm text-muted-foreground",children:"Communities"})]})}),p.jsx(y,{children:p.jsx(b,{className:"p-4 text-center",children:p.jsx(ge,{compact:!0,showDetails:!1})})})]}),p.jsxs(D,{defaultValue:"posts",className:"space-y-6",children:[p.jsxs(U,{className:"grid w-full grid-cols-4",children:[p.jsxs(B,{value:"posts",className:"flex items-center gap-2",children:[p.jsx(X,{className:"w-4 h-4"}),"Posts"]}),p.jsxs(B,{value:"bookings",className:"flex items-center gap-2",children:[p.jsx(W,{className:"w-4 h-4"}),"Bookings"]}),p.jsxs(B,{value:"communities",className:"flex items-center gap-2",children:[p.jsx(ee,{className:"w-4 h-4"}),"Communities"]}),p.jsxs(B,{value:"badges",className:"flex items-center gap-2",children:[p.jsx(R,{className:"w-4 h-4"}),"Badges"]})]}),p.jsxs(F,{value:"posts",className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Recent Posts"}),p.jsxs(g,{onClick:fe,className:"btn-community",children:[p.jsx(C,{className:"w-4 h-4 mr-2"}),"Create Post"]})]}),d.length>0?p.jsx("div",{className:"space-y-4",children:d.map(e=>p.jsx(y,{className:"discussion-card",children:p.jsx(b,{className:"p-6",children:p.jsxs("div",{className:"flex gap-4",children:[e.image&&p.jsx("img",{src:e.image,alt:e.title,className:"w-24 h-24 rounded-lg object-cover flex-shrink-0"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-semibold text-lg mb-2",children:e.title}),p.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:e.content}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(f,{className:"w-4 h-4"}),e.likes]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(X,{className:"w-4 h-4"}),e.comments]}),p.jsx("span",{children:e.date})]}),p.jsx(g,{variant:"ghost",size:"sm",children:p.jsx(se,{className:"w-4 h-4"})})]})]})]})})},e.id))}):p.jsx(y,{children:p.jsxs(b,{className:"p-8 text-center",children:[p.jsx(X,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Posts Yet"}),p.jsx("p",{className:"text-muted-foreground mb-4",children:"Start sharing your thoughts and experiences with the community!"}),p.jsxs(g,{onClick:fe,children:[p.jsx(C,{className:"w-4 h-4 mr-2"}),"Create Your First Post"]})]})})]}),p.jsxs(F,{value:"bookings",className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Upcoming Bookings"}),p.jsx(g,{className:"btn-event",asChild:!0,children:p.jsx("a",{href:"/events",children:"Browse Events"})})]}),m.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(e=>p.jsx(y,{className:"event-card",children:p.jsx(b,{className:"p-4",children:p.jsxs("div",{className:"flex gap-4",children:[e.eventImage&&p.jsx("img",{src:e.eventImage,alt:e.eventTitle,className:"w-20 h-20 rounded-lg object-cover"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-semibold mb-1",children:e.eventTitle}),p.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(W,{className:"w-3 h-3"}),e.date]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(te,{className:"w-3 h-3"}),e.time]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(G,{className:"w-3 h-3"}),e.location]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(w,{className:Ne(e.status),children:[ve(e.status),p.jsx("span",{className:"ml-1 capitalize",children:e.status})]}),p.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.tickets," ticket",e.tickets>1?"s":""]})]})]})]})})},e.id))}):p.jsx(y,{children:p.jsxs(b,{className:"p-8 text-center",children:[p.jsx(W,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Bookings Yet"}),p.jsx("p",{className:"text-muted-foreground mb-4",children:"Start exploring events and make your first booking!"}),p.jsx(g,{asChild:!0,children:p.jsx("a",{href:"/events",children:"Browse Events"})})]})})]}),p.jsxs(F,{value:"communities",className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"My Communities"}),p.jsx(g,{className:"btn-community",asChild:!0,children:p.jsx("a",{href:"/community",children:"Discover Communities"})})]}),M.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(e=>p.jsx(y,{className:"community-card",children:p.jsx(b,{className:"p-4",children:p.jsxs("div",{className:"flex gap-3",children:[p.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-lg object-cover"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-semibold mb-1",children:e.name}),p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(w,{className:ye(e.role),children:e.role}),p.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.members," members"]})]}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Joined ",e.joinedDate]})]})]})})},e.id))}):p.jsx(y,{children:p.jsxs(b,{className:"p-8 text-center",children:[p.jsx(ee,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Communities Yet"}),p.jsx("p",{className:"text-muted-foreground mb-4",children:"Join communities to connect with like-minded people!"}),p.jsx(g,{asChild:!0,children:p.jsx("a",{href:"/community",children:"Discover Communities"})})]})})]}),p.jsxs(F,{value:"badges",className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Achievement Badges"}),p.jsxs("span",{className:"text-sm text-muted-foreground",children:[I.length," badges earned"]})]}),I.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(e=>{const s=(e=>({Crown:ce,Shield:ne,Zap:Y,Trophy:R,Calendar:W,Users:ee,Star:_,Flame:le,TrendingUp:H}[e]||_))(e.icon);return p.jsx(y,{className:"trending-card",children:p.jsxs(b,{className:"p-6 text-center",children:[p.jsx("div",{className:`w-16 h-16 ${e.color} rounded-full flex items-center justify-center mx-auto mb-4`,children:p.jsx(s,{className:"w-8 h-8 text-white"})}),p.jsx("h3",{className:"font-semibold mb-2",children:e.name}),p.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})},e.id)})}):p.jsx(y,{children:p.jsxs(b,{className:"p-8 text-center",children:[p.jsx(R,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Badges Yet"}),p.jsx("p",{className:"text-muted-foreground mb-4",children:"Start engaging with the community to earn badges!"}),p.jsxs(g,{onClick:fe,children:[p.jsx(C,{className:"w-4 h-4 mr-2"}),"Create Your First Post"]})]})})]})]})]})})};export{je as default};
