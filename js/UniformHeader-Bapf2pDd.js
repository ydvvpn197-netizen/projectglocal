var h=(r,c,o)=>new Promise((p,a)=>{var j=s=>{try{i(o.next(s))}catch(n){a(n)}},t=s=>{try{i(o.throw(s))}catch(n){a(n)}},i=s=>s.done?p(s.value):Promise.resolve(s.value).then(j,t);i((o=o.apply(r,c)).next())});import{c as S,u as O,f as P,r as N,j as e,L as D,T as b,D as w,E as k,B as m,F as L,S as U}from"./main-jfCIwKxb.js";import{u as B}from"./useLocationManager-FvdWdASY.js";import{D as F,b as $,c as G,d as C,e as g}from"./index-DCmZQWeX.js";import{I as q}from"./index-DGobKVbi.js";import{N as Q,a as H}from"./databaseUtils-Cc-GydU0.js";import{S as J}from"./search-DIpOLffQ.js";import{M as K}from"./map-pin-B5hnRU36.js";import{U as M}from"./user-cZSM4iEh.js";import{L as V}from"./log-out-CxjypOOW.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=S("MapPinOff",[["path",{d:"M5.43 5.43A8.06 8.06 0 0 0 4 10c0 6 8 12 8 12a29.94 29.94 0 0 0 5-5",key:"12a8pk"}],["path",{d:"M19.18 13.52A8.66 8.66 0 0 0 20 10a8 8 0 0 0-8-8 7.88 7.88 0 0 0-3.52.82",key:"1r9f6y"}],["path",{d:"M9.13 9.13A2.78 2.78 0 0 0 9 10a3 3 0 0 0 3 3 2.78 2.78 0 0 0 .87-.13",key:"erynq7"}],["path",{d:"M14.9 9.25a3 3 0 0 0-2.15-2.16",key:"1hwwmx"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=S("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),l=N.memo(({route:r,label:c})=>e.jsx(D,{to:r,className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:c}));l.displayName="NavLink";function oe({showLocationButton:r=!0,showAuthButtons:c=!1,showSearch:o=!0,className:p=""}){var y;const{user:a,signOut:j}=O(),t=P(),{location:i,enabled:s,loading:n,detectLocation:T,refreshLocation:v}=B(),[u,x]=N.useState(!1),[f,I]=N.useState(""),z=()=>h(this,null,function*(){x(!0);try{s?yield v():yield T()}finally{x(!1)}}),E=()=>h(this,null,function*(){x(!0);try{yield v()}finally{x(!1)}}),R=d=>{d.preventDefault(),f.trim()&&t(`/discover?search=${encodeURIComponent(f.trim())}`)},A=()=>h(this,null,function*(){try{yield j(),t("/")}catch(d){console.error("Error signing out:",d)}});return e.jsx("header",{className:`border-b bg-background/80 backdrop-blur-sm sticky top-0 z-50 ${p}`,children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-3 flex-shrink-0",children:e.jsxs(D,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[e.jsx("img",{src:"/logo.png",alt:"Glocal Logo",className:"w-8 h-8 object-contain"}),e.jsx("span",{className:"text-xl font-bold hidden sm:inline",children:"Glocal"})]})}),a&&e.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[e.jsx(l,{route:"/feed",label:"Feed"}),e.jsx(l,{route:"/discover",label:"Discover"}),e.jsx(l,{route:"/events",label:"Events"}),e.jsx(l,{route:"/community",label:"Community"}),e.jsx(l,{route:"/book-artist",label:"Book Artists"})]}),a&&o&&e.jsx("form",{onSubmit:R,className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(q,{placeholder:"Search artists, events, posts...",value:f,onChange:d=>I(d.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r&&a&&e.jsx(b,{children:e.jsxs(w,{children:[e.jsx(k,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:z,disabled:u||n,className:"relative",children:u||n?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}):s?e.jsx(K,{className:"h-4 w-4"}):e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(L,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:s?"Location Enabled":"Location Disabled"}),s&&i&&e.jsx("p",{className:"text-xs text-muted-foreground",children:i.name||`${i.lat.toFixed(4)}, ${i.lng.toFixed(4)}`})]})})]})}),r&&a&&s&&e.jsx(b,{children:e.jsxs(w,{children:[e.jsx(k,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:E,disabled:u||n,children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(L,{children:e.jsx("p",{children:"Refresh location"})})]})}),a?e.jsx(Q,{}):e.jsx(H,{}),c&&!a&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>t("/signin"),children:"Sign In"}),e.jsx(m,{size:"sm",onClick:()=>t("/signin"),children:"Get Started"})]}),a&&e.jsxs(F,{children:[e.jsx($,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",className:"relative",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",className:"w-56",children:[e.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:e.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[e.jsx("p",{className:"font-medium",children:(y=a.email)==null?void 0:y.split("@")[0]}),e.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:a.email})]})}),e.jsx(C,{}),e.jsxs(g,{onClick:()=>t("/profile"),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(g,{onClick:()=>t("/settings"),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsx(C,{}),e.jsxs(g,{onClick:A,children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]})]})]})})})}export{oe as U};
