var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(n,t,o)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,s=(e,n)=>{for(var t in n||(n={}))r.call(n,t)&&i(e,t,n[t]);if(o)for(var t of o(n))a.call(n,t)&&i(e,t,n[t]);return e},l=(e,o)=>n(e,t(o)),c=(e,n)=>{var t={};for(var i in e)r.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&o)for(var i of o(e))n.indexOf(i)<0&&a.call(e,i)&&(t[i]=e[i]);return t},u=(e,n,t)=>new Promise((o,r)=>{var a=e=>{try{s(t.next(e))}catch(n){r(n)}},i=e=>{try{s(t.throw(e))}catch(n){r(n)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((t=t.apply(e,n)).next())});import{c as d,n as p,r as f,V as m,a2 as h,$ as v,j as g,a3 as w,a4 as _,q as y,a5 as b,o as x,p as N,P as D,a6 as M,a7 as k,a8 as R,a9 as C,aa as j,ab as P,l as O,a1 as useId,R as React,e as I,s as S,u as E}from"./main-6fHUpRzT.js";import{u as A}from"./index-BlbmBgSN.js";import{h as T,u as F,R as q,F as L}from"./Combination-Bb2n9b59.js";import{d as K,I as G,R as V}from"./tabs-BNobDGc4.js";import{C as $}from"./check-BVB7WkBF.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=d("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),B=d("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var z=["Enter"," "],Y=["ArrowUp","PageDown","End"],X=["ArrowDown","PageUp","Home",...Y],W={ltr:[...z,"ArrowRight"],rtl:[...z,"ArrowLeft"]},H={ltr:["ArrowLeft"],rtl:["ArrowRight"]},J="Menu",[Z,Q,ee]=m(J),[ne,te]=p(J,[ee,h,K]),oe=h(),re=K(),[ae,ie]=ne(J),[se,le]=ne(J),ce=e=>{const{__scopeMenu:n,open:t=!1,children:o,dir:r,onOpenChange:a,modal:i=!0}=e,c=oe(n),[u,d]=f.useState(null),p=f.useRef(!1),m=v(a),h=A(r);return f.useEffect(()=>{const e=()=>{p.current=!0,document.addEventListener("pointerdown",n,{capture:!0,once:!0}),document.addEventListener("pointermove",n,{capture:!0,once:!0})},n=()=>p.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",n,{capture:!0}),document.removeEventListener("pointermove",n,{capture:!0})}},[]),g.jsx(w,l(s({},c),{children:g.jsx(ae,{scope:n,open:t,onOpenChange:m,content:u,onContentChange:d,children:g.jsx(se,{scope:n,onClose:f.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:p,dir:h,modal:i,children:o})})}))};ce.displayName=J;var ue=f.forwardRef((e,n)=>{const t=e,{__scopeMenu:o}=t,r=c(t,["__scopeMenu"]),a=oe(o);return g.jsx(_,l(s(s({},a),r),{ref:n}))});ue.displayName="MenuAnchor";var de="MenuPortal",[pe,fe]=ne(de,{forceMount:void 0}),me=e=>{const{__scopeMenu:n,forceMount:t,children:o,container:r}=e,a=ie(de,n);return g.jsx(pe,{scope:n,forceMount:t,children:g.jsx(y,{present:t||a.open,children:g.jsx(b,{asChild:!0,container:r,children:o})})})};me.displayName=de;var he="MenuContent",[ve,ge]=ne(he),we=f.forwardRef((e,n)=>{const t=fe(he,e.__scopeMenu),o=e,{forceMount:r=t.forceMount}=o,a=c(o,["forceMount"]),i=ie(he,e.__scopeMenu),u=le(he,e.__scopeMenu);return g.jsx(Z.Provider,{scope:e.__scopeMenu,children:g.jsx(y,{present:r||i.open,children:g.jsx(Z.Slot,{scope:e.__scopeMenu,children:u.modal?g.jsx(_e,l(s({},a),{ref:n})):g.jsx(ye,l(s({},a),{ref:n}))})})})}),_e=f.forwardRef((e,n)=>{const t=ie(he,e.__scopeMenu),o=f.useRef(null),r=x(n,o);return f.useEffect(()=>{const e=o.current;if(e)return T(e)},[]),g.jsx(xe,l(s({},e),{ref:r,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:N(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)}))}),ye=f.forwardRef((e,n)=>{const t=ie(he,e.__scopeMenu);return g.jsx(xe,l(s({},e),{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)}))}),be=k("MenuContent.ScrollLock"),xe=f.forwardRef((e,n)=>{const t=e,{__scopeMenu:o,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:u,disableOutsidePointerEvents:d,onEntryFocus:p,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:v,onInteractOutside:w,onDismiss:_,disableOutsideScroll:y}=t,b=c(t,["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"]),D=ie(he,o),M=le(he,o),k=oe(o),j=re(o),P=Q(o),[O,I]=f.useState(null),S=f.useRef(null),E=x(n,S,D.onContentChange),A=f.useRef(0),T=f.useRef(""),K=f.useRef(0),G=f.useRef(null),$=f.useRef("right"),U=f.useRef(0),B=y?q:f.Fragment,z=y?{as:be,allowPinchZoom:!0}:void 0,W=e=>{var n,t;const o=T.current+e,r=P().filter(e=>!e.disabled),a=document.activeElement,i=null==(n=r.find(e=>e.ref.current===a))?void 0:n.textValue,s=function(e,n,t){const o=n.length>1&&Array.from(n).every(e=>e===n[0]),r=o?n[0]:n,a=t?e.indexOf(t):-1;let i=function(e,n){return e.map((t,o)=>e[(n+o)%e.length])}(e,Math.max(a,0));1===r.length&&(i=i.filter(e=>e!==t));const s=i.find(e=>e.toLowerCase().startsWith(r.toLowerCase()));return s!==t?s:void 0}(r.map(e=>e.textValue),o,i),l=null==(t=r.find(e=>e.textValue===s))?void 0:t.ref.current;!function e(n){T.current=n,window.clearTimeout(A.current),""!==n&&(A.current=window.setTimeout(()=>e(""),1e3))}(o),l&&setTimeout(()=>l.focus())};f.useEffect(()=>()=>window.clearTimeout(A.current),[]),F();const H=f.useCallback(e=>{var n,t;return $.current===(null==(n=G.current)?void 0:n.side)&&function(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return function(e,n){const{x:t,y:o}=e;let r=!1;for(let a=0,i=n.length-1;a<n.length;i=a++){const e=n[a],s=n[i],l=e.x,c=e.y,u=s.x,d=s.y;c>o!=d>o&&t<(u-l)*(o-c)/(d-c)+l&&(r=!r)}return r}(t,n)}(e,null==(t=G.current)?void 0:t.area)},[]);return g.jsx(ve,{scope:o,searchRef:T,onItemEnter:f.useCallback(e=>{H(e)&&e.preventDefault()},[H]),onItemLeave:f.useCallback(e=>{var n;H(e)||(null==(n=S.current)||n.focus(),I(null))},[H]),onTriggerLeave:f.useCallback(e=>{H(e)&&e.preventDefault()},[H]),pointerGraceTimerRef:K,onPointerGraceIntentChange:f.useCallback(e=>{G.current=e},[]),children:g.jsx(B,l(s({},z),{children:g.jsx(L,{asChild:!0,trapped:a,onMountAutoFocus:N(i,e=>{var n;e.preventDefault(),null==(n=S.current)||n.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:g.jsx(R,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:v,onInteractOutside:w,onDismiss:_,children:g.jsx(V,l(s({asChild:!0},j),{dir:M.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:I,onEntryFocus:N(p,e=>{M.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(C,l(s(s({role:"menu","aria-orientation":"vertical","data-state":Xe(D.open),"data-radix-menu-content":"",dir:M.dir},k),b),{ref:E,style:s({outline:"none"},b.style),onKeyDown:N(b.onKeyDown,e=>{const n=e.target.closest("[data-radix-menu-content]")===e.currentTarget,t=e.ctrlKey||e.altKey||e.metaKey,o=1===e.key.length;n&&("Tab"===e.key&&e.preventDefault(),!t&&o&&W(e.key));const r=S.current;if(e.target!==r)return;if(!X.includes(e.key))return;e.preventDefault();const a=P().filter(e=>!e.disabled).map(e=>e.ref.current);Y.includes(e.key)&&a.reverse(),function(e){const n=document.activeElement;for(const t of e){if(t===n)return;if(t.focus(),document.activeElement!==n)return}}(a)}),onBlur:N(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(A.current),T.current="")}),onPointerMove:N(e.onPointerMove,Je(e=>{const n=e.target,t=U.current!==e.clientX;if(e.currentTarget.contains(n)&&t){const n=e.clientX>U.current?"right":"left";$.current=n,U.current=e.clientX}}))}))}))})})}))})});we.displayName=he;var Ne=f.forwardRef((e,n)=>{const t=e,{__scopeMenu:o}=t,r=c(t,["__scopeMenu"]);return g.jsx(D.div,l(s({role:"group"},r),{ref:n}))});Ne.displayName="MenuGroup";var De=f.forwardRef((e,n)=>{const t=e,{__scopeMenu:o}=t,r=c(t,["__scopeMenu"]);return g.jsx(D.div,l(s({},r),{ref:n}))});De.displayName="MenuLabel";var Me="MenuItem",ke="menu.itemSelect",Re=f.forwardRef((e,n)=>{const t=e,{disabled:o=!1,onSelect:r}=t,a=c(t,["disabled","onSelect"]),i=f.useRef(null),u=le(Me,e.__scopeMenu),d=ge(Me,e.__scopeMenu),p=x(n,i),m=f.useRef(!1);return g.jsx(Ce,l(s({},a),{ref:p,disabled:o,onClick:N(e.onClick,()=>{const e=i.current;if(!o&&e){const n=new CustomEvent(ke,{bubbles:!0,cancelable:!0});e.addEventListener(ke,e=>null==r?void 0:r(e),{once:!0}),M(e,n),n.defaultPrevented?m.current=!1:u.onClose()}}),onPointerDown:n=>{var t;null==(t=e.onPointerDown)||t.call(e,n),m.current=!0},onPointerUp:N(e.onPointerUp,e=>{var n;m.current||null==(n=e.currentTarget)||n.click()}),onKeyDown:N(e.onKeyDown,e=>{const n=""!==d.searchRef.current;o||n&&" "===e.key||z.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})}))});Re.displayName=Me;var Ce=f.forwardRef((e,n)=>{const t=e,{__scopeMenu:o,disabled:r=!1,textValue:a}=t,i=c(t,["__scopeMenu","disabled","textValue"]),u=ge(Me,o),d=re(o),p=f.useRef(null),m=x(n,p),[h,v]=f.useState(!1),[w,_]=f.useState("");return f.useEffect(()=>{var e;const n=p.current;n&&_((null!=(e=n.textContent)?e:"").trim())},[i.children]),g.jsx(Z.ItemSlot,{scope:o,disabled:r,textValue:null!=a?a:w,children:g.jsx(G,l(s({asChild:!0},d),{focusable:!r,children:g.jsx(D.div,l(s({role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},i),{ref:m,onPointerMove:N(e.onPointerMove,Je(e=>{if(r)u.onItemLeave(e);else if(u.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:N(e.onPointerLeave,Je(e=>u.onItemLeave(e))),onFocus:N(e.onFocus,()=>v(!0)),onBlur:N(e.onBlur,()=>v(!1))}))}))})}),je=f.forwardRef((e,n)=>{const t=e,{checked:o=!1,onCheckedChange:r}=t,a=c(t,["checked","onCheckedChange"]);return g.jsx(Fe,{scope:e.__scopeMenu,checked:o,children:g.jsx(Re,l(s({role:"menuitemcheckbox","aria-checked":We(o)?"mixed":o},a),{ref:n,"data-state":He(o),onSelect:N(a.onSelect,()=>null==r?void 0:r(!!We(o)||!o),{checkForDefaultPrevented:!1})}))})});je.displayName="MenuCheckboxItem";var Pe="MenuRadioGroup",[Oe,Ie]=ne(Pe,{value:void 0,onValueChange:()=>{}}),Se=f.forwardRef((e,n)=>{const t=e,{value:o,onValueChange:r}=t,a=c(t,["value","onValueChange"]),i=v(r);return g.jsx(Oe,{scope:e.__scopeMenu,value:o,onValueChange:i,children:g.jsx(Ne,l(s({},a),{ref:n}))})});Se.displayName=Pe;var Ee="MenuRadioItem",Ae=f.forwardRef((e,n)=>{const t=e,{value:o}=t,r=c(t,["value"]),a=Ie(Ee,e.__scopeMenu),i=o===a.value;return g.jsx(Fe,{scope:e.__scopeMenu,checked:i,children:g.jsx(Re,l(s({role:"menuitemradio","aria-checked":i},r),{ref:n,"data-state":He(i),onSelect:N(r.onSelect,()=>{var e;return null==(e=a.onValueChange)?void 0:e.call(a,o)},{checkForDefaultPrevented:!1})}))})});Ae.displayName=Ee;var Te="MenuItemIndicator",[Fe,qe]=ne(Te,{checked:!1}),Le=f.forwardRef((e,n)=>{const t=e,{__scopeMenu:o,forceMount:r}=t,a=c(t,["__scopeMenu","forceMount"]),i=qe(Te,o);return g.jsx(y,{present:r||We(i.checked)||!0===i.checked,children:g.jsx(D.span,l(s({},a),{ref:n,"data-state":He(i.checked)}))})});Le.displayName=Te;var Ke=f.forwardRef((e,n)=>{const t=e,{__scopeMenu:o}=t,r=c(t,["__scopeMenu"]);return g.jsx(D.div,l(s({role:"separator","aria-orientation":"horizontal"},r),{ref:n}))});Ke.displayName="MenuSeparator";var Ge=f.forwardRef((e,n)=>{const t=e,{__scopeMenu:o}=t,r=c(t,["__scopeMenu"]),a=oe(o);return g.jsx(j,l(s(s({},a),r),{ref:n}))});Ge.displayName="MenuArrow";var[Ve,$e]=ne("MenuSub"),Ue="MenuSubTrigger",Be=f.forwardRef((e,n)=>{const t=ie(Ue,e.__scopeMenu),o=le(Ue,e.__scopeMenu),r=$e(Ue,e.__scopeMenu),a=ge(Ue,e.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=a,d={__scopeMenu:e.__scopeMenu},p=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>p,[p]),f.useEffect(()=>{const e=c.current;return()=>{window.clearTimeout(e),u(null)}},[c,u]),g.jsx(ue,l(s({asChild:!0},d),{children:g.jsx(Ce,l(s({id:r.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":r.contentId,"data-state":Xe(t.open)},e),{ref:P(n,r.onTriggerChange),onClick:n=>{var o;null==(o=e.onClick)||o.call(e,n),e.disabled||n.defaultPrevented||(n.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:N(e.onPointerMove,Je(n=>{a.onItemEnter(n),n.defaultPrevented||e.disabled||t.open||i.current||(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{t.onOpenChange(!0),p()},100))})),onPointerLeave:N(e.onPointerLeave,Je(e=>{var n,o;p();const r=null==(n=t.content)?void 0:n.getBoundingClientRect();if(r){const n=null==(o=t.content)?void 0:o.dataset.side,i="right"===n,s=i?-5:5,l=r[i?"left":"right"],u=r[i?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+s,y:e.clientY},{x:l,y:r.top},{x:u,y:r.top},{x:u,y:r.bottom},{x:l,y:r.bottom}],side:n}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:N(e.onKeyDown,n=>{var r;const i=""!==a.searchRef.current;e.disabled||i&&" "===n.key||W[o.dir].includes(n.key)&&(t.onOpenChange(!0),null==(r=t.content)||r.focus(),n.preventDefault())})}))}))});Be.displayName=Ue;var ze="MenuSubContent",Ye=f.forwardRef((e,n)=>{const t=fe(he,e.__scopeMenu),o=e,{forceMount:r=t.forceMount}=o,a=c(o,["forceMount"]),i=ie(he,e.__scopeMenu),u=le(he,e.__scopeMenu),d=$e(ze,e.__scopeMenu),p=f.useRef(null),m=x(n,p);return g.jsx(Z.Provider,{scope:e.__scopeMenu,children:g.jsx(y,{present:r||i.open,children:g.jsx(Z.Slot,{scope:e.__scopeMenu,children:g.jsx(xe,l(s({id:d.contentId,"aria-labelledby":d.triggerId},a),{ref:m,align:"start",side:"rtl"===u.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var n;u.isUsingKeyboardRef.current&&(null==(n=p.current)||n.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:N(e.onFocusOutside,e=>{e.target!==d.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:N(e.onEscapeKeyDown,e=>{u.onClose(),e.preventDefault()}),onKeyDown:N(e.onKeyDown,e=>{var n;const t=e.currentTarget.contains(e.target),o=H[u.dir].includes(e.key);t&&o&&(i.onOpenChange(!1),null==(n=d.trigger)||n.focus(),e.preventDefault())})}))})})})});function Xe(e){return e?"open":"closed"}function We(e){return"indeterminate"===e}function He(e){return We(e)?"indeterminate":e?"checked":"unchecked"}function Je(e){return n=>"mouse"===n.pointerType?e(n):void 0}Ye.displayName=ze;var Ze=ce,Qe=ue,en=me,nn=we,tn=Ne,on=De,rn=Re,an=je,sn=Se,ln=Ae,cn=Le,un=Ke,dn=Ge,pn=Be,fn=Ye,mn="DropdownMenu",[hn,vn]=p(mn,[te]),gn=te(),[wn,_n]=hn(mn),yn=e=>{const{__scopeDropdownMenu:n,children:t,dir:o,open:r,defaultOpen:a,onOpenChange:i,modal:c=!0}=e,u=gn(n),d=f.useRef(null),[p,m]=O({prop:r,defaultProp:null!=a&&a,onChange:i,caller:mn});return g.jsx(wn,{scope:n,triggerId:useId(),triggerRef:d,contentId:useId(),open:p,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(e=>!e),[m]),modal:c,children:g.jsx(Ze,l(s({},u),{open:p,onOpenChange:m,dir:o,modal:c,children:t}))})};yn.displayName=mn;var bn="DropdownMenuTrigger",xn=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o,disabled:r=!1}=t,a=c(t,["__scopeDropdownMenu","disabled"]),i=_n(bn,o),u=gn(o);return g.jsx(Qe,l(s({asChild:!0},u),{children:g.jsx(D.button,l(s({type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},a),{ref:P(n,i.triggerRef),onPointerDown:N(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(i.onOpenToggle(),i.open||e.preventDefault())}),onKeyDown:N(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&i.onOpenToggle(),"ArrowDown"===e.key&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})}))}))});xn.displayName=bn;var Nn=e=>{const n=e,{__scopeDropdownMenu:t}=n,o=c(n,["__scopeDropdownMenu"]),r=gn(t);return g.jsx(en,s(s({},r),o))};Nn.displayName="DropdownMenuPortal";var Dn="DropdownMenuContent",Mn=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=_n(Dn,o),i=gn(o),u=f.useRef(!1);return g.jsx(nn,l(s(s({id:a.contentId,"aria-labelledby":a.triggerId},i),r),{ref:n,onCloseAutoFocus:N(e.onCloseAutoFocus,e=>{var n;u.current||null==(n=a.triggerRef.current)||n.focus(),u.current=!1,e.preventDefault()}),onInteractOutside:N(e.onInteractOutside,e=>{const n=e.detail.originalEvent,t=0===n.button&&!0===n.ctrlKey,o=2===n.button||t;a.modal&&!o||(u.current=!0)}),style:s(s({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});Mn.displayName=Dn;f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(tn,l(s(s({},a),r),{ref:n}))}).displayName="DropdownMenuGroup";var kn=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(on,l(s(s({},a),r),{ref:n}))});kn.displayName="DropdownMenuLabel";var Rn=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(rn,l(s(s({},a),r),{ref:n}))});Rn.displayName="DropdownMenuItem";var Cn=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(an,l(s(s({},a),r),{ref:n}))});Cn.displayName="DropdownMenuCheckboxItem";f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(sn,l(s(s({},a),r),{ref:n}))}).displayName="DropdownMenuRadioGroup";var jn=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(ln,l(s(s({},a),r),{ref:n}))});jn.displayName="DropdownMenuRadioItem";var Pn=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(cn,l(s(s({},a),r),{ref:n}))});Pn.displayName="DropdownMenuItemIndicator";var On=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(un,l(s(s({},a),r),{ref:n}))});On.displayName="DropdownMenuSeparator";f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(dn,l(s(s({},a),r),{ref:n}))}).displayName="DropdownMenuArrow";var In=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(pn,l(s(s({},a),r),{ref:n}))});In.displayName="DropdownMenuSubTrigger";var Sn=f.forwardRef((e,n)=>{const t=e,{__scopeDropdownMenu:o}=t,r=c(t,["__scopeDropdownMenu"]),a=gn(o);return g.jsx(fn,l(s(s({},a),r),{ref:n,style:s(s({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});Sn.displayName="DropdownMenuSubContent";var En=Nn,An=Mn,Tn=kn,Fn=Rn,qn=Cn,Ln=jn,Kn=Pn,Gn=On,Vn=In,$n=Sn;const Un=yn,Bn=xn;React.forwardRef((e,n)=>{var t=e,{className:o,inset:r,children:a}=t,i=c(t,["className","inset","children"]);return g.jsxs(Vn,l(s({ref:n,className:I("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",o)},i),{children:[a,g.jsx(U,{className:"ml-auto h-4 w-4"})]}))}).displayName=Vn.displayName;React.forwardRef((e,n)=>{var t=e,{className:o}=t,r=c(t,["className"]);return g.jsx($n,s({ref:n,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o)},r))}).displayName=$n.displayName;const zn=React.forwardRef((e,n)=>{var t=e,{className:o,sideOffset:r=4}=t,a=c(t,["className","sideOffset"]);return g.jsx(En,{children:g.jsx(An,s({ref:n,sideOffset:r,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o)},a))})});zn.displayName=An.displayName;const Yn=React.forwardRef((e,n)=>{var t=e,{className:o,inset:r}=t,a=c(t,["className","inset"]);return g.jsx(Fn,s({ref:n,className:I("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",o)},a))});Yn.displayName=Fn.displayName;React.forwardRef((e,n)=>{var t=e,{className:o,children:r,checked:a}=t,i=c(t,["className","children","checked"]);return g.jsxs(qn,l(s({ref:n,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),checked:a},i),{children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(Kn,{children:g.jsx($,{className:"h-4 w-4"})})}),r]}))}).displayName=qn.displayName;React.forwardRef((e,n)=>{var t=e,{className:o,children:r}=t,a=c(t,["className","children"]);return g.jsxs(Ln,l(s({ref:n,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o)},a),{children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(Kn,{children:g.jsx(B,{className:"h-2 w-2 fill-current"})})}),r]}))}).displayName=Ln.displayName;const Xn=React.forwardRef((e,n)=>{var t=e,{className:o,inset:r}=t,a=c(t,["className","inset"]);return g.jsx(Tn,s({ref:n,className:I("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",o)},a))});Xn.displayName=Tn.displayName;const Wn=React.forwardRef((e,n)=>{var t=e,{className:o}=t,r=c(t,["className"]);return g.jsx(Gn,s({ref:n,className:I("-mx-1 my-1 h-px bg-muted",o)},r))});Wn.displayName=Gn.displayName;const Hn=[{id:"fallback-1",title:"Welcome to The Glocal! 🎉",message:"Join our community to discover amazing local events, connect with artists, and build meaningful relationships with your neighbors.",type:"announcement",priority:"high",created_at:(new Date).toISOString(),is_active:!0,target_audience:"all",action_url:"/signin",action_text:"Get Started"},{id:"fallback-2",title:"New Feature: Artist Booking System",message:"You can now book local artists directly through our platform. Support local talent and make your events unforgettable!",type:"system",priority:"medium",created_at:(new Date).toISOString(),is_active:!0,target_audience:"all",action_url:"/book-artist",action_text:"Book an Artist"}];const Jn=new class{constructor(){((e,n,t)=>{i(e,"symbol"!=typeof n?n+"":n,t)})(this,"isDatabaseAvailable",!0)}checkDatabaseAvailability(){return u(this,null,function*(){if(!this.isDatabaseAvailable)return!1;try{const{error:e}=yield S.from("general_notifications").select("id").limit(1);return!e||"42P01"!==e.code||(this.isDatabaseAvailable=!1,!1)}catch(e){return this.isDatabaseAvailable=!1,!1}})}getGeneralNotifications(e=10){return u(this,null,function*(){try{if(!(yield this.checkDatabaseAvailability()))return Hn;const{data:n,error:t}=yield S.from("general_notifications").select("*").eq("is_active",!0).lte("created_at",(new Date).toISOString()).or(`expires_at.is.null,expires_at.gt.${(new Date).toISOString()}`).order("created_at",{ascending:!1}).limit(e);return t?Hn:n||Hn}catch(n){return Hn}})}getPersonalNotifications(e,n=20){return u(this,null,function*(){if(!e)return[];try{if(!(yield this.checkDatabaseAvailability()))return[];const{data:t,error:o}=yield S.from("personal_notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(n);return o?[]:t||[]}catch(t){return[]}})}getNotificationCounts(e){return u(this,null,function*(){if(!e)return{general:0,personal:0,total:0};try{if(!(yield this.checkDatabaseAvailability()))return{general:0,personal:0,total:0};let t=0,o=0;try{const{count:e}=yield S.from("general_notifications").select("*",{count:"exact",head:!0}).eq("is_active",!0).lte("created_at",(new Date).toISOString()).or(`expires_at.is.null,expires_at.gt.${(new Date).toISOString()}`);t=e||0}catch(n){t=0}try{const{count:n}=yield S.from("personal_notifications").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("read",!1);o=n||0}catch(n){o=0}return{general:t,personal:o,total:t+o}}catch(n){return{general:0,personal:0,total:0}}})}markAsRead(e,n){return u(this,null,function*(){if(!n)return!1;try{if(!(yield this.checkDatabaseAvailability()))return!0;const{error:t}=yield S.from("personal_notifications").update({read:!0}).eq("id",e).eq("user_id",n);return!t}catch(t){return!1}})}markAllAsRead(e){return u(this,null,function*(){if(!e)return!1;try{if(!(yield this.checkDatabaseAvailability()))return!0;const{error:n}=yield S.from("personal_notifications").update({read:!0}).eq("user_id",e).eq("read",!1);return!n}catch(n){return!1}})}deleteNotification(e,n){return u(this,null,function*(){if(!n)return!1;try{if(!(yield this.checkDatabaseAvailability()))return!0;const{error:t}=yield S.from("personal_notifications").delete().eq("id",e).eq("user_id",n);return!t}catch(t){return!1}})}createPersonalNotification(e,n,t,o,r,a,i){return u(this,null,function*(){if(!e)return null;try{if(!(yield this.checkDatabaseAvailability()))return null;const{data:s,error:l}=yield S.from("personal_notifications").insert({user_id:e,title:n,message:t,type:o,data:r,action_url:a,action_text:i}).select("id").single();return l?null:s.id}catch(s){return null}})}subscribeToNotifications(e,n){if(!e)return()=>{};try{if(!this.isDatabaseAvailable)return()=>{};const t=S.channel(`personal_notifications_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"personal_notifications",filter:`user_id=eq.${e}`},n).subscribe(),o=S.channel("general_notifications").on("postgres_changes",{event:"*",schema:"public",table:"general_notifications"},n).subscribe();return()=>{t.unsubscribe(),o.unsubscribe()}}catch(t){return()=>{}}}createNotification(e){return u(this,null,function*(){return this.createPersonalNotification(e.user_id,e.title,e.message,e.type,e.data,e.action_url,e.action_text)})}createBookingRequestNotification(e,n,t){return u(this,null,function*(){return this.createPersonalNotification(e,"New Booking Request",`You have a new booking request for ${t.event_type} on ${new Date(t.event_date).toLocaleDateString()}`,"booking_request",{bookingData:t,clientId:n},"/artist-dashboard","View Request")})}createBookingResponseNotification(e,n,t,o){return u(this,null,function*(){const r="accepted"===t?"accepted":"declined";return this.createPersonalNotification(e,`Booking ${r.charAt(0).toUpperCase()+r.slice(1)}`,`Your booking request for ${o.event_type} has been ${r}`,`booking_${t}`,{bookingData:o,artistId:n},"/bookings","View Details")})}createNewFollowerNotification(e,n){return u(this,null,function*(){return this.createPersonalNotification(e,"New Follower","You have a new follower!","new_follower",{followerId:n},"/profile","View Profile")})}createMessageRequestNotification(e,n,t){return u(this,null,function*(){return this.createPersonalNotification(e,"New Message","You have received a new message","message_request",{senderId:n,conversationId:t},"/messages","View Message")})}createEventReminderNotification(e,n){return u(this,null,function*(){return this.createPersonalNotification(e,"Event Reminder",`Don't forget about ${n.title} tomorrow!`,"event_reminder",{eventData:n},`/events/${n.id}`,"View Event")})}createDiscussionRequestNotification(e,n,t){return u(this,null,function*(){return this.createPersonalNotification(e,"New Discussion Request","Someone has requested to start a discussion with you","discussion_request",{discussionData:t,userId:n},"/artist-dashboard","Review Request")})}},Zn=()=>{const{user:e}=E(),[n,t]=f.useState({generalNotifications:[],personalNotifications:[],counts:{general:0,personal:0,total:0},loading:!1,error:null}),o=f.useCallback(()=>u(void 0,null,function*(){t(e=>l(s({},e),{loading:!0,error:null}));try{if(!(null==e?void 0:e.id))return void t(e=>l(s({},e),{generalNotifications:[],personalNotifications:[],counts:{general:0,personal:0,total:0},loading:!1}));const[n,o,r]=yield Promise.all([Jn.getGeneralNotifications(),Jn.getPersonalNotifications(e.id),Jn.getNotificationCounts(e.id)]);t(e=>l(s({},e),{generalNotifications:n,personalNotifications:o,counts:r,loading:!1}))}catch(n){t(e=>l(s({},e),{loading:!1,error:n instanceof Error?n.message:"Failed to load notifications"}))}}),[null==e?void 0:e.id]),r=f.useCallback(n=>u(void 0,null,function*(){if(null==e?void 0:e.id)try{(yield Jn.markAsRead(n,e.id))&&t(e=>{const t=e.personalNotifications.map(e=>e.id===n?l(s({},e),{read:!0}):e),o=t.filter(e=>!e.read).length;return l(s({},e),{personalNotifications:t,counts:l(s({},e.counts),{personal:o,total:e.counts.general+o})})})}catch(o){}}),[null==e?void 0:e.id]),a=f.useCallback(()=>u(void 0,null,function*(){if(null==e?void 0:e.id)try{(yield Jn.markAllAsRead(e.id))&&t(e=>{const n=e.personalNotifications.map(e=>l(s({},e),{read:!0})),t=n.filter(e=>!e.read).length;return l(s({},e),{personalNotifications:n,counts:l(s({},e.counts),{personal:t,total:e.counts.general+t})})})}catch(n){}}),[null==e?void 0:e.id]),i=f.useCallback(n=>u(void 0,null,function*(){if(null==e?void 0:e.id)try{(yield Jn.deleteNotification(n,e.id))&&t(e=>{const t=e.personalNotifications.filter(e=>e.id!==n),o=t.filter(e=>!e.read).length;return l(s({},e),{personalNotifications:t,counts:l(s({},e.counts),{personal:o,total:e.counts.general+o})})})}catch(o){}}),[null==e?void 0:e.id]),c=f.useCallback(()=>{o()},[o]),d=f.useCallback(()=>u(void 0,null,function*(){if(null==e?void 0:e.id)try{const n=yield Jn.getNotificationCounts(e.id);0,t(e=>l(s({},e),{counts:n}))}catch(n){}}),[null==e?void 0:e.id]),p=f.useCallback(n=>u(void 0,null,function*(){if(null==e?void 0:e.id)try{const e=yield Jn.createNotification(n);if(e)return yield o(),e}catch(t){throw t}}),[null==e?void 0:e.id,o]);f.useEffect(()=>{if(o(),!(null==e?void 0:e.id))return;const n=setInterval(()=>{d()},3e4),r=Jn.subscribeToNotifications(e.id,e=>{"INSERT"===e.eventType?"personal_notifications"===e.table?t(n=>l(s({},n),{personalNotifications:[e.new,...n.personalNotifications],counts:l(s({},n.counts),{personal:n.counts.personal+1,total:n.counts.total+1})})):"general_notifications"===e.table&&t(n=>l(s({},n),{generalNotifications:[e.new,...n.generalNotifications],counts:l(s({},n.counts),{general:n.counts.general+1,total:n.counts.total+1})})):"UPDATE"===e.eventType?"personal_notifications"===e.table&&t(n=>{const t=n.personalNotifications.map(n=>n.id===e.new.id?e.new:n),o=t.filter(e=>!e.read).length;return l(s({},n),{personalNotifications:t,counts:l(s({},n.counts),{personal:o,total:n.counts.general+o})})}):"DELETE"===e.eventType&&"personal_notifications"===e.table&&t(n=>{const t=n.personalNotifications.filter(n=>n.id!==e.old.id),o=t.filter(e=>!e.read).length;return l(s({},n),{personalNotifications:t,counts:l(s({},n.counts),{personal:o,total:n.counts.general+o})})})});return()=>{r(),clearInterval(n)}},[null==e?void 0:e.id,o,d]);const m=f.useCallback(()=>[...n.generalNotifications.map(e=>l(s({},e),{isGeneral:!0,read:!1})),...n.personalNotifications.map(e=>l(s({},e),{isGeneral:!1}))].sort((e,n)=>new Date(n.created_at).getTime()-new Date(e.created_at).getTime()),[n.generalNotifications,n.personalNotifications]);return{generalNotifications:n.generalNotifications,personalNotifications:n.personalNotifications,allNotifications:m(),counts:n.counts,loading:n.loading,error:n.error,markAsRead:r,markAllAsRead:a,deleteNotification:i,createNotification:p,refresh:c,refreshCounts:d,hasUnread:n.counts.total>0,hasUnreadPersonal:n.counts.personal>0,hasGeneralNotifications:n.counts.general>0,isAuthenticated:!!(null==e?void 0:e.id)}};export{U as C,Un as D,Bn as a,zn as b,Xn as c,Wn as d,Yn as e,B as f,Jn as n,Zn as u};
