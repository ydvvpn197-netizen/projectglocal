var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(s,t,i)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i,n=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&o(e,t,s[t]);if(i)for(var t of i(s))r.call(s,t)&&o(e,t,s[t]);return e},c=(e,i)=>s(e,t(i));import{b as l,d as m,u as d,r as p,j as u,B as h,C as x,v as j,w as y,x as v,y as g}from"./main-u5iDOJMZ.js";import{I as f}from"./input-d0wpgTJ2.js";import{T as b}from"./textarea-44C4KWaW.js";import{S as N,a as w,b as _,c as C,d as k}from"./select-BloqB5ko.js";import{L as P}from"./label-BmJUPftL.js";import{R as O}from"./ResponsiveLayout-CaFEj6Sr.js";import{u as S}from"./useLocation-DoOmcXMP.js";import{C as F}from"./communityService-DlpM0krF.js";import{A as q}from"./arrow-left-C3YI5YUq.js";import{U as L}from"./users-BKDXsamp.js";import"./index-jVOyRz7F.js";import"./index-Dy-VqNBB.js";import"./Combination-D3NAapk3.js";import"./index-9dp5BQ5P.js";import"./chevron-up-MfWNy2Yr.js";import"./check-CT-bNmTi.js";import"./separator-BdZu64Yb.js";import"./sheet-BES5Q-Ko.js";import"./index-B7-3ofi9.js";import"./NotificationBell-4ukuyDx4.js";import"./badge-k0SsuPwB.js";import"./scroll-area-DANvZfFy.js";import"./useNotifications-DNCpc7NU.js";import"./tabs-Dn7YRzvT.js";import"./bell-wBykza9e.js";import"./user-DlaYKRnl.js";import"./index-azXaBhbR.js";import"./NotificationButton-QcrDLMMB.js";import"./search-BsWmJlwB.js";import"./map-pin-CcmxiK6P.js";import"./zap-BrBeKdrO.js";import"./message-square-DQ5316cR.js";import"./alert-7nHfBPfv.js";import"./wifi-DNTf1l7S.js";import"./log-out-CGc8M4_-.js";import"./locationService-DDZ4T3aM.js";const B=()=>{const e=l(),{toast:s}=m(),{user:t}=d(),{currentLocation:i}=S(),[a,r]=p.useState(!1),[o,B]=p.useState({name:"",description:"",category:"General",is_public:!0,allow_anonymous_posts:!1,require_approval:!1}),E=(e,s)=>{B(t=>c(n({},t),{[e]:s}))};return u.jsx(O,{children:u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center gap-4",children:u.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>e("/community"),className:"flex items-center gap-2",children:[u.jsx(q,{className:"h-4 w-4"}),"Back to Community"]})}),u.jsxs(x,{children:[u.jsxs(j,{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(L,{className:"h-6 w-6 text-primary"}),u.jsx(y,{className:"text-2xl",children:"Create a Community"})]}),u.jsx(v,{children:"Start a new community group to connect with like-minded people in your area"})]}),u.jsx(g,{children:u.jsxs("form",{onSubmit:a=>((e,s,t)=>new Promise((i,r)=>{var o=e=>{try{c(t.next(e))}catch(a){r(a)}},n=e=>{try{c(t.throw(e))}catch(a){r(a)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,n);c((t=t.apply(e,s)).next())}))(void 0,null,function*(){if(a.preventDefault(),t)if(o.name.trim()&&o.description.trim()&&o.category){r(!0);try{const t=c(n({},o),{name:o.name.trim(),description:o.description.trim(),latitude:null==i?void 0:i.latitude,longitude:null==i?void 0:i.longitude,location_city:(null==i?void 0:i.city)||"",location_state:(null==i?void 0:i.state)||"",location_country:(null==i?void 0:i.country)||""});if(!(yield F.createGroup(t)))throw new Error("Failed to create community");s({title:"Success!",description:"Your community has been created successfully."}),e("/community")}catch(l){s({title:"Error",description:"Failed to create community. Please try again.",variant:"destructive"})}finally{r(!1)}}else s({title:"Error",description:"Please fill in all required fields.",variant:"destructive"})}),className:"space-y-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(P,{htmlFor:"name",children:"Community Name *"}),u.jsx(f,{id:"name",placeholder:"Enter community name",value:o.name,onChange:e=>E("name",e.target.value),maxLength:50}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.name.length,"/50 characters"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(P,{htmlFor:"description",children:"Description *"}),u.jsx(b,{id:"description",placeholder:"Describe what your community is about...",value:o.description,onChange:e=>E("description",e.target.value),rows:4,maxLength:500}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.description.length,"/500 characters"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(P,{htmlFor:"category",children:"Category *"}),u.jsxs(N,{value:o.category,onValueChange:e=>E("category",e),children:[u.jsx(w,{children:u.jsx(_,{placeholder:"Select a category"})}),u.jsx(C,{children:["Photography","Food","Outdoor","Art","Music","Sports","Technology","Business","Health","Education","Gaming","Travel","Books","Movies","General"].map(e=>u.jsx(k,{value:e,children:e},e))})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:"is_public",checked:o.is_public,onChange:e=>E("is_public",e.target.checked),className:"rounded"}),u.jsx(P,{htmlFor:"is_public",children:"Public Community"})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Public communities are visible to everyone and anyone can join"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:"allow_anonymous_posts",checked:o.allow_anonymous_posts,onChange:e=>E("allow_anonymous_posts",e.target.checked),className:"rounded"}),u.jsx(P,{htmlFor:"allow_anonymous_posts",children:"Allow Anonymous Posts"})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Members can post anonymously in this community"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:"require_approval",checked:o.require_approval,onChange:e=>E("require_approval",e.target.checked),className:"rounded"}),u.jsx(P,{htmlFor:"require_approval",children:"Require Post Approval"})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Posts must be approved by moderators before appearing"})]}),u.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[u.jsx("h3",{className:"font-medium mb-2",children:"Community Visibility"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Your community will be visible to people in your local area based on their location settings. This helps create relevant local communities."}),i&&u.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Location: ",i.city,", ",i.state]})]}),u.jsxs("div",{className:"flex gap-4 pt-4",children:[u.jsx(h,{type:"button",variant:"outline",onClick:()=>e("/community"),className:"flex-1",children:"Cancel"}),u.jsx(h,{type:"submit",disabled:a||!o.name.trim()||!o.description.trim()||!o.category,className:"flex-1",children:a?"Creating...":"Create Community"})]})]})})]})]})})};export{B as default};
