var fe=Object.defineProperty,xe=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var Z=(i,r,s)=>r in i?fe(i,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[r]=s,w=(i,r)=>{for(var s in r||(r={}))pe.call(r,s)&&Z(i,s,r[s]);if(K)for(var s of K(r))je.call(r,s)&&Z(i,s,r[s]);return i},U=(i,r)=>xe(i,ge(r));var v=(i,r,s)=>new Promise((t,a)=>{var d=x=>{try{g(s.next(x))}catch(u){a(u)}},_=x=>{try{g(s.throw(x))}catch(u){a(u)}},g=x=>x.done?t(x.value):Promise.resolve(x.value).then(d,_);g((s=s.apply(i,r)).next())});import{r as c,j as e}from"./chunk-V8Tq47hD.js";import{ResponsiveLayout as ve}from"./ResponsiveLayout.tsx-CBMj4ano.js";import{s as A,u as $,e as z,U as _e,C as I,a as W,E as ye,b as ee,c as se,f as te,B as b}from"./main-nj8_qmr1.js";import{I as P}from"./chunk-CfjvP89K.js";import{L as p}from"./chunk-Ch6abJed.js";import{T as we}from"./chunk-DiXj0jE4.js";import{A as Ne,a as be,b as Ce}from"./chunk-CJL1E-Mt.js";import{u as ie}from"./chunk-DulDdbSN.js";import{$ as ae,X as ke,ac as Ee,E as re,G as ne,I as H,M as Se,ah as Fe,ai as Pe,aa as T,c as oe,ae as ce,S as le,ab as Ue,aj as Ae,ak as qe,al as B,A as De,am as Me,V as Le,an as Oe}from"./chunk-BD2ShIYc.js";import{B as Te}from"./chunk-BqqQDpKD.js";import{S as N}from"./chunk-YEhQLQCo.js";import{m as Re}from"./chunk-axyawUmi.js";import"./chunk-7Gxbu0Lx.js";import"./chunk-aOfXXddH.js";import"./chunk-jOF7Mqj2.js";import"./chunk-BbVfpXIH.js";import"./chunk-HDUI5Ctd.js";import"./chunk-DkszvQuI.js";import"./chunk-Cv5hKDJv.js";class Ie{getUserSettings(r){return v(this,null,function*(){try{const[s,t]=yield Promise.all([A.from("profiles").select("*").eq("user_id",r).single(),A.from("user_notification_settings").select("*").eq("user_id",r).single()]),a=s.data||{},d=t.data||{};return{display_name:a.display_name,bio:a.bio,first_name:a.first_name,last_name:a.last_name,phone_number:a.phone_number,website_url:a.website_url,location_city:a.location_city,location_state:a.location_state,location_country:a.location_country,real_time_location_enabled:a.real_time_location_enabled,email_notifications:d.email_notifications,push_notifications:d.push_notifications,booking_notifications:d.booking_notifications,message_notifications:d.message_notifications,follower_notifications:d.follower_notifications,event_notifications:d.event_notifications,discussion_notifications:d.discussion_notifications,payment_notifications:d.payment_notifications,system_notifications:d.system_notifications,marketing_notifications:d.marketing_notifications,quiet_hours_enabled:d.quiet_hours_enabled,quiet_hours_start:d.quiet_hours_start,quiet_hours_end:d.quiet_hours_end,privacy_profile:!1,show_location:!0,show_contact_info:!0,allow_messages_from:"followers",dark_mode:!1,language:"en",timezone:"UTC",two_factor_enabled:!1,login_notifications:!0}}catch(s){throw console.error("Error fetching user settings:",s),new Error("Failed to fetch user settings")}})}updateProfileSettings(r,s){return v(this,null,function*(){try{const t={},a={};if(s.display_name!==void 0&&(t.display_name=s.display_name),s.bio!==void 0&&(t.bio=s.bio),s.first_name!==void 0&&(t.first_name=s.first_name),s.last_name!==void 0&&(t.last_name=s.last_name),s.phone_number!==void 0&&(t.phone_number=s.phone_number),s.website_url!==void 0&&(t.website_url=s.website_url),s.location_city!==void 0&&(t.location_city=s.location_city),s.location_state!==void 0&&(t.location_state=s.location_state),s.location_country!==void 0&&(t.location_country=s.location_country),s.real_time_location_enabled!==void 0&&(t.real_time_location_enabled=s.real_time_location_enabled),s.email_notifications!==void 0&&(a.email_notifications=s.email_notifications),s.push_notifications!==void 0&&(a.push_notifications=s.push_notifications),s.booking_notifications!==void 0&&(a.booking_notifications=s.booking_notifications),s.message_notifications!==void 0&&(a.message_notifications=s.message_notifications),s.follower_notifications!==void 0&&(a.follower_notifications=s.follower_notifications),s.event_notifications!==void 0&&(a.event_notifications=s.event_notifications),s.discussion_notifications!==void 0&&(a.discussion_notifications=s.discussion_notifications),s.payment_notifications!==void 0&&(a.payment_notifications=s.payment_notifications),s.system_notifications!==void 0&&(a.system_notifications=s.system_notifications),s.marketing_notifications!==void 0&&(a.marketing_notifications=s.marketing_notifications),s.quiet_hours_enabled!==void 0&&(a.quiet_hours_enabled=s.quiet_hours_enabled),s.quiet_hours_start!==void 0&&(a.quiet_hours_start=s.quiet_hours_start),s.quiet_hours_end!==void 0&&(a.quiet_hours_end=s.quiet_hours_end),Object.keys(t).length>0){t.updated_at=new Date().toISOString();const{error:d}=yield A.from("profiles").update(t).eq("user_id",r);if(d)throw d}if(Object.keys(a).length>0){a.updated_at=new Date().toISOString();const{error:d}=yield A.from("user_notification_settings").upsert(w({user_id:r},a));if(d)throw d}return{success:!0}}catch(t){return console.error("Error updating profile settings:",t),{success:!1,error:t instanceof Error?t.message:"Failed to update settings"}}})}updateNotificationSettings(r,s){return v(this,null,function*(){try{const t={};if(s.email_notifications!==void 0&&(t.email_notifications=s.email_notifications),s.push_notifications!==void 0&&(t.push_notifications=s.push_notifications),s.booking_notifications!==void 0&&(t.booking_notifications=s.booking_notifications),s.message_notifications!==void 0&&(t.message_notifications=s.message_notifications),s.follower_notifications!==void 0&&(t.follower_notifications=s.follower_notifications),s.event_notifications!==void 0&&(t.event_notifications=s.event_notifications),s.discussion_notifications!==void 0&&(t.discussion_notifications=s.discussion_notifications),s.payment_notifications!==void 0&&(t.payment_notifications=s.payment_notifications),s.system_notifications!==void 0&&(t.system_notifications=s.system_notifications),s.marketing_notifications!==void 0&&(t.marketing_notifications=s.marketing_notifications),s.quiet_hours_enabled!==void 0&&(t.quiet_hours_enabled=s.quiet_hours_enabled),s.quiet_hours_start!==void 0&&(t.quiet_hours_start=s.quiet_hours_start),s.quiet_hours_end!==void 0&&(t.quiet_hours_end=s.quiet_hours_end),Object.keys(t).length===0)return{success:!0};t.updated_at=new Date().toISOString();const{error:a}=yield A.from("user_notification_settings").upsert(w({user_id:r},t));if(a)throw a;return{success:!0}}catch(t){return console.error("Error updating notification settings:",t),{success:!1,error:t instanceof Error?t.message:"Failed to update notification settings"}}})}changePassword(r,s){return v(this,null,function*(){try{if(s.newPassword!==s.confirmPassword)return{success:!1,error:"New password and confirmation password do not match"};if(s.newPassword.length<8)return{success:!1,error:"Password must be at least 8 characters long"};const{error:t}=yield A.auth.updateUser({password:s.newPassword});if(t)throw t;return{success:!0}}catch(t){return console.error("Error changing password:",t),{success:!1,error:t instanceof Error?t.message:"Failed to change password"}}})}changeEmail(r,s){return v(this,null,function*(){try{const{error:t}=yield A.auth.updateUser({email:s.newEmail});if(t)throw t;return{success:!0,data:{message:"Email change request sent. Please check your new email for confirmation."}}}catch(t){return console.error("Error changing email:",t),{success:!1,error:t instanceof Error?t.message:"Failed to change email"}}})}deleteAccount(r){return v(this,null,function*(){try{return{success:!0}}catch(s){return console.error("Error deleting account:",s),{success:!1,error:s instanceof Error?s.message:"Failed to delete account"}}})}getUserPreferences(r,s){return v(this,null,function*(){try{const t=yield this.getUserSettings(r),a={};return s.forEach(d=>{d in t&&(a[d]=t[d])}),a}catch(t){return console.error("Error fetching user preferences:",t),{}}})}resetSettingsToDefaults(r){return v(this,null,function*(){try{const s={email_notifications:!0,push_notifications:!0,booking_notifications:!0,message_notifications:!0,follower_notifications:!0,event_notifications:!0,discussion_notifications:!0,payment_notifications:!0,system_notifications:!0,marketing_notifications:!1,quiet_hours_enabled:!1,quiet_hours_start:"22:00",quiet_hours_end:"08:00"},{error:t}=yield A.from("user_notification_settings").upsert(U(w({user_id:r},s),{updated_at:new Date().toISOString()}));if(t)throw t;return{success:!0}}catch(s){return console.error("Error resetting settings:",s),{success:!1,error:s instanceof Error?s.message:"Failed to reset settings"}}})}}const q=new Ie,We=()=>{const{user:i}=$(),{toast:r}=z(),[s,t]=c.useState({}),[a,d]=c.useState(!0),[_,g]=c.useState(!1),[x,u]=c.useState(!1),l=c.useCallback(()=>v(null,null,function*(){if(!(i!=null&&i.id)){d(!1);return}try{d(!0);const f=yield q.getUserSettings(i.id);t(f)}catch(f){console.error("Error loading user settings:",f),r({title:"Error",description:"Failed to load user settings",variant:"destructive"})}finally{d(!1)}}),[i==null?void 0:i.id,r]),D=c.useCallback(f=>v(null,null,function*(){if(!(i!=null&&i.id))return{success:!1,error:"User not authenticated"};try{g(!0);const h=yield q.updateProfileSettings(i.id,f);return h.success?(t(n=>w(w({},n),f)),u(!1),r({title:"Success",description:"Profile settings updated successfully"})):r({title:"Error",description:h.error||"Failed to update profile settings",variant:"destructive"}),h}catch(h){return console.error("Error updating profile settings:",h),r({title:"Error",description:"Failed to update profile settings",variant:"destructive"}),{success:!1,error:"Unknown error"}}finally{g(!1)}}),[i==null?void 0:i.id,r]),o=c.useCallback(f=>v(null,null,function*(){if(!(i!=null&&i.id))return{success:!1,error:"User not authenticated"};try{g(!0);const h=yield q.updateNotificationSettings(i.id,f);return h.success?(t(n=>w(w({},n),f)),u(!1),r({title:"Success",description:"Notification settings updated successfully"})):r({title:"Error",description:h.error||"Failed to update notification settings",variant:"destructive"}),h}catch(h){return console.error("Error updating notification settings:",h),r({title:"Error",description:"Failed to update notification settings",variant:"destructive"}),{success:!1,error:"Unknown error"}}finally{g(!1)}}),[i==null?void 0:i.id,r]),M=c.useCallback(f=>v(null,null,function*(){if(!(i!=null&&i.id))return{success:!1,error:"User not authenticated"};try{g(!0);const h=yield q.changePassword(i.id,f);return h.success?r({title:"Success",description:"Password changed successfully"}):r({title:"Error",description:h.error||"Failed to change password",variant:"destructive"}),h}catch(h){return console.error("Error changing password:",h),r({title:"Error",description:"Failed to change password",variant:"destructive"}),{success:!1,error:"Unknown error"}}finally{g(!1)}}),[i==null?void 0:i.id,r]),C=c.useCallback(f=>v(null,null,function*(){var h;if(!(i!=null&&i.id))return{success:!1,error:"User not authenticated"};try{g(!0);const n=yield q.changeEmail(i.id,f);return n.success?r({title:"Success",description:((h=n.data)==null?void 0:h.message)||"Email change request sent successfully"}):r({title:"Error",description:n.error||"Failed to change email",variant:"destructive"}),n}catch(n){return console.error("Error changing email:",n),r({title:"Error",description:"Failed to change email",variant:"destructive"}),{success:!1,error:"Unknown error"}}finally{g(!1)}}),[i==null?void 0:i.id,r]),S=c.useCallback(()=>v(null,null,function*(){if(!(i!=null&&i.id))return{success:!1,error:"User not authenticated"};try{g(!0);const f=yield q.resetSettingsToDefaults(i.id);return f.success?(yield l(),u(!1),r({title:"Success",description:"Settings reset to defaults successfully"})):r({title:"Error",description:f.error||"Failed to reset settings",variant:"destructive"}),f}catch(f){return console.error("Error resetting settings:",f),r({title:"Error",description:"Failed to reset settings",variant:"destructive"}),{success:!1,error:"Unknown error"}}finally{g(!1)}}),[i==null?void 0:i.id,r,l]),R=c.useCallback((f,h)=>{t(n=>U(w({},n),{[f]:h})),u(!0)},[]),L=c.useCallback(()=>v(null,null,function*(){if(!(i!=null&&i.id)||!x)return!0;try{g(!0);const f={},h={};Object.entries(s).forEach(([j,k])=>{j.startsWith("email_")||j.startsWith("push_")||j.startsWith("booking_")||j.startsWith("message_")||j.startsWith("follower_")||j.startsWith("event_")||j.startsWith("discussion_")||j.startsWith("payment_")||j.startsWith("system_")||j.startsWith("marketing_")||j.startsWith("quiet_hours_")?h[j]=k:f[j]=k});const[n,y]=yield Promise.all([Object.keys(f).length>0?q.updateProfileSettings(i.id,f):{success:!0},Object.keys(h).length>0?q.updateNotificationSettings(i.id,h):{success:!0}]);if(n.success&&y.success)return u(!1),r({title:"Success",description:"All settings saved successfully"}),!0;{const j=n.error||y.error||"Failed to save some settings";return r({title:"Error",description:j,variant:"destructive"}),!1}}catch(f){return console.error("Error saving all changes:",f),r({title:"Error",description:"Failed to save settings",variant:"destructive"}),!1}finally{g(!1)}}),[i==null?void 0:i.id,s,x,r]);return c.useEffect(()=>{l()},[l]),{settings:s,loading:a,saving:_,hasChanges:x,loadSettings:l,updateProfileSettings:D,updateNotificationSettings:o,changePassword:M,changeEmail:C,resetSettingsToDefaults:S,handleSettingChange:R,saveAllChanges:L,setSettings:t}},Be=()=>{const{user:i}=$(),[r,s]=c.useState(null),[t,a]=c.useState(!0),[d,_]=c.useState(null);return c.useEffect(()=>{v(null,null,function*(){if(!(i!=null&&i.id)){s(null),a(!1);return}try{a(!0),_(null);const x=yield _e.getUserRole(i.id);s(x)}catch(x){console.error("Error fetching user role:",x),_(x instanceof Error?x.message:"Failed to fetch user role"),s(null)}finally{a(!1)}})},[i==null?void 0:i.id]),{role:r,isUser:r==="user",isArtist:r==="artist",loading:t,error:d}},Ye=({onClose:i,showAvatar:r=!0,compact:s=!1})=>{var G,J,Q;const{toast:t}=z();Be();const{profile:a,loading:d,updateProfile:_}=ie(),{settings:g,loading:x,updateProfileSettings:u}=We(),[l,D]=c.useState(a),[o,M]=c.useState(g||{}),[C,S]=c.useState(!1),[R,L]=c.useState(null),[f,h]=c.useState(null),[n,y]=c.useState(!1),j=d||x;c.useEffect(()=>{D(a),M(g||{})},[a,g]),c.useEffect(()=>{const m=JSON.stringify(l)!==JSON.stringify(a),E=JSON.stringify(o)!==JSON.stringify(g);S(m||E)},[l,o,a,g]);const k=(m,E)=>{M(F=>U(w({},F||{}),{[m]:E}))},V=(m,E)=>{D(F=>F?U(w({},F),{[m]:E}):null)},de=m=>{var F;const E=(F=m.target.files)==null?void 0:F[0];if(E){L(E);const O=new FileReader;O.onload=he=>{var X;h((X=he.target)==null?void 0:X.result)},O.readAsDataURL(E)}},me=()=>v(null,null,function*(){try{if(y(!0),l){const m=yield _(l);if(!m.success){t({title:"Error",description:m.error||"Failed to update profile",variant:"destructive"});return}}if(o){const m=yield u(o);if(!m.success){t({title:"Error",description:m.error||"Failed to update settings",variant:"destructive"});return}}t({title:"Success",description:"Profile updated successfully"}),i&&i()}catch(m){t({title:"Error",description:"Failed to update profile",variant:"destructive"})}finally{y(!1)}}),ue=()=>{D(a),M(g||{}),L(null),h(null),i&&i()};return j?e.jsx(I,{className:s?"":"w-full max-w-4xl",children:e.jsxs(W,{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading profile..."})]})}):e.jsx(ye,{children:e.jsxs(I,{className:s?"":"w-full max-w-4xl",children:[e.jsx(ee,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),"Profile Settings"]}),e.jsx(te,{children:"Update your personal information and profile details."})]}),i&&e.jsx(b,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(ke,{className:"h-4 w-4"})})]})}),e.jsxs(W,{className:"space-y-6",children:[r&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Ne,{className:"h-20 w-20",children:[e.jsx(be,{src:f||(a==null?void 0:a.avatar_url)||void 0,alt:"Profile avatar"}),e.jsx(Ce,{className:"text-lg",children:((G=a==null?void 0:a.display_name)==null?void 0:G.charAt(0))||((J=a==null?void 0:a.first_name)==null?void 0:J.charAt(0))||"U"})]}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-1 cursor-pointer hover:bg-primary/90",children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Profile Photo"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a new profile photo. Recommended size: 400x400 pixels."})]})]}),l&&(()=>{const m=[o==null?void 0:o.first_name,o==null?void 0:o.last_name,l==null?void 0:l.display_name,l==null?void 0:l.bio,o==null?void 0:o.phone_number,o==null?void 0:o.website_url,o==null?void 0:o.location_city,o==null?void 0:o.location_state,o==null?void 0:o.location_country,o==null?void 0:o.education],E=m.filter(O=>O&&O.toString().trim()),F=Math.min(Math.round(E.length/m.length*100),100);return e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[F,"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${F}%`}})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Complete your profile to help others connect with you"})]})})(),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"first_name",children:"First Name *"}),e.jsx(P,{id:"first_name",value:(o==null?void 0:o.first_name)||"",onChange:m=>k("first_name",m.target.value),placeholder:"Enter your first name",className:o!=null&&o.first_name?"":"border-orange-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"last_name",children:"Last Name *"}),e.jsx(P,{id:"last_name",value:(o==null?void 0:o.last_name)||"",onChange:m=>k("last_name",m.target.value),placeholder:"Enter your last name",className:o!=null&&o.last_name?"":"border-orange-200"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"display_name",children:"Display Name"}),e.jsx(P,{id:"display_name",value:(l==null?void 0:l.display_name)||"",onChange:m=>V("display_name",m.target.value),placeholder:"Enter your display name"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This is the name that will be shown to other users. Leave empty to use your first and last name."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bio",children:"Bio"}),e.jsx(we,{id:"bio",value:(l==null?void 0:l.bio)||"",onChange:m=>V("bio",m.target.value),placeholder:"Tell us about yourself, your interests, and what you do...",rows:4}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share a bit about yourself with the community."}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[((Q=l==null?void 0:l.bio)==null?void 0:Q.length)||0,"/500"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"phone_number",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(P,{id:"phone_number",value:(o==null?void 0:o.phone_number)||"",onChange:m=>k("phone_number",m.target.value),placeholder:"Enter your phone number",className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"website_url",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(P,{id:"website_url",value:(o==null?void 0:o.website_url)||"",onChange:m=>k("website_url",m.target.value),placeholder:"https://yourwebsite.com",className:"pl-10"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(P,{id:"email",type:"email",value:(o==null?void 0:o.email)||"",disabled:!0,className:"pl-10"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email address cannot be changed here. Go to Settings → Security to change your email."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"location_city",children:"City"}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(P,{id:"location_city",value:(o==null?void 0:o.location_city)||"",onChange:m=>k("location_city",m.target.value),placeholder:"Enter your city",className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"location_state",children:"State/Province"}),e.jsx(P,{id:"location_state",value:(o==null?void 0:o.location_state)||"",onChange:m=>k("location_state",m.target.value),placeholder:"Enter your state"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"location_country",children:"Country"}),e.jsx(P,{id:"location_country",value:(o==null?void 0:o.location_country)||"",onChange:m=>k("location_country",m.target.value),placeholder:"Enter your country"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Additional Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"education",children:"Education"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(P,{id:"education",value:(o==null?void 0:o.education)||"",onChange:m=>k("education",m.target.value),placeholder:"e.g., Bachelor's in Fine Arts",className:"pl-10"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[i&&e.jsx(b,{variant:"outline",onClick:ue,children:"Cancel"}),e.jsxs(b,{onClick:me,disabled:!C||n,className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),n?"Saving...":"Save Changes"]})]})]})]})})},He=()=>{const[i,r]=c.useState("system"),[s,t]=c.useState("light"),a=c.useCallback(()=>typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),d=c.useCallback(u=>{if(typeof document!="undefined"){const l=document.documentElement;l.classList.remove("light","dark"),l.classList.add(u),l.setAttribute("data-theme",u)}},[]),_=c.useCallback(()=>{const u=i==="system"?a():i;t(u),d(u)},[i,a,d]);c.useEffect(()=>{const u=localStorage.getItem("theme");u&&["light","dark","system"].includes(u)&&r(u)},[]),c.useEffect(()=>{_()},[_]),c.useEffect(()=>{if(i==="system"&&typeof window!="undefined"){const u=window.matchMedia("(prefers-color-scheme: dark)"),l=()=>{_()};return u.addEventListener("change",l),()=>u.removeEventListener("change",l)}},[i,_]);const g=c.useCallback(()=>{const u=s==="light"?"dark":"light";r(u),localStorage.setItem("theme",u)},[s]),x=c.useCallback(u=>{r(u),localStorage.setItem("theme",u)},[]);return{theme:i,resolvedTheme:s,toggleTheme:g,setTheme:x,isDark:s==="dark",isLight:s==="light",isSystem:i==="system"}},Y=[{id:"profile",title:"Profile Settings",description:"Manage your personal information and profile",icon:ae,color:"bg-blue-500"},{id:"privacy",title:"Privacy & Security",description:"Control your privacy and security settings",icon:oe,color:"bg-green-500"},{id:"notifications",title:"Notifications",description:"Customize your notification preferences",icon:ce,color:"bg-yellow-500"},{id:"subscription",title:"Subscription",description:"Manage your subscription and billing",icon:T,color:"bg-purple-500"},{id:"account",title:"Account Management",description:"Advanced account settings and data management",icon:le,color:"bg-gray-500"}],ms=()=>{var h;const{user:i,logout:r}=$(),{profile:s}=ie(),{toast:t}=z();He();const[a,d]=c.useState("profile"),[_,g]=c.useState((s==null?void 0:s.is_pro)||!1),[x,u]=c.useState({email:!0,push:!0,sms:!1,marketing:!1,events:!0,posts:!0,communities:!0,messages:!0,mentions:!0}),[l,D]=c.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showLocation:!0,allowMessages:!0,allowFollows:!0,analyticsOptOut:!1,dataDownload:!1}),[o,M]=c.useState({language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",timeFormat:"12h",currency:"USD"}),C=c.useCallback((n,y)=>{u(j=>U(w({},j),{[n]:y})),t({title:"Notification Settings Updated",description:`${n} notifications ${y?"enabled":"disabled"}.`})},[t]),S=c.useCallback((n,y)=>{D(j=>U(w({},j),{[n]:y})),t({title:"Privacy Settings Updated",description:"Your privacy preferences have been saved."})},[t]);c.useCallback((n,y)=>{M(j=>U(w({},j),{[n]:y})),t({title:"Account Settings Updated",description:"Your account preferences have been saved."})},[t]);const R=c.useCallback(()=>v(null,null,function*(){t({title:"Account Deletion",description:"This feature is not yet implemented.",variant:"destructive"})}),[t]),L=c.useCallback(()=>v(null,null,function*(){t({title:"Data Export",description:"Your data export has been started. You'll receive an email when it's ready."})}),[t]),f=c.useCallback(()=>v(null,null,function*(){try{yield r(),t({title:"Logged Out",description:"You have been successfully logged out."})}catch(n){t({title:"Logout Failed",description:"Unable to log out. Please try again.",variant:"destructive"})}}),[r,t]);return e.jsx(ve,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your account, privacy, and preferences"})]}),_&&e.jsxs(Te,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Pro Member"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:Y.map((n,y)=>e.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:y*.1},whileHover:{y:-2},className:"group",children:e.jsx(I,{className:`cursor-pointer transition-all duration-300 hover:shadow-lg ${a===n.id?"ring-2 ring-primary shadow-lg":"hover:border-primary/50"}`,onClick:()=>d(n.id),children:e.jsxs(W,{className:"p-6 text-center",children:[e.jsx("div",{className:`w-12 h-12 mx-auto mb-3 rounded-xl ${n.color} flex items-center justify-center group-hover:scale-110 transition-transform duration-300`,children:e.jsx(n.icon,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id))}),e.jsxs(I,{className:"shadow-lg",children:[e.jsxs(ee,{children:[e.jsx(se,{className:"flex items-center gap-3",children:(()=>{const n=Y.find(y=>y.id===a);return n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-8 h-8 rounded-lg ${n.color} flex items-center justify-center`,children:e.jsx(n.icon,{className:"w-4 h-4 text-white"})}),n.title]}):null})()}),e.jsx(te,{children:(h=Y.find(n=>n.id===a))==null?void 0:h.description})]}),e.jsxs(W,{children:[a==="profile"&&e.jsx("div",{className:"space-y-6",children:e.jsx(Ye,{})}),a==="privacy"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Profile Visibility"]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"show-email",children:"Show Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display your email on your public profile"})]}),e.jsx(N,{id:"show-email",checked:l.showEmail,onCheckedChange:n=>S("showEmail",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"show-phone",children:"Show Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display your phone number on your profile"})]}),e.jsx(N,{id:"show-phone",checked:l.showPhone,onCheckedChange:n=>S("showPhone",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"show-location",children:"Show Location"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display your city and state on your profile"})]}),e.jsx(N,{id:"show-location",checked:l.showLocation,onCheckedChange:n=>S("showLocation",n)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(MessageCircle,{className:"w-5 h-5"}),"Communication"]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"allow-messages",children:"Allow Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let other users send you direct messages"})]}),e.jsx(N,{id:"allow-messages",checked:l.allowMessages,onCheckedChange:n=>S("allowMessages",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"allow-follows",children:"Allow Follows"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow other users to follow you"})]}),e.jsx(N,{id:"allow-follows",checked:l.allowFollows,onCheckedChange:n=>S("allowFollows",n)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"Data & Analytics"]}),e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"analytics-opt-out",children:"Opt out of Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Prevent collection of usage analytics"})]}),e.jsx(N,{id:"analytics-opt-out",checked:l.analyticsOptOut,onCheckedChange:n=>S("analyticsOptOut",n)})]})})]})]})}),a==="notifications"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Delivery Methods"]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"email-notifications",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]})]}),e.jsx(N,{id:"email-notifications",checked:x.email,onCheckedChange:n=>C("email",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"push-notifications",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive push notifications on your device"})]})]}),e.jsx(N,{id:"push-notifications",checked:x.push,onCheckedChange:n=>C("push",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"sms-notifications",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive important alerts via SMS"})]})]}),e.jsx(N,{id:"sms-notifications",checked:x.sms,onCheckedChange:n=>C("sms",n)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Content Notifications"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"events-notifications",children:"Events"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"New events and event updates"})]}),e.jsx(N,{id:"events-notifications",checked:x.events,onCheckedChange:n=>C("events",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"posts-notifications",children:"Posts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"New posts from people you follow"})]}),e.jsx(N,{id:"posts-notifications",checked:x.posts,onCheckedChange:n=>C("posts",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"communities-notifications",children:"Communities"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Activity in your communities"})]}),e.jsx(N,{id:"communities-notifications",checked:x.communities,onCheckedChange:n=>C("communities",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"messages-notifications",children:"Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Direct messages and mentions"})]}),e.jsx(N,{id:"messages-notifications",checked:x.messages,onCheckedChange:n=>C("messages",n)})]})]})]})]})}),a==="subscription"&&e.jsx("div",{className:"space-y-6",children:_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(T,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pro Member"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You have access to all premium features and benefits."}),e.jsxs("div",{className:"grid gap-4 max-w-md mx-auto",children:[e.jsxs(b,{variant:"outline",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Manage Billing"]}),e.jsxs(b,{variant:"outline",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Download Invoice"]}),e.jsxs(b,{variant:"outline",className:"text-red-600 hover:text-red-700",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Cancel Subscription"]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(T,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Free Account"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Upgrade to Pro to unlock premium features and benefits."}),e.jsxs(b,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Upgrade to Pro"]})]})}),a==="account"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Data Management"]}),e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Export Your Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Download a copy of all your data"})]}),e.jsxs(b,{variant:"outline",onClick:L,children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Export"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5"}),"Account Actions"]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Sign Out"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign out of your account on this device"})]}),e.jsxs(b,{variant:"outline",onClick:f,children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50 dark:bg-red-900/10",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-700 dark:text-red-400",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-500",children:"Permanently delete your account and all data"})]}),e.jsxs(b,{variant:"destructive",onClick:R,children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Help & Support"]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Contact Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get help with your account or technical issues"})]}),e.jsxs(b,{variant:"outline",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Contact"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Help Center"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse our knowledge base and FAQs"})]}),e.jsxs(b,{variant:"outline",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Visit"]})]})]})]})]})})]})]})]})})};export{ms as default};
