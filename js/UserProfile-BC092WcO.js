var O=(a,h,r)=>new Promise((x,v)=>{var m=i=>{try{u(r.next(i))}catch(p){v(p)}},s=i=>{try{u(r.throw(i))}catch(p){v(p)}},u=i=>i.done?x(i.value):Promise.resolve(i.value).then(m,s);u((r=r.apply(a,h)).next())});import{M as K,f as Q,u as X,g as Z,r as c,j as e,B as d,C as l,v as o,p as j,q as g,t as ee,s as C}from"./main-Dczk40-q.js";import{R as _,E as $}from"./ResponsiveLayout-CxdDAcTl.js";import{B as se}from"./badge-iBsRNaSn.js";import{D as q,a as z,b as L,c as D,d as I}from"./dialog-kL65frRC.js";import{T as te}from"./textarea-fzgM4rGq.js";import{L as ae}from"./label-KS36zHkM.js";import{T as re,a as ie,b as y,c as k}from"./tabs-ChvN7mKq.js";import{E as ne}from"./EnhancedUserProfileCard-B0uln5n8.js";import{u as le}from"./useEvents-PHiBw-ml.js";import{E as oe}from"./EventCard-Fxpo0pH7.js";import{A as B}from"./arrow-left-CzEz-wbP.js";import{C as ce}from"./calendar-DbYgxsnG.js";import{M as de}from"./mail-CApItZTg.js";import{P as me}from"./phone-B0zkk_50.js";import{G as he}from"./globe-DZrEywGl.js";import{M as U}from"./message-circle-CrqL1ene.js";import{U as xe}from"./user-plus-DoUP2pA_.js";import"./index-DxDoSqvO.js";import"./separator-CnmZayxo.js";import"./index-Bvi8qGb8.js";import"./index-p4sF6Wge.js";import"./databaseUtils-DDxBFZda.js";import"./scroll-area-Ya-nYYPz.js";import"./index-BCwUGNws.js";import"./check-Dn5E7z_E.js";import"./useNotifications-DdfHYMMR.js";import"./notificationService-DiBkqnn5.js";import"./bell-CB9MQoCr.js";import"./user-xzPyfs-H.js";import"./search-CoqTXUJe.js";import"./alert-vAohCTxn.js";import"./zap-BM2f935p.js";import"./plus-B7hFD5Z2.js";import"./message-square-BskFJ3te.js";import"./map-pin-B65WKje7.js";import"./wifi-D1BoRTe0.js";import"./log-out-vClmguiA.js";import"./check-circle-CJSaU0rJ.js";import"./trending-up-DelZ4I2y.js";import"./pen-square-BFdqAlw9.js";import"./share-2-CeGn1hMG.js";import"./shield-Bq_L1461.js";import"./useLocation-Cm6aJjbC.js";import"./locationService-DP6rxedy.js";import"./pointsService-CuwYJ8TK.js";import"./clock-D-HXAPEh.js";import"./ticket-izIWLFCp.js";const cs=()=>{var M,P;const{userId:a}=K(),h=Q(),{user:r}=X(),{events:x,loading:v}=le(),{toast:m}=Z(),[s,u]=c.useState(null),[i,p]=c.useState([]),[Y,f]=c.useState(!1),[A,N]=c.useState(!1),[w,E]=c.useState(""),[ue,R]=c.useState(!1),[b,G]=c.useState(!1);c.useEffect(()=>{a&&u({id:a,username:"eventorganizer",full_name:"Event Organizer",avatar_url:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&crop=face",bio:"Passionate event organizer with 5+ years of experience creating memorable community events. I love bringing people together through music, art, and cultural experiences.",location:"New York, NY",website:"www.eventorganizer.com",phone:"+1 (555) 123-4567",email:"organizer@eventorganizer.com",verified:!0,followers_count:1247,following_count:89,events_count:23,joined_date:"2022-03-15",interests:["Music","Art","Community","Technology","Food"],social_links:{twitter:"@eventorganizer",instagram:"@eventorganizer",linkedin:"linkedin.com/in/eventorganizer"}})},[a]),c.useEffect(()=>{if(x.length>0&&a){const t=x.filter(n=>n.user_id===a);p(t)}},[x,a]);const H=()=>O(void 0,null,function*(){if(!(!w.trim()||!r||!a))try{const{data:t}=yield C.from("chat_conversations").select("id").or(`and(client_id.eq.${r.id},artist_id.eq.${a}),and(client_id.eq.${a},artist_id.eq.${r.id})`).single();let n=t==null?void 0:t.id;if(!n){const{data:J,error:F}=yield C.from("chat_conversations").insert({booking_id:null,client_id:r.id,artist_id:a,status:"active"}).select().single();if(F)throw F;n=J.id}const{error:T}=yield C.from("chat_messages").insert({conversation_id:n,sender_id:r.id,message:w.trim(),message_type:"text"});if(T)throw T;m({title:"Message Sent",description:"Your message has been sent successfully"}),E(""),f(!1),h(`/chat/${n}`)}catch(t){console.error("Error sending message:",t),m({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}}),V=()=>{R(!0),m({title:"Connection Request Sent",description:"Your connection request has been sent"}),N(!1)},W=()=>{G(!b),m({title:b?"Unfollowed":"Following",description:b?"You've unfollowed this user":"You're now following this user"})};if(v)return e.jsx(_,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-64 bg-muted rounded-lg mb-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-full"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})]})})});if(!s)return e.jsx(_,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The user you're looking for doesn't exist or has been removed."}),e.jsxs(d,{onClick:()=>h("/events"),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Back to Events"]})]})});const S=(r==null?void 0:r.id)===a;return e.jsx(_,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{variant:"ghost",onClick:()=>h(-1),className:"mb-4",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg mb-4"}),e.jsx("div",{className:"mb-6",children:e.jsx(ne,{user:{id:s.id,name:s.full_name,email:s.email,avatar:s.avatar_url,bio:s.bio,location:s.location,verified:s.verified,followersCount:s.followers_count,followingCount:s.following_count,isFollowing:b,isOnline:!0,badges:s.verified?["verified"]:[],socialLinks:{twitter:(M=s.social_links)==null?void 0:M.twitter,linkedin:(P=s.social_links)==null?void 0:P.linkedin,website:s.website,phone:s.phone},skills:s.interests,eventsCount:s.events_count,joinDate:s.joined_date,isPremium:s.verified,isFeatured:s.followers_count>1e3},variant:"detailed",showActions:!S,showStats:!0,showSkills:!0,showSocialLinks:!0,onFollow:W,onMessage:()=>f(!0),onViewProfile:()=>{},onShare:()=>{var t;(t=navigator.share)==null||t.call(navigator,{title:`${s.full_name}'s Profile`,text:`Check out ${s.full_name}'s profile on Glocal`,url:window.location.href})},onContact:()=>N(!0),className:"max-w-4xl mx-auto"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(l,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.events_count}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Events Created"})]})}),e.jsx(l,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.followers_count}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Followers"})]})}),e.jsx(l,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.following_count}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Following"})]})}),e.jsx(l,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:"4.8"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]})})]}),e.jsxs(re,{defaultValue:"about",className:"space-y-6",children:[e.jsxs(ie,{className:"grid w-full grid-cols-3",children:[e.jsx(y,{value:"about",children:"About"}),e.jsx(y,{value:"events",children:"Events"}),e.jsx(y,{value:"contact",children:"Contact"})]}),e.jsxs(k,{value:"about",className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(j,{children:e.jsx(g,{children:"Bio"})}),e.jsx(o,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.bio})})]}),e.jsxs(l,{children:[e.jsx(j,{children:e.jsx(g,{children:"Interests"})}),e.jsx(o,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.interests.map((t,n)=>e.jsx(se,{variant:"secondary",children:t},n))})})]}),e.jsxs(l,{children:[e.jsx(j,{children:e.jsx(g,{children:"Social Links"})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(s.social_links).map(([t,n])=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-medium capitalize w-20",children:[t,":"]}),e.jsxs("a",{href:`https://${n}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1",children:[n,e.jsx($,{className:"w-3 h-3"})]})]},t))})})]})]}),e.jsxs(k,{value:"events",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Events Created"}),e.jsxs("span",{className:"text-muted-foreground",children:[i.length," events"]})]}),i.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(t=>e.jsx(oe,{event:t,onAttend:()=>{},onBook:()=>{},onLike:()=>{},onChat:()=>{}},t.id))}):e.jsx(l,{children:e.jsxs(o,{className:"p-8 text-center",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"This user hasn't created any events yet."})]})})]}),e.jsxs(k,{value:"contact",className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(j,{children:e.jsx(g,{children:"Contact Information"})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email"}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-primary hover:underline",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Phone"}),e.jsx("a",{href:`tel:${s.phone}`,className:"text-primary hover:underline",children:s.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Website"}),e.jsxs("a",{href:`https://${s.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1",children:[s.website,e.jsx($,{className:"w-3 h-3"})]})]})]})]})]}),!S&&e.jsxs(l,{children:[e.jsxs(j,{children:[e.jsx(g,{children:"Send Message"}),e.jsxs(ee,{children:["Send a direct message to ",s.full_name]})]}),e.jsx(o,{children:e.jsxs(d,{className:"w-full",onClick:()=>f(!0),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})]})]}),e.jsx(q,{open:Y,onOpenChange:f,children:e.jsxs(z,{className:"max-w-2xl",children:[e.jsxs(L,{children:[e.jsxs(D,{children:["Send Message to ",s.full_name]}),e.jsx(I,{children:"Send a direct message to this user"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"message",children:"Your Message"}),e.jsx(te,{id:"message",placeholder:"Type your message here...",value:w,onChange:t=>E(t.target.value),rows:4})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(d,{className:"flex-1",onClick:H,disabled:!w.trim(),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Send Message"]}),e.jsx(d,{variant:"outline",onClick:()=>f(!1),children:"Cancel"})]})]})]})}),e.jsx(q,{open:A,onOpenChange:N,children:e.jsxs(z,{className:"max-w-md",children:[e.jsxs(L,{children:[e.jsxs(D,{children:["Connect with ",s.full_name]}),e.jsx(I,{children:"Send a connection request to this user"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["This will send a connection request to ",s.full_name,". Once accepted, you'll be able to see their updates and message them directly."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(d,{className:"flex-1",onClick:V,children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Send Request"]}),e.jsx(d,{variant:"outline",onClick:()=>N(!1),children:"Cancel"})]})]})]})})]})})};export{cs as default};
