import{r as e,j as s,C as t,v as a,w as i,x as r,y as l,B as o,X as n,u as c,b as d,a as u,d as p,s as m}from"./main-6fHUpRzT.js";import{R as h}from"./ResponsiveLayout-Bc2JEU4o.js";import{I as x}from"./input-C0XSs2D-.js";import{L as j}from"./label-B5VpaZlr.js";import{B as v}from"./badge-Bj-CyBpD.js";import{T as f}from"./textarea-DdxXr3wS.js";import{S as y,a as g,b,c as N,d as S}from"./select-CsS9Kpur.js";import{P as k}from"./zap-Dyj-3m1T.js";import{P}from"./sheet-D2smYKYW.js";import{D as w}from"./dollar-sign-Dc936s2v.js";import"./separator-55ip2E4B.js";import"./NotificationBell-C-odGad4.js";import"./Combination-Bb2n9b59.js";import"./scroll-area-DRpKKhsW.js";import"./index-BlbmBgSN.js";import"./index-jVOyRz7F.js";import"./useNotifications-DlOFbLc9.js";import"./tabs-BNobDGc4.js";import"./check-BVB7WkBF.js";import"./bell-DFXHEubE.js";import"./user-DoINJrqZ.js";import"./index-GQUAIkZv.js";import"./NotificationButton-CnmvsVP-.js";import"./search-CeL_nYcN.js";import"./map-pin-DJOBTPKn.js";import"./index-YNlOS8aM.js";import"./users-Czby48qY.js";import"./message-square-BNIlY-fX.js";import"./alert-BCcU8rrr.js";import"./wifi-D7M5OVnX.js";import"./log-out-B3lkkfQi.js";import"./index-WEre3Vep.js";import"./chevron-up-k-AfHmE-.js";const C={music:["Vocals","Guitar","Piano","Drums","DJ","Live Band","Solo Performance"],visual:["Photography","Videography","Painting","Digital Art","Portrait Art","Wedding Photography"],performance:["Dancing","Acting","Comedy","Magic","Acrobatics","Theater"],event:["Event Planning","MC/Host","Wedding Planning","Corporate Events","Birthday Parties"],craft:["Crafts","Jewelry Making","Pottery","Woodworking","Textile Art","Sculpture"]},_=({onSubmit:c,loading:d,initialData:u})=>{var p,m;const[h,_]=e.useState((null==u?void 0:u.artistSkills)||[]),[M,R]=e.useState(""),[A,D]=e.useState((null==(p=null==u?void 0:u.hourlyRateMin)?void 0:p.toString())||""),[B,E]=e.useState((null==(m=null==u?void 0:u.hourlyRateMax)?void 0:m.toString())||""),[L,T]=e.useState(""),[O,U]=e.useState((null==u?void 0:u.portfolioUrls)||[]),[q,F]=e.useState((null==u?void 0:u.bio)||""),[z,V]=e.useState((null==u?void 0:u.specialty)||""),W=e=>{_(h.filter(s=>s!==e))},K=()=>{M.trim()&&!h.includes(M.trim())&&(_([...h,M.trim()]),R(""))},Y=()=>{L.trim()&&!O.includes(L.trim())&&(U([...O,L.trim()]),T(""))};return s.jsx("form",{onSubmit:e=>{e.preventDefault(),0!==h.length&&c({artistSkills:h,hourlyRateMin:parseFloat(A)||0,hourlyRateMax:parseFloat(B)||0,portfolioUrls:O,bio:q,specialty:z})},className:"space-y-6",children:s.jsxs(t,{children:[s.jsxs(a,{children:[s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(k,{className:"h-5 w-5"}),"Artist Profile Setup"]}),s.jsx(r,{children:"Tell potential clients about your skills and services"})]}),s.jsxs(l,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(j,{htmlFor:"specialty",children:"Primary Specialty"}),s.jsxs(y,{value:z,onValueChange:V,children:[s.jsx(g,{children:s.jsx(b,{placeholder:"Select your main specialty"})}),s.jsxs(N,{children:[s.jsx(S,{value:"musician",children:"Musician"}),s.jsx(S,{value:"photographer",children:"Photographer"}),s.jsx(S,{value:"performer",children:"Performer"}),s.jsx(S,{value:"visual_artist",children:"Visual Artist"}),s.jsx(S,{value:"event_planner",children:"Event Planner"}),s.jsx(S,{value:"crafter",children:"Crafter"}),s.jsx(S,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(j,{htmlFor:"bio",children:"Bio"}),s.jsx(f,{id:"bio",placeholder:"Tell clients about yourself, your experience, and what makes you unique...",value:q,onChange:e=>F(e.target.value),rows:4})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(j,{children:"Skills & Services"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select up to 10 skills that best describe your services"})]}),s.jsx("div",{className:"grid gap-4",children:Object.entries(C).map(([e,t])=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium capitalize",children:e}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(e=>s.jsxs(o,{type:"button",variant:h.includes(e)?"default":"outline",size:"sm",onClick:()=>h.includes(e)?W(e):(e=>{!h.includes(e)&&h.length<10&&_([...h,e])})(e),disabled:!h.includes(e)&&h.length>=10,children:[e,h.includes(e)&&s.jsx(n,{className:"ml-1 h-3 w-3"})]},e))})]},e))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(x,{placeholder:"Add custom skill...",value:M,onChange:e=>R(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),K())}),s.jsx(o,{type:"button",onClick:K,disabled:h.length>=10,children:s.jsx(P,{className:"h-4 w-4"})})]}),h.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(j,{children:["Selected Skills (",h.length,"/10)"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(e=>s.jsxs(v,{variant:"secondary",className:"gap-1",children:[e,s.jsx(n,{className:"h-3 w-3 cursor-pointer",onClick:()=>W(e)})]},e))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(j,{className:"flex items-center gap-2",children:[s.jsx(w,{className:"h-4 w-4"}),"Hourly Rate Range (Optional)"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(x,{type:"number",placeholder:"Min rate",value:A,onChange:e=>D(e.target.value),min:"0",step:"0.01"})}),s.jsx("div",{children:s.jsx(x,{type:"number",placeholder:"Max rate",value:B,onChange:e=>E(e.target.value),min:"0",step:"0.01"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty if you prefer to negotiate rates per project"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(j,{children:"Portfolio Links (Optional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(x,{placeholder:"Add portfolio URL...",value:L,onChange:e=>T(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),Y())}),s.jsx(o,{type:"button",onClick:Y,children:s.jsx(P,{className:"h-4 w-4"})})]}),O.length>0&&s.jsx("div",{className:"space-y-2",children:O.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-md",children:[s.jsx("span",{className:"flex-1 text-sm truncate",children:e}),s.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{U(O.filter(s=>s!==e))})(e),children:s.jsx(n,{className:"h-4 w-4"})})]},t))})]}),s.jsx(o,{type:"submit",className:"w-full",disabled:d||0===h.length,children:d?"Saving...":"Complete Artist Profile"})]})]})})},M=()=>{const{user:t}=c(),a=d(),i=u(),{toast:r}=p(),[l,o]=e.useState(!1),[n,x]=e.useState(null);e.useEffect(()=>{var e;(null==(e=i.state)?void 0:e.artistData)&&x(i.state.artistData)},[i.state]);return s.jsx(h,{children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Complete Your Artist Profile"}),s.jsx("p",{className:"text-muted-foreground",children:"Tell potential clients about your skills and services to start receiving bookings."})]}),s.jsx(_,{onSubmit:e=>((e,s,t)=>new Promise((a,i)=>{var r=e=>{try{o(t.next(e))}catch(s){i(s)}},l=e=>{try{o(t.throw(e))}catch(s){i(s)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,l);o((t=t.apply(e,s)).next())}))(void 0,null,function*(){if(t){o(!0);try{const{error:s}=yield m.from("profiles").update({user_type:"artist",bio:e.bio,artist_skills:e.artistSkills,hourly_rate_min:e.hourlyRateMin>0?e.hourlyRateMin:null,hourly_rate_max:e.hourlyRateMax>0?e.hourlyRateMax:null,portfolio_urls:e.portfolioUrls.length>0?e.portfolioUrls:null}).eq("user_id",t.id);if(s)throw s;const{error:i}=yield m.from("artists").upsert({user_id:t.id,specialty:e.artistSkills&&e.artistSkills.length>0?e.artistSkills:[],experience_years:0,portfolio_urls:e.portfolioUrls,hourly_rate_min:e.hourlyRateMin>0?e.hourlyRateMin:null,hourly_rate_max:e.hourlyRateMax>0?e.hourlyRateMax:null,bio:e.bio,is_available:!0,updated_at:(new Date).toISOString()},{onConflict:"user_id"});if(i)throw i;r({title:"Artist Profile Created!",description:"Your artist profile has been set up successfully. You can now receive booking requests."}),a("/feed")}catch(s){r({title:"Error",description:"Failed to create artist profile. Please try again.",variant:"destructive"})}finally{o(!1)}}else r({title:"Authentication Required",description:"Please sign in to complete your artist profile.",variant:"destructive"})}),loading:l,initialData:n})]})})};export{M as default};
