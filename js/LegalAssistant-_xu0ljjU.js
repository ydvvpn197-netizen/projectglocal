var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,l=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&n(e,t,s[t]);if(r)for(var t of r(s))i.call(s,t)&&n(e,t,s[t]);return e},o=(e,r)=>s(e,t(r)),c=(e,s,t)=>n(e,"symbol"!=typeof s?s+"":s,t),d=(e,s,t)=>new Promise((r,a)=>{var i=e=>{try{l(t.next(e))}catch(s){a(s)}},n=e=>{try{l(t.throw(e))}catch(s){a(s)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,n);l((t=t.apply(e,s)).next())});import{c as m,s as h,y as p,r as x,C as u,j as f,B as j,b as g}from"./index-BG6xRDTV.js";import{u as y,a as v}from"./useMutation-DhBERTsj.js";import{C as N,d as _,a as w,b}from"./card-CbL4dXrv.js";import{T as S,a as D,b as C,c as T}from"./tabs-DsAJelf8.js";import{B as E}from"./badge-B2QlhVT_.js";import{S as F}from"./separator-HAFz-71w.js";import{A as P,a as q}from"./alert-yPy2QlxQ.js";import{I as A}from"./input-CK5tWTqm.js";import{S as I}from"./scroll-area-HbJeSRic.js";import{T as $}from"./textarea-2ipISJ4Z.js";import{D as R,e as O,a as M,b as L,c as k}from"./dialog-DLasFCgV.js";import{P as U}from"./sheet-D3ubJQDf.js";import{L as V}from"./loader-2-BLhVMBDe.js";import{S as z}from"./shield-DrYKycbH.js";import{C as G}from"./clock-zbgmrwZC.js";import{T as B}from"./index-DxejKcbp.js";import{A as K}from"./alert-triangle-Ccvq7eJS.js";import{S as H}from"./send-CdaaQyaU.js";import{M as W}from"./message-square-B4qpNpo_.js";import{u as Y,a as X,d as J,o as Q,s as Z,l as ee}from"./schemas-bzXLFqNi.js";import{S as se,a as te,b as re,c as ae,d as ie}from"./select-CyzkKvue.js";import{L as ne}from"./label-DeCPOIix.js";import{P as le}from"./pen-square-B1S10rV3.js";import{S as oe}from"./save-COjMa7JF.js";import{F as ce}from"./file-text-DCaOX5K1.js";import{I as de}from"./info-DsHtyCck.js";import{E as me}from"./eye-CBrFZuzs.js";import{R as he,a as pe}from"./ResponsiveLayout-Cy8fRDGj.js";import{B as xe}from"./book-open-BBQpEM-N.js";import{D as ue}from"./download-BQ6sCiIv.js";import"./index-B4GyU7fY.js";import"./index-jVOyRz7F.js";import"./index-Dy3819KX.js";import"./Combination-Ca6tC3WL.js";import"./index-HdY-knnU.js";import"./chevron-up-C9YEcg7r.js";import"./check-CF8HR3W6.js";import"./NotificationBell-DnloidrO.js";import"./useNotifications-B1ZtpJoQ.js";import"./bell-9bXVKGDo.js";import"./settings-C5hGa_4W.js";import"./user-innQK5gL.js";import"./NotificationButton-BhOs_94_.js";import"./search-B4Ny2Otc.js";import"./map-pin-Cmdgk16n.js";import"./users-C0r8Z-ie.js";import"./zap-3-X3ymuv.js";import"./log-out-CsYOYMhW.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=m("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),je=class e{constructor(){c(this,"documentTypes",[{id:"rental_agreement",name:"Rental Agreement",description:"Standard residential rental agreement",required_fields:["landlord_name","tenant_name","property_address","rent_amount","lease_term"]},{id:"employment_contract",name:"Employment Contract",description:"Employment agreement between employer and employee",required_fields:["employer_name","employee_name","position","salary","start_date"]},{id:"nda",name:"Non-Disclosure Agreement",description:"Confidentiality agreement",required_fields:["disclosing_party","receiving_party","confidential_information","term"]},{id:"service_agreement",name:"Service Agreement",description:"Service provider agreement",required_fields:["service_provider","client","services","payment_terms"]}])}static getInstance(){return e.instance||(e.instance=new e),e.instance}getDocumentTypes(){return d(this,null,function*(){return this.documentTypes})}createChatSession(e){return d(this,null,function*(){var s;try{const{data:t,error:r}=yield h.from("legal_chat_sessions").insert({session_name:e,user_id:null==(s=(yield h.auth.getUser()).data.user)?void 0:s.id}).select().single();if(r)throw r;return t}catch(t){throw p.error("Failed to create chat session"),t}})}getChatSessions(){return d(this,null,function*(){try{const{data:e,error:s}=yield h.from("legal_chat_sessions").select("*").order("updated_at",{ascending:!1});if(s)throw s;return e||[]}catch(e){throw p.error("Failed to fetch chat sessions"),e}})}getChatMessages(e){return d(this,null,function*(){try{const{data:s,error:t}=yield h.from("legal_chat_messages").select("*").eq("session_id",e).order("created_at",{ascending:!0});if(t)throw t;return s||[]}catch(s){throw p.error("Failed to fetch chat messages"),s}})}sendMessage(e,s){return d(this,null,function*(){try{const{data:t,error:r}=yield h.from("legal_chat_messages").insert({session_id:e,message_type:"user",content:s}).select().single();if(r)throw r;const a=yield this.generateAIResponse(s,e),{data:i,error:n}=yield h.from("legal_chat_messages").insert({session_id:e,message_type:"assistant",content:a,metadata:{disclaimer:"This is not a substitute for licensed legal advice. Please consult with a qualified attorney for your specific legal needs."}}).select().single();if(n)throw n;return yield h.from("legal_chat_sessions").update({updated_at:(new Date).toISOString()}).eq("id",e),t}catch(t){throw p.error("Failed to send message"),t}})}generateAIResponse(e,s){return d(this,null,function*(){const e=["Based on your question, I can provide some general guidance. However, please note that this is not legal advice and you should consult with a qualified attorney for your specific situation.","I understand your concern. Here are some general points to consider, but remember to seek professional legal counsel for your particular case.","This is a complex legal matter that requires careful consideration. While I can offer some general information, I strongly recommend consulting with a licensed attorney.","Thank you for your question. Here's some general information that might be helpful, but please consult with a legal professional for specific advice."];yield new Promise(e=>setTimeout(e,1e3+2e3*Math.random()));return`${e[Math.floor(Math.random()*e.length)]}\n\n**Important Disclaimer**: This response is generated by an AI assistant and is not a substitute for professional legal advice. Always consult with a qualified attorney for your specific legal needs.`})}createDraft(e){return d(this,null,function*(){var s;try{const{data:t,error:r}=yield h.from("legal_drafts").insert(o(l({},e),{user_id:null==(s=(yield h.auth.getUser()).data.user)?void 0:s.id})).select().single();if(r)throw r;return t}catch(t){throw p.error("Failed to create draft"),t}})}getDrafts(){return d(this,null,function*(){try{const{data:e,error:s}=yield h.from("legal_drafts").select("*").order("updated_at",{ascending:!1});if(s)throw s;return e||[]}catch(e){throw p.error("Failed to fetch drafts"),e}})}updateDraft(e,s){return d(this,null,function*(){try{const{data:t,error:r}=yield h.from("legal_drafts").update(s).eq("id",e).select().single();if(r)throw r;return t}catch(t){throw p.error("Failed to update draft"),t}})}generateDocument(e){return d(this,null,function*(){try{const{data:s,error:t}=yield h.from("legal_drafts").select("*").eq("id",e).single();if(t)throw t;const r=yield this.generatePDF(s),a=yield this.generateDOCX(s);return yield this.updateDraft(e,{file_urls:{pdf:r,docx:a},status:"final"}),{pdfUrl:r,docxUrl:a}}catch(s){throw p.error("Failed to generate document"),s}})}generatePDF(e){return d(this,null,function*(){return yield new Promise(e=>setTimeout(e,2e3)),`https://example.com/documents/${e.id}.pdf`})}generateDOCX(e){return d(this,null,function*(){return yield new Promise(e=>setTimeout(e,1500)),`https://example.com/documents/${e.id}.docx`})}deleteChatSession(e){return d(this,null,function*(){try{const{error:s}=yield h.from("legal_chat_sessions").delete().eq("id",e);if(s)throw s;p.success("Chat session deleted successfully")}catch(s){throw p.error("Failed to delete chat session"),s}})}deleteDraft(e){return d(this,null,function*(){try{const{error:s}=yield h.from("legal_drafts").delete().eq("id",e);if(s)throw s;p.success("Draft deleted successfully")}catch(s){throw p.error("Failed to delete draft"),s}})}};c(je,"instance");const ge=je.getInstance(),ye=({sessionId:e,onSessionChange:s})=>{const[t,r]=x.useState(""),[a,i]=x.useState(!1),[n,l]=x.useState(!1),[o,c]=x.useState(""),m=x.useRef(null);u();const{data:h=[],refetch:g}=y({queryKey:["legal-chat-sessions"],queryFn:()=>ge.getChatSessions()}),{data:w=[],refetch:b}=y({queryKey:["legal-chat-messages",e],queryFn:()=>e?ge.getChatMessages(e):Promise.resolve([]),enabled:!!e}),S=v({mutationFn:({sessionId:e,content:s})=>ge.sendMessage(e,s),onSuccess:()=>{b(),g(),r("")},onError:e=>{p.error("Failed to send message")}}),D=v({mutationFn:e=>ge.createChatSession(e),onSuccess:e=>{l(!1),c(""),g(),s&&s(e.id),p.success("New chat session created")},onError:e=>{p.error("Failed to create chat session")}}),C=v({mutationFn:e=>ge.deleteChatSession(e),onSuccess:()=>{g(),s&&s(""),p.success("Chat session deleted")},onError:e=>{p.error("Failed to delete chat session")}});x.useEffect(()=>{var e;null==(e=m.current)||e.scrollIntoView({behavior:"smooth"})},[w]);const T=()=>d(void 0,null,function*(){if(t.trim()&&e){i(!0);try{yield S.mutateAsync({sessionId:e,content:t.trim()})}finally{i(!1)}}}),F=()=>{o.trim()&&D.mutate(o.trim())},P=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),q=e=>new Date(e).toLocaleDateString();return f.jsxs("div",{className:"flex h-full",children:[f.jsxs("div",{className:"w-80 border-r bg-muted/30",children:[f.jsxs("div",{className:"p-4 border-b",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Legal Assistant"}),f.jsxs(R,{open:n,onOpenChange:l,children:[f.jsx(O,{asChild:!0,children:f.jsxs(j,{size:"sm",variant:"outline",children:[f.jsx(U,{className:"w-4 h-4 mr-2"}),"New Chat"]})}),f.jsxs(M,{children:[f.jsx(L,{children:f.jsx(k,{children:"Create New Chat Session"})}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium",children:"Session Name"}),f.jsx(A,{value:o,onChange:e=>c(e.target.value),placeholder:"Enter session name...",onKeyPress:e=>"Enter"===e.key&&F()})]}),f.jsxs(j,{onClick:F,disabled:!o.trim()||D.isPending,className:"w-full",children:[D.isPending&&f.jsx(V,{className:"w-4 h-4 mr-2 animate-spin"}),"Create Session"]})]})]})]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[f.jsx(z,{className:"w-4 h-4"}),f.jsx("span",{children:"Your conversations are private and secure"})]})]}),f.jsx(I,{className:"h-[calc(100vh-200px)]",children:f.jsx("div",{className:"p-2 space-y-2",children:h.map(t=>f.jsx(N,{className:"cursor-pointer transition-colors "+(e===t.id?"bg-primary/10 border-primary":"hover:bg-muted/50"),onClick:()=>null==s?void 0:s(t.id),children:f.jsx(_,{className:"p-3",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h4",{className:"font-medium text-sm truncate",children:t.session_name}),f.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[f.jsx(G,{className:"w-3 h-3"}),f.jsx("span",{children:q(t.updated_at)})]})]}),f.jsx(j,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),(e=>{confirm("Are you sure you want to delete this chat session? This action cannot be undone.")&&C.mutate(e)})(t.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(B,{className:"w-3 h-3"})})]})})},t.id))})})]}),f.jsx("div",{className:"flex-1 flex flex-col",children:e?f.jsxs(f.Fragment,{children:[f.jsx(I,{className:"flex-1 p-4",children:f.jsxs("div",{className:"space-y-4",children:[w.map(e=>{var s;return f.jsx("div",{className:"flex "+("user"===e.message_type?"justify-end":"justify-start"),children:f.jsxs("div",{className:"max-w-[80%] rounded-lg p-3 "+("user"===e.message_type?"bg-primary text-primary-foreground":"bg-muted"),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:["assistant"===e.message_type&&f.jsx(E,{variant:"secondary",className:"text-xs",children:"AI Assistant"}),f.jsx("span",{className:"text-xs opacity-70",children:P(e.created_at)})]}),f.jsx("div",{className:"whitespace-pre-wrap text-sm",children:e.content}),(null==(s=e.metadata)?void 0:s.disclaimer)&&f.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(K,{className:"w-3 h-3"}),f.jsx("strong",{children:"Disclaimer:"})]}),f.jsx("p",{className:"mt-1",children:e.metadata.disclaimer})]})]})},e.id)}),a&&f.jsx("div",{className:"flex justify-start",children:f.jsx("div",{className:"bg-muted rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(V,{className:"w-4 h-4 animate-spin"}),f.jsx("span",{className:"text-sm",children:"AI is thinking..."})]})})}),f.jsx("div",{ref:m})]})}),f.jsxs("div",{className:"border-t p-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx($,{value:t,onChange:e=>r(e.target.value),placeholder:"Ask your legal question...",className:"min-h-[60px] resize-none",onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),T())},disabled:a}),f.jsx(j,{onClick:T,disabled:!t.trim()||a,size:"icon",className:"self-end",children:a?f.jsx(V,{className:"w-4 h-4 animate-spin"}):f.jsx(H,{className:"w-4 h-4"})})]}),f.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Press Enter to send, Shift+Enter for new line"})]})]}):f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[f.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:f.jsx(W,{className:"w-8 h-8 text-primary"})}),f.jsx("h3",{className:"text-xl font-semibold",children:"Welcome to Legal Assistant"}),f.jsx("p",{className:"text-muted-foreground",children:"Get professional legal guidance and document assistance. Start a new conversation or select an existing session."}),f.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[f.jsx(z,{className:"w-4 h-4"}),f.jsx("span",{children:"All conversations are private and secure"})]})]})})})]})},ve=J("document_type",[Q({document_type:ee("rental_agreement"),title:Z().min(1,"Title is required"),landlord_name:Z().min(1,"Landlord name is required"),tenant_name:Z().min(1,"Tenant name is required"),property_address:Z().min(1,"Property address is required"),rent_amount:Z().min(1,"Rent amount is required"),lease_term:Z().min(1,"Lease term is required"),additional_terms:Z().optional()}),Q({document_type:ee("employment_contract"),title:Z().min(1,"Title is required"),employer_name:Z().min(1,"Employer name is required"),employee_name:Z().min(1,"Employee name is required"),position:Z().min(1,"Position is required"),salary:Z().min(1,"Salary is required"),start_date:Z().min(1,"Start date is required"),additional_terms:Z().optional()}),Q({document_type:ee("nda"),title:Z().min(1,"Title is required"),disclosing_party:Z().min(1,"Disclosing party is required"),receiving_party:Z().min(1,"Receiving party is required"),confidential_information:Z().min(1,"Confidential information description is required"),term:Z().min(1,"Term is required"),additional_terms:Z().optional()}),Q({document_type:ee("service_agreement"),title:Z().min(1,"Title is required"),service_provider:Z().min(1,"Service provider is required"),client:Z().min(1,"Client is required"),services:Z().min(1,"Services description is required"),payment_terms:Z().min(1,"Payment terms are required"),additional_terms:Z().optional()})]),Ne=({onDraftCreated:e,initialData:s})=>{const[t,r]=x.useState(""),[a,i]=x.useState(!1),[n,c]=x.useState(""),{data:d=[]}=y({queryKey:["legal-document-types"],queryFn:()=>ge.getDocumentTypes()}),m=Y({resolver:X(ve),defaultValues:l({document_type:"rental_agreement",title:"",additional_terms:""},s)}),h=v({mutationFn:e=>{const s=u(e);return ge.createDraft({title:e.title,content:s,document_type:e.document_type,status:"draft"})},onSuccess:s=>{p.success("Document draft created successfully"),null==e||e(s)},onError:e=>{p.error("Failed to create document draft")}});v({mutationFn:e=>ge.generateDocument(e),onSuccess:({pdfUrl:e,docxUrl:s})=>{p.success("Document generated successfully")},onError:e=>{p.error("Failed to generate document")}});const u=e=>{let s=`# ${e.title}\n\n`;switch(s+=`**Generated on:** ${(new Date).toLocaleDateString()}\n\n`,e.document_type){case"rental_agreement":s+="## RENTAL AGREEMENT\n\n",s+=`**Landlord:** ${e.landlord_name}\n`,s+=`**Tenant:** ${e.tenant_name}\n`,s+=`**Property Address:** ${e.property_address}\n`,s+=`**Monthly Rent:** ${e.rent_amount}\n`,s+=`**Lease Term:** ${e.lease_term}\n\n`,s+="### TERMS AND CONDITIONS\n\n",s+=`1. **Rent Payment:** Tenant agrees to pay ${e.rent_amount} monthly on or before the first day of each month.\n`,s+="2. **Property Use:** Tenant shall use the property solely for residential purposes.\n",s+="3. **Maintenance:** Landlord is responsible for major repairs; tenant for minor maintenance.\n",s+="4. **Utilities:** [To be specified based on agreement]\n",s+="5. **Security Deposit:** [Amount to be specified]\n\n";break;case"employment_contract":s+="## EMPLOYMENT CONTRACT\n\n",s+=`**Employer:** ${e.employer_name}\n`,s+=`**Employee:** ${e.employee_name}\n`,s+=`**Position:** ${e.position}\n`,s+=`**Salary:** ${e.salary}\n`,s+=`**Start Date:** ${e.start_date}\n\n`,s+="### TERMS OF EMPLOYMENT\n\n",s+=`1. **Position and Duties:** Employee shall serve as ${e.position}.\n`,s+=`2. **Compensation:** Employee shall receive ${e.salary} as compensation.\n`,s+="3. **Work Schedule:** [To be specified]\n",s+="4. **Benefits:** [To be specified]\n",s+="5. **Termination:** Either party may terminate with [notice period] notice.\n\n";break;case"nda":s+="## NON-DISCLOSURE AGREEMENT\n\n",s+=`**Disclosing Party:** ${e.disclosing_party}\n`,s+=`**Receiving Party:** ${e.receiving_party}\n`,s+=`**Term:** ${e.term}\n\n`,s+="### CONFIDENTIAL INFORMATION\n\n",s+=`${e.confidential_information}\n\n`,s+="### OBLIGATIONS\n\n",s+="1. **Confidentiality:** Receiving party shall maintain strict confidentiality.\n",s+="2. **Use Restrictions:** Information may only be used for [specified purpose].\n",s+="3. **Return of Materials:** All confidential materials must be returned upon termination.\n",s+=`4. **Duration:** This agreement remains in effect for ${e.term}.\n\n`;break;case"service_agreement":s+="## SERVICE AGREEMENT\n\n",s+=`**Service Provider:** ${e.service_provider}\n`,s+=`**Client:** ${e.client}\n`,s+=`**Services:** ${e.services}\n`,s+=`**Payment Terms:** ${e.payment_terms}\n\n`,s+="### SERVICE TERMS\n\n",s+=`1. **Services:** Provider shall deliver the following services: ${e.services}\n`,s+=`2. **Payment:** Client agrees to pay according to: ${e.payment_terms}\n`,s+="3. **Timeline:** [To be specified]\n",s+="4. **Quality Standards:** [To be specified]\n",s+="5. **Termination:** Either party may terminate with [notice period] notice.\n\n"}return e.additional_terms&&(s+=`### ADDITIONAL TERMS\n\n${e.additional_terms}\n\n`),s+="### DISCLAIMER\n\n",s+="This document is generated by an AI assistant and is not a substitute for professional legal advice. ",s+="Please consult with a qualified attorney to review and customize this document for your specific needs.\n\n",s+=`**Generated on:** ${(new Date).toLocaleDateString()}\n`,s+=`**Document Type:** ${e.document_type.replace("_"," ").toUpperCase()}\n`,s},g=e=>{h.mutate(e)};return a?f.jsxs(N,{children:[f.jsx(w,{children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(b,{children:"Document Preview"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(j,{variant:"outline",onClick:()=>i(!1),children:[f.jsx(le,{className:"w-4 h-4 mr-2"}),"Edit"]}),f.jsxs(j,{onClick:()=>{const e=m.getValues();g(e),i(!1)},disabled:h.isPending,children:[h.isPending?f.jsx(V,{className:"w-4 h-4 mr-2 animate-spin"}):f.jsx(oe,{className:"w-4 h-4 mr-2"}),"Create Draft"]})]})]})}),f.jsx(_,{children:f.jsx("div",{className:"prose max-w-none",children:f.jsx("pre",{className:"whitespace-pre-wrap text-sm bg-muted p-4 rounded-lg",children:n})})})]}):f.jsxs(N,{children:[f.jsxs(w,{children:[f.jsxs(b,{className:"flex items-center gap-2",children:[f.jsx(ce,{className:"w-5 h-5"}),"Create Legal Document"]}),f.jsxs(P,{children:[f.jsx(de,{className:"h-4 w-4"}),f.jsx(q,{children:"This tool generates legal document drafts. Please review with a qualified attorney before use."})]})]}),f.jsx(_,{children:f.jsxs("form",{onSubmit:m.handleSubmit(g),className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx(ne,{children:"Document Type"}),f.jsxs(se,{value:t,onValueChange:e=>{r(e),m.reset({document_type:e,title:"",additional_terms:""})},children:[f.jsx(te,{children:f.jsx(re,{placeholder:"Select document type"})}),f.jsx(ae,{children:d.map(e=>f.jsx(ie,{value:e.id,children:f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:e.name}),f.jsx("div",{className:"text-sm text-muted-foreground",children:e.description})]})},e.id))})]})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"title",children:"Document Title"}),f.jsx(A,o(l({id:"title"},m.register("title")),{placeholder:"Enter document title"})),m.formState.errors.title&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.title.message})]}),t&&f.jsxs(f.Fragment,{children:[f.jsx(F,{}),(()=>{switch(m.watch("document_type")){case"rental_agreement":return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"landlord_name",children:"Landlord Name"}),f.jsx(A,o(l({id:"landlord_name"},m.register("landlord_name")),{placeholder:"Enter landlord's full name"})),m.formState.errors.landlord_name&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.landlord_name.message})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"tenant_name",children:"Tenant Name"}),f.jsx(A,o(l({id:"tenant_name"},m.register("tenant_name")),{placeholder:"Enter tenant's full name"})),m.formState.errors.tenant_name&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.tenant_name.message})]})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"property_address",children:"Property Address"}),f.jsx(A,o(l({id:"property_address"},m.register("property_address")),{placeholder:"Enter complete property address"})),m.formState.errors.property_address&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.property_address.message})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"rent_amount",children:"Monthly Rent"}),f.jsx(A,o(l({id:"rent_amount"},m.register("rent_amount")),{placeholder:"e.g., $1,500"})),m.formState.errors.rent_amount&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.rent_amount.message})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"lease_term",children:"Lease Term"}),f.jsx(A,o(l({id:"lease_term"},m.register("lease_term")),{placeholder:"e.g., 12 months"})),m.formState.errors.lease_term&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.lease_term.message})]})]})]});case"employment_contract":return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"employer_name",children:"Employer Name"}),f.jsx(A,o(l({id:"employer_name"},m.register("employer_name")),{placeholder:"Enter employer's name"})),m.formState.errors.employer_name&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.employer_name.message})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"employee_name",children:"Employee Name"}),f.jsx(A,o(l({id:"employee_name"},m.register("employee_name")),{placeholder:"Enter employee's name"})),m.formState.errors.employee_name&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.employee_name.message})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"position",children:"Position"}),f.jsx(A,o(l({id:"position"},m.register("position")),{placeholder:"Enter job position"})),m.formState.errors.position&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.position.message})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"salary",children:"Salary"}),f.jsx(A,o(l({id:"salary"},m.register("salary")),{placeholder:"e.g., $50,000 annually"})),m.formState.errors.salary&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.salary.message})]})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"start_date",children:"Start Date"}),f.jsx(A,o(l({id:"start_date"},m.register("start_date")),{placeholder:"e.g., January 1, 2024"})),m.formState.errors.start_date&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.start_date.message})]})]});case"nda":return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"disclosing_party",children:"Disclosing Party"}),f.jsx(A,o(l({id:"disclosing_party"},m.register("disclosing_party")),{placeholder:"Enter disclosing party name"})),m.formState.errors.disclosing_party&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.disclosing_party.message})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"receiving_party",children:"Receiving Party"}),f.jsx(A,o(l({id:"receiving_party"},m.register("receiving_party")),{placeholder:"Enter receiving party name"})),m.formState.errors.receiving_party&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.receiving_party.message})]})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"confidential_information",children:"Confidential Information"}),f.jsx($,o(l({id:"confidential_information"},m.register("confidential_information")),{placeholder:"Describe the confidential information to be protected",rows:3})),m.formState.errors.confidential_information&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.confidential_information.message})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"term",children:"Agreement Term"}),f.jsx(A,o(l({id:"term"},m.register("term")),{placeholder:"e.g., 2 years"})),m.formState.errors.term&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.term.message})]})]});case"service_agreement":return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"service_provider",children:"Service Provider"}),f.jsx(A,o(l({id:"service_provider"},m.register("service_provider")),{placeholder:"Enter service provider name"})),m.formState.errors.service_provider&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.service_provider.message})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"client",children:"Client"}),f.jsx(A,o(l({id:"client"},m.register("client")),{placeholder:"Enter client name"})),m.formState.errors.client&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.client.message})]})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"services",children:"Services Description"}),f.jsx($,o(l({id:"services"},m.register("services")),{placeholder:"Describe the services to be provided",rows:3})),m.formState.errors.services&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.services.message})]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"payment_terms",children:"Payment Terms"}),f.jsx(A,o(l({id:"payment_terms"},m.register("payment_terms")),{placeholder:"e.g., $100/hour, net 30 days"})),m.formState.errors.payment_terms&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.formState.errors.payment_terms.message})]})]});default:return null}})()]}),f.jsxs("div",{children:[f.jsx(ne,{htmlFor:"additional_terms",children:"Additional Terms (Optional)"}),f.jsx($,o(l({id:"additional_terms"},m.register("additional_terms")),{placeholder:"Add any additional terms or conditions...",rows:4}))]}),f.jsxs("div",{className:"flex gap-2 pt-4",children:[f.jsxs(j,{type:"button",variant:"outline",onClick:()=>{const e=m.getValues();if(m.formState.isValid){const s=u(e);c(s),i(!0)}else m.trigger()},disabled:!t,children:[f.jsx(me,{className:"w-4 h-4 mr-2"}),"Preview"]}),f.jsxs(j,{type:"submit",disabled:h.isPending||!t,children:[h.isPending?f.jsx(V,{className:"w-4 h-4 mr-2 animate-spin"}):f.jsx(oe,{className:"w-4 h-4 mr-2"}),"Create Draft"]})]})]})})]})},_e=[{title:"Rental Agreement",url:"/rental-agreement",icon:ce,description:"Create rental and lease agreements"},{title:"Employment Contract",url:"/employment-contract",icon:fe,description:"Generate employment contracts"},{title:"NDA",url:"/nda",icon:z,description:"Non-disclosure agreements"},{title:"Service Agreement",url:"/service-agreement",icon:ce,description:"Service provider contracts"}],we=()=>{const e=g(),[s,t]=x.useState("documents"),[r,a]=x.useState(""),{data:i=[],refetch:n}=y({queryKey:["legal-drafts"],queryFn:()=>ge.getDrafts()}),l=e=>{n(),t("drafts")},o=e=>{switch(e){case"draft":return"bg-yellow-100 text-yellow-700";case"review":return"bg-blue-100 text-blue-700";case"final":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}};return f.jsx(he,{children:f.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:f.jsx(pe,{className:"w-6 h-6 text-primary"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Legal Assistant"}),f.jsx("p",{className:"text-gray-600",children:"Get professional legal guidance and create documents"})]})]}),f.jsxs(P,{className:"bg-blue-50 border-blue-200",children:[f.jsx(K,{className:"h-4 w-4 text-blue-600"}),f.jsxs(q,{className:"text-blue-800",children:[f.jsx("strong",{children:"Important:"})," This AI assistant provides general legal information and document templates. It is not a substitute for professional legal advice. Always consult with a qualified attorney for your specific legal needs."]})]})]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Legal Documents"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:_e.map(s=>f.jsx(N,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(s.url),children:f.jsx(_,{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:f.jsx(s.icon,{className:"w-5 h-5 text-primary"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-medium text-gray-900",children:s.title}),f.jsx("p",{className:"text-sm text-gray-500",children:s.description})]})]})})},s.title))})]}),f.jsxs(S,{value:s,onValueChange:t,className:"space-y-6",children:[f.jsxs(D,{className:"grid w-full grid-cols-3",children:[f.jsxs(C,{value:"chat",className:"flex items-center gap-2",children:[f.jsx(W,{className:"w-4 h-4"}),"Chat Assistant"]}),f.jsxs(C,{value:"documents",className:"flex items-center gap-2",children:[f.jsx(ce,{className:"w-4 h-4"}),"Create Documents"]}),f.jsxs(C,{value:"drafts",className:"flex items-center gap-2",children:[f.jsx(xe,{className:"w-4 h-4"}),"My Drafts"]})]}),f.jsx(T,{value:"chat",className:"space-y-6",children:f.jsx(ye,{onDraftCreated:l,onSessionChange:e=>{a(e)}})}),f.jsx(T,{value:"documents",className:"space-y-6",children:f.jsx(Ne,{onDraftCreated:l,sessionId:r})}),f.jsx(T,{value:"drafts",className:"space-y-6",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsxs(N,{children:[f.jsx(w,{children:f.jsxs(b,{className:"flex items-center gap-2",children:[f.jsx(xe,{className:"w-5 h-5"}),"Drafts Overview"]})}),f.jsxs(_,{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm",children:"Total Drafts"}),f.jsx(E,{variant:"outline",children:i.length})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm",children:"In Progress"}),f.jsx(E,{variant:"outline",className:"bg-yellow-100 text-yellow-700",children:i.filter(e=>"draft"===e.status).length})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm",children:"Under Review"}),f.jsx(E,{variant:"outline",className:"bg-blue-100 text-blue-700",children:i.filter(e=>"review"===e.status).length})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm",children:"Finalized"}),f.jsx(E,{variant:"outline",className:"bg-green-100 text-green-700",children:i.filter(e=>"final"===e.status).length})]})]}),f.jsx(F,{}),f.jsxs("div",{className:"text-xs text-gray-500 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(G,{className:"w-3 h-3"}),f.jsx("span",{children:"Drafts are saved automatically"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ue,{className:"w-3 h-3"}),f.jsx("span",{children:"Generate final documents"})]})]})]})]})}),f.jsx("div",{className:"lg:col-span-3",children:f.jsxs(N,{children:[f.jsx(w,{children:f.jsx(b,{children:"My Legal Drafts"})}),f.jsx(_,{children:0===i.length?f.jsxs("div",{className:"text-center py-12",children:[f.jsx(ce,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No drafts yet"}),f.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first legal document to get started"}),f.jsx(j,{onClick:()=>t("documents"),children:"Create Document"})]}):f.jsx("div",{className:"space-y-4",children:i.map(e=>f.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),f.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.jsx(E,{className:o(e.status),children:e.status}),f.jsx("span",{className:"text-sm text-gray-500",children:e.document_type.replace("_"," ")}),f.jsxs("span",{className:"text-sm text-gray-500",children:["• ",new Date(e.updated_at).toLocaleDateString()]})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:["final"===e.status&&e.file_urls&&f.jsxs(f.Fragment,{children:[f.jsxs(j,{size:"sm",variant:"outline",children:[f.jsx(ue,{className:"w-4 h-4 mr-2"}),"PDF"]}),f.jsxs(j,{size:"sm",variant:"outline",children:[f.jsx(ue,{className:"w-4 h-4 mr-2"}),"DOCX"]})]}),f.jsxs(j,{size:"sm",variant:"outline",children:[f.jsx(ce,{className:"w-4 h-4 mr-2"}),"View"]})]})]},e.id))})})]})})]})})]})]})})};export{we as LegalAssistant,we as default};
