var e=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(s,i,t)=>i in s?e(s,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[i]=t,c=(e,s)=>{for(var i in s||(s={}))n.call(s,i)&&a(e,i,s[i]);if(t)for(var i of t(s))o.call(s,i)&&a(e,i,s[i]);return e},r=(e,t)=>s(e,i(t)),d=(e,s,i)=>new Promise((t,n)=>{var o=e=>{try{c(i.next(e))}catch(s){n(s)}},a=e=>{try{c(i.throw(e))}catch(s){n(s)}},c=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,a);c((i=i.apply(e,s)).next())});import{c as l,u as m,r as h,j as f,B as u,s as x,y as j}from"./index-BG6xRDTV.js";import{C as p,d as g,a as N,b as v,c as y}from"./card-CbL4dXrv.js";import{S as b}from"./switch-tTprUPfC.js";import{L as _}from"./label-DeCPOIix.js";import{S as w}from"./separator-HAFz-71w.js";import{B as k}from"./badge-B2QlhVT_.js";import{B as C}from"./bell-9bXVKGDo.js";import{M as S}from"./mail-B7XEQ-ym.js";import{C as q}from"./clock-zbgmrwZC.js";import{C as F}from"./check-circle-IwVTE-WC.js";import{S as P}from"./save-COjMa7JF.js";import"./index-HdY-knnU.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=l("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),E={email_notifications:!0,push_notifications:!0,booking_notifications:!0,message_notifications:!0,follower_notifications:!0,event_notifications:!0,discussion_notifications:!0,payment_notifications:!0,system_notifications:!0,marketing_notifications:!1,quiet_hours_enabled:!1,quiet_hours_start:"22:00",quiet_hours_end:"08:00"};function D(){const{user:e}=m(),[s,i]=h.useState(E),[t,n]=h.useState(!0),[o,a]=h.useState(!1),[l,D]=h.useState(!1);h.useEffect(()=>{(()=>{d(this,null,function*(){if(null==e?void 0:e.id)try{const{data:s,error:t}=yield x.from("user_notification_settings").select("*").eq("user_id",e.id).single();t&&"PGRST116"!==t.code&&j.error("Failed to load notification settings"),s&&i(c(c({},E),s))}catch(s){j.error("Failed to load notification settings")}finally{n(!1)}})})()},[null==e?void 0:e.id]);const T=(e,s)=>{i(i=>r(c({},i),{[e]:s})),D(!0)};return e?t?f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsx(p,{children:f.jsxs(g,{className:"p-8 text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),f.jsx("p",{className:"text-muted-foreground",children:"Loading notification settings..."})]})})}):f.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Notification Settings"}),f.jsx("p",{className:"text-muted-foreground",children:"Customize how and when you receive notifications from The Glocal."})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs(p,{children:[f.jsxs(N,{children:[f.jsxs(v,{className:"flex items-center gap-2",children:[f.jsx(C,{className:"h-5 w-5"}),"Notification Channels"]}),f.jsx(y,{children:"Choose how you want to receive notifications"})]}),f.jsxs(g,{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(S,{className:"h-5 w-5 text-muted-foreground"}),f.jsxs("div",{children:[f.jsx(_,{htmlFor:"email-notifications",className:"font-medium",children:"Email Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]})]}),f.jsx(b,{id:"email-notifications",checked:s.email_notifications,onCheckedChange:e=>T("email_notifications",e)})]}),f.jsx(w,{}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(O,{className:"h-5 w-5 text-muted-foreground"}),f.jsxs("div",{children:[f.jsx(_,{htmlFor:"push-notifications",className:"font-medium",children:"Push Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications in your browser"})]})]}),f.jsx(b,{id:"push-notifications",checked:s.push_notifications,onCheckedChange:e=>T("push_notifications",e)})]})]})]}),f.jsxs(p,{children:[f.jsxs(N,{children:[f.jsx(v,{children:"Notification Types"}),f.jsx(y,{children:"Choose which types of notifications you want to receive"})]}),f.jsx(g,{className:"space-y-4",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"booking-notifications",className:"font-medium",children:"Booking Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"New booking requests and updates"})]}),f.jsx(b,{id:"booking-notifications",checked:s.booking_notifications,onCheckedChange:e=>T("booking_notifications",e)})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"message-notifications",className:"font-medium",children:"Message Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"New messages and chat requests"})]}),f.jsx(b,{id:"message-notifications",checked:s.message_notifications,onCheckedChange:e=>T("message_notifications",e)})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"follower-notifications",className:"font-medium",children:"Follower Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"New followers and profile activity"})]}),f.jsx(b,{id:"follower-notifications",checked:s.follower_notifications,onCheckedChange:e=>T("follower_notifications",e)})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"event-notifications",className:"font-medium",children:"Event Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Event updates and reminders"})]}),f.jsx(b,{id:"event-notifications",checked:s.event_notifications,onCheckedChange:e=>T("event_notifications",e)})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"discussion-notifications",className:"font-medium",children:"Discussion Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Discussion requests and replies"})]}),f.jsx(b,{id:"discussion-notifications",checked:s.discussion_notifications,onCheckedChange:e=>T("discussion_notifications",e)})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"payment-notifications",className:"font-medium",children:"Payment Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Payment confirmations and issues"})]}),f.jsx(b,{id:"payment-notifications",checked:s.payment_notifications,onCheckedChange:e=>T("payment_notifications",e)})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"system-notifications",className:"font-medium",children:"System Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Important system updates"})]}),f.jsx(b,{id:"system-notifications",checked:s.system_notifications,onCheckedChange:e=>T("system_notifications",e)})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"marketing-notifications",className:"font-medium",children:"Marketing Notifications"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Promotional content and offers"})]}),f.jsx(b,{id:"marketing-notifications",checked:s.marketing_notifications,onCheckedChange:e=>T("marketing_notifications",e)})]})]})})]}),f.jsxs(p,{children:[f.jsxs(N,{children:[f.jsxs(v,{className:"flex items-center gap-2",children:[f.jsx(q,{className:"h-5 w-5"}),"Quiet Hours"]}),f.jsx(y,{children:"Set times when you don't want to receive notifications"})]}),f.jsxs(g,{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"quiet-hours-enabled",className:"font-medium",children:"Enable Quiet Hours"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Pause notifications during specific hours"})]}),f.jsx(b,{id:"quiet-hours-enabled",checked:s.quiet_hours_enabled,onCheckedChange:e=>T("quiet_hours_enabled",e)})]}),s.quiet_hours_enabled&&f.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg",children:[f.jsxs("div",{children:[f.jsx(_,{htmlFor:"quiet-hours-start",className:"text-sm font-medium",children:"Start Time"}),f.jsx("input",{id:"quiet-hours-start",type:"time",value:s.quiet_hours_start,onChange:e=>T("quiet_hours_start",e.target.value),className:"mt-1 w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx(_,{htmlFor:"quiet-hours-end",className:"text-sm font-medium",children:"End Time"}),f.jsx("input",{id:"quiet-hours-end",type:"time",value:s.quiet_hours_end,onChange:e=>T("quiet_hours_end",e.target.value),className:"mt-1 w-full px-3 py-2 border rounded-md"})]})]})]})]}),f.jsx(p,{children:f.jsx(g,{className:"p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-2",children:l&&f.jsxs(k,{variant:"secondary",className:"flex items-center gap-1",children:[f.jsx(F,{className:"h-3 w-3"}),"Unsaved Changes"]})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(u,{variant:"outline",onClick:()=>{i(E),D(!0)},disabled:o,children:"Reset to Defaults"}),f.jsx(u,{onClick:()=>d(this,null,function*(){if(null==e?void 0:e.id){a(!0);try{const{error:i}=yield x.from("user_notification_settings").upsert(r(c({user_id:e.id},s),{updated_at:(new Date).toISOString()}));if(i)throw i;D(!1),j.success("Notification settings saved successfully")}catch(i){j.error("Failed to save notification settings")}finally{a(!1)}}}),disabled:!l||o,className:"flex items-center gap-2",children:o?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):f.jsxs(f.Fragment,{children:[f.jsx(P,{className:"h-4 w-4"}),"Save Settings"]})})]})]})})})]})]}):f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsx(p,{children:f.jsxs(g,{className:"p-8 text-center",children:[f.jsx(C,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),f.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Sign in to manage notifications"}),f.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to be signed in to customize your notification preferences."}),f.jsx(u,{onClick:()=>window.location.href="/signin",children:"Sign In"})]})})})}export{D as default};
