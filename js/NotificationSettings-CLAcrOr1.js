var T=Object.defineProperty,L=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var E=(t,i,n)=>i in t?T(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,j=(t,i)=>{for(var n in i||(i={}))R.call(i,n)&&E(t,n,i[n]);if(F)for(var n of F(i))H.call(i,n)&&E(t,n,i[n]);return t},_=(t,i)=>L(t,M(i));var b=(t,i,n)=>new Promise((y,p)=>{var f=r=>{try{d(n.next(r))}catch(u){p(u)}},N=r=>{try{d(n.throw(r))}catch(u){p(u)}},d=r=>r.done?y(r.value):Promise.resolve(r.value).then(f,N);d((n=n.apply(t,i)).next())});import{c as I,u as Q,r as g,j as e,C as m,v as h,B as w,p as C,q as k,t as S,s as B,Q as v}from"./main-jfCIwKxb.js";import{S as c}from"./switch-Lmq7Q3k8.js";import{L as a}from"./label-BhjyL16S.js";import{S as z}from"./separator-CQeeh5sy.js";import{B as G}from"./badge-Cxniq3nT.js";import{B as D}from"./bell-CXNc_0l5.js";import{M as A}from"./mail-Cm13v54X.js";import{C as O}from"./clock-CT2ky6hG.js";import{C as U}from"./check-circle-DlKkeJkD.js";import{S as Y}from"./save-CTzb2421.js";import"./index-BqrjOP3n.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=I("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),q={email_notifications:!0,push_notifications:!0,booking_notifications:!0,message_notifications:!0,follower_notifications:!0,event_notifications:!0,discussion_notifications:!0,payment_notifications:!0,system_notifications:!0,marketing_notifications:!1,quiet_hours_enabled:!1,quiet_hours_start:"22:00",quiet_hours_end:"08:00"};function ae(){const{user:t}=Q(),[i,n]=g.useState(q),[y,p]=g.useState(!0),[f,N]=g.useState(!1),[d,r]=g.useState(!1);g.useEffect(()=>{b(this,null,function*(){if(t!=null&&t.id)try{const{data:l,error:x}=yield B.from("user_notification_settings").select("*").eq("user_id",t.id).single();x&&x.code!=="PGRST116"&&(console.error("Error loading notification settings:",x),v.error("Failed to load notification settings")),l&&n(j(j({},q),l))}catch(l){console.error("Error loading notification settings:",l),v.error("Failed to load notification settings")}finally{p(!1)}})},[t==null?void 0:t.id]);const u=()=>b(this,null,function*(){if(t!=null&&t.id){N(!0);try{const{error:s}=yield B.from("user_notification_settings").upsert(_(j({user_id:t.id},i),{updated_at:new Date().toISOString()}));if(s)throw s;r(!1),v.success("Notification settings saved successfully")}catch(s){console.error("Error saving notification settings:",s),v.error("Failed to save notification settings")}finally{N(!1)}}}),o=(s,l)=>{n(x=>_(j({},x),{[s]:l})),r(!0)},P=()=>{n(q),r(!0)};return t?y?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(m,{children:e.jsxs(h,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading notification settings..."})]})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Notification Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Customize how and when you receive notifications from Glocal."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsxs(C,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Notification Channels"]}),e.jsx(S,{children:"Choose how you want to receive notifications"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"email-notifications",className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]})]}),e.jsx(c,{id:"email-notifications",checked:i.email_notifications,onCheckedChange:s=>o("email_notifications",s)})]}),e.jsx(z,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"push-notifications",className:"font-medium",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications in your browser"})]})]}),e.jsx(c,{id:"push-notifications",checked:i.push_notifications,onCheckedChange:s=>o("push_notifications",s)})]})]})]}),e.jsxs(m,{children:[e.jsxs(C,{children:[e.jsx(k,{children:"Notification Types"}),e.jsx(S,{children:"Choose which types of notifications you want to receive"})]}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"booking-notifications",className:"font-medium",children:"Booking Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"New booking requests and updates"})]}),e.jsx(c,{id:"booking-notifications",checked:i.booking_notifications,onCheckedChange:s=>o("booking_notifications",s)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"message-notifications",className:"font-medium",children:"Message Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"New messages and chat requests"})]}),e.jsx(c,{id:"message-notifications",checked:i.message_notifications,onCheckedChange:s=>o("message_notifications",s)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"follower-notifications",className:"font-medium",children:"Follower Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"New followers and profile activity"})]}),e.jsx(c,{id:"follower-notifications",checked:i.follower_notifications,onCheckedChange:s=>o("follower_notifications",s)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"event-notifications",className:"font-medium",children:"Event Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Event updates and reminders"})]}),e.jsx(c,{id:"event-notifications",checked:i.event_notifications,onCheckedChange:s=>o("event_notifications",s)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"discussion-notifications",className:"font-medium",children:"Discussion Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Discussion requests and replies"})]}),e.jsx(c,{id:"discussion-notifications",checked:i.discussion_notifications,onCheckedChange:s=>o("discussion_notifications",s)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"payment-notifications",className:"font-medium",children:"Payment Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Payment confirmations and issues"})]}),e.jsx(c,{id:"payment-notifications",checked:i.payment_notifications,onCheckedChange:s=>o("payment_notifications",s)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"system-notifications",className:"font-medium",children:"System Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Important system updates"})]}),e.jsx(c,{id:"system-notifications",checked:i.system_notifications,onCheckedChange:s=>o("system_notifications",s)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"marketing-notifications",className:"font-medium",children:"Marketing Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Promotional content and offers"})]}),e.jsx(c,{id:"marketing-notifications",checked:i.marketing_notifications,onCheckedChange:s=>o("marketing_notifications",s)})]})]})})]}),e.jsxs(m,{children:[e.jsxs(C,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Quiet Hours"]}),e.jsx(S,{children:"Set times when you don't want to receive notifications"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"quiet-hours-enabled",className:"font-medium",children:"Enable Quiet Hours"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pause notifications during specific hours"})]}),e.jsx(c,{id:"quiet-hours-enabled",checked:i.quiet_hours_enabled,onCheckedChange:s=>o("quiet_hours_enabled",s)})]}),i.quiet_hours_enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"quiet-hours-start",className:"text-sm font-medium",children:"Start Time"}),e.jsx("input",{id:"quiet-hours-start",type:"time",value:i.quiet_hours_start,onChange:s=>o("quiet_hours_start",s.target.value),className:"mt-1 w-full px-3 py-2 border rounded-md"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"quiet-hours-end",className:"text-sm font-medium",children:"End Time"}),e.jsx("input",{id:"quiet-hours-end",type:"time",value:i.quiet_hours_end,onChange:s=>o("quiet_hours_end",s.target.value),className:"mt-1 w-full px-3 py-2 border rounded-md"})]})]})]})]}),e.jsx(m,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:d&&e.jsxs(G,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),"Unsaved Changes"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{variant:"outline",onClick:P,disabled:f,children:"Reset to Defaults"}),e.jsx(w,{onClick:u,disabled:!d||f,className:"flex items-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-4 w-4"}),"Save Settings"]})})]})]})})})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(m,{children:e.jsxs(h,{className:"p-8 text-center",children:[e.jsx(D,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Sign in to manage notifications"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to be signed in to customize your notification preferences."}),e.jsx(w,{onClick:()=>window.location.href="/signin",children:"Sign In"})]})})})}export{ae as default};
