var _=Object.defineProperty,w=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var C=(o,r,i)=>r in o?_(o,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[r]=i,h=(o,r)=>{for(var i in r||(r={}))k.call(r,i)&&C(o,i,r[i]);if(v)for(var i of v(r))F.call(r,i)&&C(o,i,r[i]);return o},y=(o,r)=>w(o,S(r));var N=(o,r,i)=>new Promise((s,c)=>{var x=l=>{try{d(i.next(l))}catch(p){c(p)}},t=l=>{try{d(i.throw(l))}catch(p){c(p)}},d=l=>l.done?s(l.value):Promise.resolve(l.value).then(x,t);d((i=i.apply(o,r)).next())});import{f as q,g as E,u as P,r as b,j as e,B as g,C as T,p as A,q as D,t as G,v as B}from"./main-Dczk40-q.js";import{I}from"./index-DxDoSqvO.js";import{T as R}from"./textarea-fzgM4rGq.js";import{S as M,a as V,b as H,c as U,d as Y}from"./select-B_T1mZfW.js";import{L as m}from"./label-KS36zHkM.js";import{C as j}from"./checkbox-C46tIEHU.js";import{R as z}from"./ResponsiveLayout-CxdDAcTl.js";import{u as O}from"./useLocation-Cm6aJjbC.js";import{C as J}from"./communityService-DVDDxUgh.js";import{A as K}from"./arrow-left-CzEz-wbP.js";import{U as L}from"./alert-vAohCTxn.js";import"./index-p4sF6Wge.js";import"./index-MbWpnwLW.js";import"./chevron-up-BzEWPbkd.js";import"./check-Dn5E7z_E.js";import"./separator-CnmZayxo.js";import"./index-Bvi8qGb8.js";import"./databaseUtils-DDxBFZda.js";import"./badge-iBsRNaSn.js";import"./scroll-area-Ya-nYYPz.js";import"./index-BCwUGNws.js";import"./tabs-ChvN7mKq.js";import"./useNotifications-DdfHYMMR.js";import"./notificationService-DiBkqnn5.js";import"./bell-CB9MQoCr.js";import"./user-xzPyfs-H.js";import"./search-CoqTXUJe.js";import"./calendar-DbYgxsnG.js";import"./zap-BM2f935p.js";import"./plus-B7hFD5Z2.js";import"./message-square-BskFJ3te.js";import"./map-pin-B65WKje7.js";import"./wifi-D1BoRTe0.js";import"./log-out-vClmguiA.js";import"./locationService-DP6rxedy.js";const Pe=()=>{const o=q(),{toast:r}=E(),{user:i}=P(),{currentLocation:s}=O(),[c,x]=b.useState(!1),[t,d]=b.useState({name:"",description:"",category:"General",is_public:!0,allow_anonymous_posts:!1,require_approval:!1}),l=["Photography","Food","Outdoor","Art","Music","Sports","Technology","Business","Health","Education","Gaming","Travel","Books","Movies","General"],p=a=>N(void 0,null,function*(){if(a.preventDefault(),!!i){if(!t.name.trim()||!t.description.trim()||!t.category){r({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}x(!0);try{const u=y(h({},t),{name:t.name.trim(),description:t.description.trim(),latitude:s==null?void 0:s.latitude,longitude:s==null?void 0:s.longitude,location_city:(s==null?void 0:s.city)||"",location_state:(s==null?void 0:s.state)||"",location_country:(s==null?void 0:s.country)||""});if(yield J.createGroup(u))r({title:"Success!",description:"Your community has been created successfully."}),o("/community");else throw new Error("Failed to create community")}catch(u){console.error("Error creating group:",u),r({title:"Error",description:"Failed to create community. Please try again.",variant:"destructive"})}finally{x(!1)}}}),n=(a,u)=>{d(f=>y(h({},f),{[a]:u}))};return e.jsx(z,{children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>o("/community"),className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Back to Community"]})}),e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-6 w-6 text-primary"}),e.jsx(D,{className:"text-2xl",children:"Create a Community"})]}),e.jsx(G,{children:"Start a new community group to connect with like-minded people in your area"})]}),e.jsx(B,{children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",children:"Community Name *"}),e.jsx(I,{id:"name",placeholder:"Enter community name",value:t.name,onChange:a=>n("name",a.target.value),maxLength:50}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.name.length,"/50 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"description",children:"Description *"}),e.jsx(R,{id:"description",placeholder:"Describe what your community is about...",value:t.description,onChange:a=>n("description",a.target.value),rows:4,maxLength:500}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.description.length,"/500 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"category",children:"Category *"}),e.jsxs(M,{value:t.category,onValueChange:a=>n("category",a),children:[e.jsx(V,{children:e.jsx(H,{placeholder:"Select a category"})}),e.jsx(U,{children:l.map(a=>e.jsx(Y,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{id:"is_public",checked:t.is_public,onCheckedChange:a=>n("is_public",a)}),e.jsx(m,{htmlFor:"is_public",className:"text-sm",children:"Public Community"})]}),e.jsx("p",{className:"text-sm text-muted-foreground ml-6",children:"Public communities are visible to everyone and anyone can join"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{id:"allow_anonymous_posts",checked:t.allow_anonymous_posts,onCheckedChange:a=>n("allow_anonymous_posts",a)}),e.jsx(m,{htmlFor:"allow_anonymous_posts",className:"text-sm",children:"Allow Anonymous Posts"})]}),e.jsx("p",{className:"text-sm text-muted-foreground ml-6",children:"Members can post anonymously in this community"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{id:"require_approval",checked:t.require_approval,onCheckedChange:a=>n("require_approval",a)}),e.jsx(m,{htmlFor:"require_approval",className:"text-sm",children:"Require Post Approval"})]}),e.jsx("p",{className:"text-sm text-muted-foreground ml-6",children:"Posts must be approved by moderators before appearing"})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Community Visibility"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your community will be visible to people in your local area based on their location settings. This helps create relevant local communities."}),s&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Location: ",s.city,", ",s.state]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>o("/community"),className:"flex-1",children:"Cancel"}),e.jsx(g,{type:"submit",disabled:c||!t.name.trim()||!t.description.trim()||!t.category,className:"flex-1",children:c?"Creating...":"Create Community"})]})]})})]})]})})};export{Pe as default};
