var E=(d,x,r)=>new Promise((l,n)=>{var i=o=>{try{c(r.next(o))}catch(t){n(t)}},f=o=>{try{c(r.throw(o))}catch(t){n(t)}},c=o=>o.done?l(o.value):Promise.resolve(o.value).then(i,f);c((r=r.apply(d,x)).next())});import{r as a,j as e,C as q,p as H,q as V,t as z,v as K,B as v,X as b,u as W,f as Y,N as G,g as J,s as U}from"./main-B2Z1A0fl.js";import{R as X}from"./ResponsiveLayout-CYnOsYqc.js";import{I as S}from"./index-yZSPA8A-.js";import{L as j}from"./label-naFpKG2V.js";import{B as Q}from"./badge-CdNeXDip.js";import{T as Z}from"./textarea-DgIPQeWX.js";import{S as $,a as D,b as ee,c as se,d as h}from"./select-BMFlvWAC.js";import{P as re}from"./zap-BDCYOuKc.js";import{P as L}from"./plus-B4gpjJdq.js";import{D as te}from"./dollar-sign-h3mQyYN-.js";import"./separator-DjSuCMYj.js";import"./index-oNALVX6M.js";import"./index-DJ86sh13.js";import"./databaseUtils-EE95jGy-.js";import"./scroll-area-BhRuPQbm.js";import"./index-BccyXWdq.js";import"./tabs-WXu0DGF3.js";import"./check-DuTiAf7C.js";import"./useNotifications-BC0Dj2vc.js";import"./notificationService-BphN-zZk.js";import"./bell-BrPt3aXG.js";import"./user-etsi-1kT.js";import"./search-DJSs7YT2.js";import"./calendar-Cawp_lnB.js";import"./alert-DX9hSffn.js";import"./message-square-B_GUjDSs.js";import"./map-pin-CZucSvvB.js";import"./wifi-BixKGM4R.js";import"./log-out-wiSeNNbg.js";import"./index-DENeMT3x.js";import"./chevron-up-CetLqit9.js";const le={music:["Vocals","Guitar","Piano","Drums","DJ","Live Band","Solo Performance"],visual:["Photography","Videography","Painting","Digital Art","Portrait Art","Wedding Photography"],performance:["Dancing","Acting","Comedy","Magic","Acrobatics","Theater"],event:["Event Planning","MC/Host","Wedding Planning","Corporate Events","Birthday Parties"],craft:["Crafts","Jewelry Making","Pottery","Woodworking","Textile Art","Sculpture"]},oe=({onSubmit:d,loading:x,initialData:r})=>{var _,A;const[l,n]=a.useState((r==null?void 0:r.artistSkills)||[]),[i,f]=a.useState(""),[c,o]=a.useState(((_=r==null?void 0:r.hourlyRateMin)==null?void 0:_.toString())||""),[t,y]=a.useState(((A=r==null?void 0:r.hourlyRateMax)==null?void 0:A.toString())||""),[p,N]=a.useState(""),[g,C]=a.useState((r==null?void 0:r.portfolioUrls)||[]),[P,T]=a.useState((r==null?void 0:r.bio)||""),[k,B]=a.useState((r==null?void 0:r.specialty)||""),I=s=>{!l.includes(s)&&l.length<10&&n([...l,s])},R=s=>{n(l.filter(m=>m!==s))},M=()=>{i.trim()&&!l.includes(i.trim())&&(n([...l,i.trim()]),f(""))},w=()=>{p.trim()&&!g.includes(p.trim())&&(C([...g,p.trim()]),N(""))},O=s=>{C(g.filter(m=>m!==s))},F=s=>{s.preventDefault(),l.length!==0&&d({artistSkills:l,hourlyRateMin:parseFloat(c)||0,hourlyRateMax:parseFloat(t)||0,portfolioUrls:g,bio:P,specialty:k})};return e.jsx("form",{onSubmit:F,className:"space-y-6",children:e.jsxs(q,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"Artist Profile Setup"]}),e.jsx(z,{children:"Tell potential clients about your skills and services"})]}),e.jsxs(K,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"specialty",children:"Primary Specialty"}),e.jsxs($,{value:k,onValueChange:B,children:[e.jsx(D,{children:e.jsx(ee,{placeholder:"Select your main specialty"})}),e.jsxs(se,{children:[e.jsx(h,{value:"musician",children:"Musician"}),e.jsx(h,{value:"photographer",children:"Photographer"}),e.jsx(h,{value:"performer",children:"Performer"}),e.jsx(h,{value:"visual_artist",children:"Visual Artist"}),e.jsx(h,{value:"event_planner",children:"Event Planner"}),e.jsx(h,{value:"crafter",children:"Crafter"}),e.jsx(h,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"bio",children:"Bio"}),e.jsx(Z,{id:"bio",placeholder:"Tell clients about yourself, your experience, and what makes you unique...",value:P,onChange:s=>T(s.target.value),rows:4})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Skills & Services"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select up to 10 skills that best describe your services"})]}),e.jsx("div",{className:"grid gap-4",children:Object.entries(le).map(([s,m])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium capitalize",children:s}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(u=>e.jsxs(v,{type:"button",variant:l.includes(u)?"default":"outline",size:"sm",onClick:()=>l.includes(u)?R(u):I(u),disabled:!l.includes(u)&&l.length>=10,children:[u,l.includes(u)&&e.jsx(b,{className:"ml-1 h-3 w-3"})]},u))})]},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{placeholder:"Add custom skill...",value:i,onChange:s=>f(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),M())}),e.jsx(v,{type:"button",onClick:M,disabled:l.length>=10,children:e.jsx(L,{className:"h-4 w-4"})})]}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{children:["Selected Skills (",l.length,"/10)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(s=>e.jsxs(Q,{variant:"secondary",className:"gap-1",children:[s,e.jsx(b,{className:"h-3 w-3 cursor-pointer",onClick:()=>R(s)})]},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Hourly Rate Range (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(S,{type:"number",placeholder:"Min rate",value:c,onChange:s=>o(s.target.value),min:"0",step:"0.01"})}),e.jsx("div",{children:e.jsx(S,{type:"number",placeholder:"Max rate",value:t,onChange:s=>y(s.target.value),min:"0",step:"0.01"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty if you prefer to negotiate rates per project"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{children:"Portfolio Links (Optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{placeholder:"Add portfolio URL...",value:p,onChange:s=>N(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),w())}),e.jsx(v,{type:"button",onClick:w,children:e.jsx(L,{className:"h-4 w-4"})})]}),g.length>0&&e.jsx("div",{className:"space-y-2",children:g.map((s,m)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-md",children:[e.jsx("span",{className:"flex-1 text-sm truncate",children:s}),e.jsx(v,{type:"button",variant:"ghost",size:"sm",onClick:()=>O(s),children:e.jsx(b,{className:"h-4 w-4"})})]},m))})]}),e.jsx(v,{type:"submit",className:"w-full",disabled:x||l.length===0,children:x?"Saving...":"Complete Artist Profile"})]})]})})},Oe=()=>{const{user:d}=W(),x=Y(),r=G(),{toast:l}=J(),[n,i]=a.useState(!1),[f,c]=a.useState(null);a.useEffect(()=>{var t;(t=r.state)!=null&&t.artistData&&c(r.state.artistData)},[r.state]);const o=t=>E(void 0,null,function*(){if(!d){l({title:"Authentication Required",description:"Please sign in to complete your artist profile.",variant:"destructive"});return}i(!0);try{const{error:y}=yield U.from("profiles").update({user_type:"artist",bio:t.bio,artist_skills:t.artistSkills,hourly_rate_min:t.hourlyRateMin>0?t.hourlyRateMin:null,hourly_rate_max:t.hourlyRateMax>0?t.hourlyRateMax:null,portfolio_urls:t.portfolioUrls.length>0?t.portfolioUrls:null}).eq("user_id",d.id);if(y)throw y;const{error:p}=yield U.from("artists").upsert({user_id:d.id,specialty:t.artistSkills&&t.artistSkills.length>0?t.artistSkills:[],experience_years:0,portfolio_urls:t.portfolioUrls,hourly_rate_min:t.hourlyRateMin>0?t.hourlyRateMin:null,hourly_rate_max:t.hourlyRateMax>0?t.hourlyRateMax:null,bio:t.bio,is_available:!0,updated_at:new Date().toISOString()},{onConflict:"user_id"});if(p)throw p;l({title:"Artist Profile Created!",description:"Your artist profile has been set up successfully. You can now receive booking requests."}),x("/feed")}catch(y){console.error("Error creating artist profile:",y),l({title:"Error",description:"Failed to create artist profile. Please try again.",variant:"destructive"})}finally{i(!1)}});return e.jsx(X,{children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Complete Your Artist Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Tell potential clients about your skills and services to start receiving bookings."})]}),e.jsx(oe,{onSubmit:o,loading:n,initialData:f})]})})};export{Oe as default};
