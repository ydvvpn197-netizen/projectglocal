var F=Object.defineProperty,H=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var L=(a,r,t)=>r in a?F(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,b=(a,r)=>{for(var t in r||(r={}))Y.call(r,t)&&L(a,t,r[t]);if(A)for(var t of A(r))U.call(r,t)&&L(a,t,r[t]);return a},y=(a,r)=>H(a,Q(r));var S=(a,r,t)=>new Promise((c,n)=>{var h=i=>{try{d(t.next(i))}catch(l){n(l)}},p=i=>{try{d(t.throw(i))}catch(l){n(l)}},d=i=>i.done?c(i.value):Promise.resolve(i.value).then(h,p);d((t=t.apply(a,r)).next())});import{n as V,r as R,j as e,aw as w,f as J,ay as K,h as O,a2 as W,a4 as X,aj as I,ao as P,ae as Z}from"./chunk-COTa-BBv.js";import{a as ee,B as u}from"./main-BEfTDqLJ.js";import{B as q}from"./chunk-uGCRAzUf.js";import{I as se}from"./chunk-D_ypG4Oz.js";import{T as ae,a as te,b as _,c as k}from"./chunk-Cvi3W8GP.js";import{S as C}from"./chunk-K5IbhWhT.js";import{D as z,a as B,b as G,c as x}from"./chunk-BbYMEagT.js";import{u as re}from"./chunk-D1_0D7gU.js";import{m as le}from"./chunk-COG8KeUH.js";import{a as ne}from"./chunk-DJzzOJWe.js";import"./chunk-DvlvDbdf.js";import"./chunk-BlluHz2J.js";import"./chunk-BA32w1ww.js";import"./chunk-CasIWBEQ.js";import"./chunk-C4jjqBrH.js";const T=({notification:a,onMarkAsRead:r,onDelete:t,onNavigate:c,isGeneral:n=!1})=>{const h=()=>{c(a)},p=l=>{l.stopPropagation(),n||t(a.id)},d=l=>{switch(l){case"urgent":return"border-l-red-500";case"high":return"border-l-orange-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-blue-500";default:return"border-l-primary"}},i=(l,o)=>o?{announcement:"📢",event:"📅",community:"👥",system:"⚙️"}[l]||"📢":{booking_request:"🎯",booking_accepted:"✅",booking_declined:"❌",message_request:"💬",new_follower:"👥",event_reminder:"📅",poll_result:"📊",review_reply:"💭",group_invite:"👋",event_update:"🔄",discussion_request:"💭",discussion_approved:"✅",discussion_rejected:"❌",event_created:"📅",event_updated:"🔄",event_cancelled:"❌",payment_received:"💰",payment_failed:"⚠️",system_announcement:"📢"}[l]||"🔔";return e.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`p-4 rounded-lg mb-4 cursor-pointer transition-all hover:shadow-md ${n?`bg-card ${d(a.priority)} border-l-4`:a.read?"bg-muted/50":"bg-primary/5 border-l-4 border-l-primary"}`,onClick:h,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-3xl flex-shrink-0",children:i(a.type,n)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[!n&&!a.read&&e.jsx(q,{variant:"default",className:"text-xs",children:"New"}),n&&a.priority&&e.jsx(q,{variant:"outline",className:"text-xs",children:a.priority}),!n&&e.jsx(u,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:p,children:e.jsx(Z,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-muted-foreground mb-3 leading-relaxed",children:a.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:ne(new Date(a.created_at),"MMM dd, yyyy • HH:mm")}),a.action_text&&e.jsx(u,{variant:"outline",size:"sm",onClick:l=>{l.stopPropagation(),c(a)},children:a.action_text})]})]})]})})},we=()=>{const{generalNotifications:a,personalNotifications:r,counts:t,loading:c,markAsRead:n,markAllAsRead:h,deleteNotification:p,refresh:d}=re(),{user:i}=ee(),l=V(),[o,m]=R.useState(""),[$,E]=R.useState("all"),N=s=>S(null,null,function*(){if(s.isGeneral||(yield n(s.id)),s.action_url){l(s.action_url);return}const D={booking_request:"/artist-dashboard",booking_accepted:"/artist-dashboard",booking_declined:"/artist-dashboard",message_request:"/messages",new_follower:"/profile",event_reminder:"/events",event_update:"/events",event_created:"/events",event_updated:"/events",event_cancelled:"/events",poll_result:"/community",review_reply:"/community",group_invite:"/community",discussion_request:"/artist-dashboard",discussion_approved:"/community",discussion_rejected:"/community",payment_received:"/artist-dashboard",payment_failed:"/artist-dashboard",system_announcement:"/",announcement:"/",event:"/events",community:"/community",system:"/"}[s.type];D&&l(D)}),v=s=>{p(s)},g=a.filter(s=>s.title.toLowerCase().includes(o.toLowerCase())||s.message.toLowerCase().includes(o.toLowerCase())),j=r.filter(s=>s.title.toLowerCase().includes(o.toLowerCase())||s.message.toLowerCase().includes(o.toLowerCase())),f=[...g.map(s=>y(b({},s),{isGeneral:!0})),...j.map(s=>y(b({},s),{isGeneral:!1}))].sort((s,M)=>new Date(M.created_at).getTime()-new Date(s.created_at).getTime());return e.jsx(ResponsiveLayout,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(w,{className:"h-8 w-8 text-primary"}),"Notifications"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Stay updated with the latest news and activities"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:d,disabled:c,children:[e.jsx(J,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),"Refresh"]}),i&&t.personal>0&&e.jsxs(u,{variant:"outline",size:"sm",onClick:h,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Mark all read"]}),e.jsxs(z,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Settings"]})}),e.jsxs(G,{align:"end",children:[e.jsx(x,{onClick:()=>l("/notification-settings"),children:"Notification Preferences"}),e.jsx(x,{onClick:()=>l("/privacy-settings"),children:"Privacy Settings"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(se,{placeholder:"Search notifications...",value:o,onChange:s=>m(s.target.value),className:"pl-10"})]}),e.jsxs(z,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Filter"]})}),e.jsxs(G,{align:"end",children:[e.jsx(x,{onClick:()=>m(""),children:"All notifications"}),e.jsx(x,{onClick:()=>m("event"),children:"Events"}),e.jsx(x,{onClick:()=>m("booking"),children:"Bookings"}),e.jsx(x,{onClick:()=>m("message"),children:"Messages"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-card p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:t.total})]})]})}),i&&e.jsx("div",{className:"bg-card p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Personal"}),e.jsx("p",{className:"text-2xl font-bold",children:t.personal})]})]})}),e.jsx("div",{className:"bg-card p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"h-6 w-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"General"}),e.jsx("p",{className:"text-2xl font-bold",children:t.general})]})]})})]}),e.jsxs(ae,{value:$,onValueChange:E,className:"w-full",children:[e.jsxs(te,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(_,{value:"all",children:["All (",f.length,")"]}),i&&e.jsxs(_,{value:"personal",children:["Personal (",j.length,")"]}),e.jsxs(_,{value:"general",children:["General (",g.length,")"]})]}),e.jsx(k,{value:"all",className:"space-y-4",children:c?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading notifications..."})]}):f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No notifications found"}),e.jsx("p",{className:"text-muted-foreground",children:o?"Try adjusting your search terms.":"You're all caught up!"})]}):e.jsx(C,{className:"h-[600px] pr-4",children:f.map(s=>e.jsx(T,{notification:s,onMarkAsRead:n,onDelete:v,onNavigate:N,isGeneral:s.isGeneral},`${s.isGeneral?"general":"personal"}-${s.id}`))})}),i&&e.jsx(k,{value:"personal",className:"space-y-4",children:j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(I,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No personal notifications"}),e.jsx("p",{className:"text-muted-foreground",children:o?"Try adjusting your search terms.":"You're all caught up with personal notifications!"})]}):e.jsx(C,{className:"h-[600px] pr-4",children:j.map(s=>e.jsx(T,{notification:s,onMarkAsRead:n,onDelete:v,onNavigate:N,isGeneral:!1},s.id))})}),e.jsx(k,{value:"general",className:"space-y-4",children:g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No general notifications"}),e.jsx("p",{className:"text-muted-foreground",children:o?"Try adjusting your search terms.":"No general announcements at the moment."})]}):e.jsx(C,{className:"h-[600px] pr-4",children:g.map(s=>e.jsx(T,{notification:s,onMarkAsRead:n,onDelete:v,onNavigate:N,isGeneral:!0},s.id))})})]})]})})};export{we as NotificationsPage};
