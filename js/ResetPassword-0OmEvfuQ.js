import{Q as s,r as e,u as a,b as t,j as r,C as o,v as i,w as l,x as n,y as c,B as m}from"./main-6fHUpRzT.js";import{I as d}from"./input-C0XSs2D-.js";import{L as p}from"./label-B5VpaZlr.js";import{U as h}from"./UniformHeader-Pt9zaF0r.js";import{L as j}from"./lock-ByGl_0i4.js";import{A as u}from"./arrow-left-CQA9bfHi.js";import{E as x}from"./eye-off-D0xxpRae.js";import{E as w}from"./eye-B6Cx85SJ.js";import"./useLocationManager-CZ-g8J39.js";import"./locationService-BtZ0rgoF.js";import"./NotificationBell-C-odGad4.js";import"./badge-Bj-CyBpD.js";import"./Combination-Bb2n9b59.js";import"./scroll-area-DRpKKhsW.js";import"./index-BlbmBgSN.js";import"./index-jVOyRz7F.js";import"./useNotifications-DlOFbLc9.js";import"./tabs-BNobDGc4.js";import"./check-BVB7WkBF.js";import"./bell-DFXHEubE.js";import"./user-DoINJrqZ.js";import"./index-GQUAIkZv.js";import"./NotificationButton-CnmvsVP-.js";import"./search-CeL_nYcN.js";import"./map-pin-DJOBTPKn.js";import"./log-out-B3lkkfQi.js";const f=()=>{const[f]=s(),[N,g]=e.useState(""),[v,y]=e.useState(""),[b,P]=e.useState(!1),[k,C]=e.useState(!1),[S,B]=e.useState(!1),[L,E]=e.useState(!1),[U,z]=e.useState(""),{resetPassword:A}=a(),q=t();e.useEffect(()=>{const s=f.get("token");s?z(s):q("/forgot-password")},[f,q]);return L?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5",children:[r.jsx(h,{showAuthButtons:!1,showLocationButton:!1}),r.jsx("div",{className:"flex items-center justify-center p-4 pt-12",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs(o,{children:[r.jsxs(i,{className:"space-y-1 text-center",children:[r.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(j,{className:"h-6 w-6 text-green-600"})}),r.jsx(l,{className:"text-2xl",children:"Password Updated"}),r.jsx(n,{children:"Your password has been successfully updated. You can now sign in with your new password."})]}),r.jsx(c,{children:r.jsx(m,{onClick:()=>q("/signin"),className:"w-full",children:"Sign In"})})]})})})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5",children:[r.jsx(h,{showAuthButtons:!1,showLocationButton:!1}),r.jsx("div",{className:"flex items-center justify-center p-4 pt-12",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs(o,{children:[r.jsxs(i,{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(m,{variant:"ghost",size:"sm",onClick:()=>q("/forgot-password"),className:"p-0 h-auto",children:r.jsx(u,{className:"h-4 w-4"})}),r.jsx(l,{className:"text-2xl",children:"Reset Password"})]}),r.jsx(n,{children:"Enter your new password below."})]}),r.jsx(c,{children:r.jsxs("form",{onSubmit:s=>((e,a,t)=>new Promise((r,o)=>{var i=e=>{try{n(t.next(e))}catch(s){o(s)}},l=e=>{try{n(t.throw(e))}catch(s){o(s)}},n=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,l);n((t=t.apply(e,a)).next())}))(void 0,null,function*(){if(s.preventDefault(),N===v)if(N.length<6)alert("Password must be at least 6 characters long");else{B(!0);try{const{error:s}=yield A(U,N);s||E(!0)}catch(e){}finally{B(!1)}}else alert("Passwords do not match")}),className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(p,{htmlFor:"password",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(d,{id:"password",type:b?"text":"password",placeholder:"Enter your new password",value:N,onChange:s=>g(s.target.value),required:!0}),r.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>P(!b),children:b?r.jsx(x,{className:"h-4 w-4"}):r.jsx(w,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(p,{htmlFor:"confirmPassword",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(d,{id:"confirmPassword",type:k?"text":"password",placeholder:"Confirm your new password",value:v,onChange:s=>y(s.target.value),required:!0}),r.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>C(!k),children:k?r.jsx(x,{className:"h-4 w-4"}):r.jsx(w,{className:"h-4 w-4"})})]})]}),r.jsx(m,{type:"submit",className:"w-full",disabled:S,children:S?"Updating...":"Update Password"})]})})]})})})]})};export{f as default};
