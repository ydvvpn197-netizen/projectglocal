var be=Object.defineProperty,Ce=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var ee=(j,r,t)=>r in j?be(j,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):j[r]=t,b=(j,r)=>{for(var t in r||(r={}))ke.call(r,t)&&ee(j,t,r[t]);if(Z)for(var t of Z(r))Ee.call(r,t)&&ee(j,t,r[t]);return j},C=(j,r)=>Ce(j,Se(r));var g=(j,r,t)=>new Promise((n,l)=>{var c=i=>{try{d(t.next(i))}catch(f){l(f)}},a=i=>{try{d(t.throw(i))}catch(f){l(f)}},d=i=>i.done?n(i.value):Promise.resolve(i.value).then(c,a);d((t=t.apply(j,r)).next())});import{r as p,j as e}from"./chunk-V8Tq47hD.js";import{ResponsiveLayout as V}from"./ResponsiveLayout.tsx-CBMj4ano.js";import{s as x,u as Ae,e as Pe,B as u,C as v,b as S,c as L,f as M,a as y}from"./main-nj8_qmr1.js";import{I as U}from"./chunk-CfjvP89K.js";import{B as N}from"./chunk-BqqQDpKD.js";import{A as k,a as E,b as A}from"./chunk-CJL1E-Mt.js";import{T as De,a as Te,b as F,c as J}from"./chunk-Dqojk3_S.js";import{S as se,a as te,b as ae,c as re,d as _}from"./chunk-BJzCN5QX.js";import{D as Le,a as Me,b as Ue,c as Fe,d as Je}from"./chunk-B-6hVeMl.js";import{T as Ie}from"./chunk-DiXj0jE4.js";import{L as $}from"./chunk-Ch6abJed.js";import{u as Oe}from"./chunk-DJWri4GU.js";import{K as ze,p as Be}from"./chunk-aOfXXddH.js";import{w as qe,r as Ve,P as H,v as $e,Y as He,U as I,h as O,M as R,C as ie,g as ne,d as Y,y as ce,a6 as Re,x as Ye,b as Qe}from"./chunk-BD2ShIYc.js";import"./chunk-7Gxbu0Lx.js";import"./chunk-BbVfpXIH.js";import"./chunk-HDUI5Ctd.js";import"./chunk-jOF7Mqj2.js";import"./chunk-DkszvQuI.js";import"./chunk-Cv5hKDJv.js";import"./chunk-CHdjBz-i.js";import"./chunk-M09l3cRM.js";class Ge{static getNearbyCommunities(r,t,n=50,l=20){return g(this,null,function*(){try{const{data:c,error:a}=yield x.rpc("get_nearby_communities",{p_latitude:r,p_longitude:t,p_radius_km:n,p_limit:l});if(a)throw a;return{communities:c||[],error:null}}catch(c){return console.error("Error getting nearby communities:",c),{communities:[],error:c instanceof Error?c.message:"Unknown error"}}})}static getCommunitiesByCity(r,t,n=20){return g(this,null,function*(){try{let l=x.from("local_communities").select(`
          *,
          profiles!local_communities_created_by_fkey(display_name, avatar_url),
          community_members!left(user_id)
        `).eq("is_active",!0).ilike("location_city",`%${r}%`);t&&(l=l.ilike("location_state",`%${t}%`));const{data:c,error:a}=yield l.order("member_count",{ascending:!1}).limit(n);if(a)throw a;return{communities:(c||[]).map(i=>{var f,P,w;return{id:i.id,name:i.name,description:i.description,location_city:i.location_city,location_state:i.location_state,location_country:i.location_country,latitude:i.latitude,longitude:i.longitude,member_count:i.member_count,is_active:i.is_active,created_by:i.created_by,created_at:i.created_at,updated_at:i.updated_at,creator_name:(f=i.profiles)==null?void 0:f.display_name,creator_avatar:(P=i.profiles)==null?void 0:P.avatar_url,user_is_member:((w=i.community_members)==null?void 0:w.length)>0}}),error:null}}catch(l){return console.error("Error getting communities by city:",l),{communities:[],error:l instanceof Error?l.message:"Unknown error"}}})}static createCommunity(r){return g(this,null,function*(){try{const{data:{user:t,session:n},error:l}=yield x.auth.getUser();if(console.log("Creating community - Auth check:",{user:t?{id:t.id,email:t.email}:null,hasSession:!!n,authError:l}),!t)return{success:!1,error:"Not authenticated"};const c=C(b({},r),{created_by:t.id});console.log("Inserting community data:",c);const{data:a,error:d}=yield x.from("local_communities").insert(c).select().single();if(d)throw console.error("Database error creating community:",d),d;console.log("Adding creator as admin member:",{community_id:a.id,user_id:t.id});const{error:i}=yield x.from("community_members").insert({community_id:a.id,user_id:t.id,role:"admin"});return i&&console.error("Error adding creator as member:",i),console.log("Community created successfully:",{communityId:a.id}),{success:!0,communityId:a.id}}catch(t){return console.error("Error creating community:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}static joinCommunity(r){return g(this,null,function*(){try{const{data:{user:t}}=yield x.auth.getUser();if(!t)return{success:!1,error:"Not authenticated"};const{data:n}=yield x.from("community_members").select("id").eq("community_id",r).eq("user_id",t.id).single();if(n)return{success:!1,error:"Already a member of this community"};const{error:l}=yield x.from("community_members").insert({community_id:r,user_id:t.id,role:"member"});if(l)throw l;return yield x.rpc("increment_community_member_count",{community_id:r}),{success:!0}}catch(t){return console.error("Error joining community:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}static leaveCommunity(r){return g(this,null,function*(){try{const{data:{user:t}}=yield x.auth.getUser();if(!t)return{success:!1,error:"Not authenticated"};const{error:n}=yield x.from("community_members").delete().eq("community_id",r).eq("user_id",t.id);if(n)throw n;return yield x.rpc("decrement_community_member_count",{community_id:r}),{success:!0}}catch(t){return console.error("Error leaving community:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}static getCommunityMembers(r,t=50){return g(this,null,function*(){try{const{data:n,error:l}=yield x.from("community_members").select(`
          *,
          profiles!community_members_user_id_fkey(display_name, avatar_url)
        `).eq("community_id",r).order("joined_at",{ascending:!1}).limit(t);if(l)throw l;return{members:(n||[]).map(a=>{var d,i;return{id:a.id,community_id:a.community_id,user_id:a.user_id,role:a.role,joined_at:a.joined_at,member_name:(d=a.profiles)==null?void 0:d.display_name,member_avatar:(i=a.profiles)==null?void 0:i.avatar_url}}),error:null}}catch(n){return console.error("Error getting community members:",n),{members:[],error:n instanceof Error?n.message:"Unknown error"}}})}static getCommunityPosts(r,t=20){return g(this,null,function*(){try{const{data:n,error:l}=yield x.from("community_posts").select(`
          *,
          profiles!user_id(display_name, avatar_url),
          community_post_likes!left(user_id)
        `).eq("community_id",r).order("created_at",{ascending:!1}).limit(t);if(l)throw l;return{posts:(n||[]).map(a=>{var d,i,f;return{id:a.id,community_id:a.community_id,user_id:a.user_id,title:a.title,content:a.content,type:a.type,created_at:a.created_at,updated_at:a.updated_at,author_name:(d=a.profiles)==null?void 0:d.display_name,author_avatar:(i=a.profiles)==null?void 0:i.avatar_url,likes_count:a.likes_count||0,comments_count:a.comments_count||0,user_liked:((f=a.community_post_likes)==null?void 0:f.length)>0}}),error:null}}catch(n){return console.error("Error getting community posts:",n),{posts:[],error:n instanceof Error?n.message:"Unknown error"}}})}static createCommunityPost(r){return g(this,null,function*(){try{const{data:{user:t}}=yield x.auth.getUser();if(!t)return{success:!1,error:"Not authenticated"};const{data:n,error:l}=yield x.from("community_posts").insert(C(b({},r),{user_id:t.id})).select().single();if(l)throw l;return{success:!0,postId:n.id}}catch(t){return console.error("Error creating community post:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}static getTrendingCommunities(r=10){return g(this,null,function*(){try{const{data:t,error:n}=yield x.from("local_communities").select(`
          *,
          profiles!local_communities_created_by_fkey(display_name, avatar_url)
        `).eq("is_active",!0).order("member_count",{ascending:!1}).limit(r);if(n)throw n;return{communities:(t||[]).map(c=>{var a,d;return{id:c.id,name:c.name,description:c.description,location_city:c.location_city,location_state:c.location_state,location_country:c.location_country,latitude:c.latitude,longitude:c.longitude,member_count:c.member_count,is_active:c.is_active,created_by:c.created_by,created_at:c.created_at,updated_at:c.updated_at,creator_name:(a=c.profiles)==null?void 0:a.display_name,creator_avatar:(d=c.profiles)==null?void 0:d.avatar_url}}),error:null}}catch(t){return console.error("Error getting trending communities:",t),{communities:[],error:t instanceof Error?t.message:"Unknown error"}}})}static searchCommunities(r,t=20){return g(this,null,function*(){try{const{data:n,error:l}=yield x.from("local_communities").select(`
          *,
          profiles!local_communities_created_by_fkey(display_name, avatar_url)
        `).or(`name.ilike.%${r}%, description.ilike.%${r}%, location_city.ilike.%${r}%`).eq("is_active",!0).order("member_count",{ascending:!1}).limit(t);if(l)throw l;return{communities:(n||[]).map(a=>{var d,i;return{id:a.id,name:a.name,description:a.description,location_city:a.location_city,location_state:a.location_state,location_country:a.location_country,latitude:a.latitude,longitude:a.longitude,member_count:a.member_count,is_active:a.is_active,created_by:a.created_by,created_at:a.created_at,updated_at:a.updated_at,creator_name:(d=a.profiles)==null?void 0:d.display_name,creator_avatar:(i=a.profiles)==null?void 0:i.avatar_url}}),error:null}}catch(n){return console.error("Error searching communities:",n),{communities:[],error:n instanceof Error?n.message:"Unknown error"}}})}}const Ns=()=>{const{communityId:j}=ze();Be();const{user:r}=Ae(),{toast:t}=Pe();Oe();const[n,l]=p.useState("overview"),[c,a]=p.useState("grid"),[d,i]=p.useState(""),[f,P]=p.useState("all"),[w,le]=p.useState("recent"),[z,B]=p.useState([]),[m,q]=p.useState(null),[Q,G]=p.useState([]),[K,oe]=p.useState([]),[de,D]=p.useState(!1),[Ke,We]=p.useState(!1),[me,W]=p.useState(!0),[X,he]=p.useState(null);p.useEffect(()=>{g(null,null,function*(){try{W(!0);const o=yield Ge.getCommunities(),h=[{id:"1",name:"Local Artists Collective",description:"A community for local artists to share their work and collaborate",category:"Arts & Culture",memberCount:245,postCount:89,isPrivate:!1,isJoined:!0,avatar:"/api/placeholder/64/64",tags:["art","music","collaboration"],location:{city:"San Francisco",state:"CA",country:"USA"},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),moderators:[{id:"1",name:"Sarah Johnson",avatar:"/api/placeholder/32/32"}],recentPosts:[]},{id:"2",name:"Tech Enthusiasts SF",description:"Technology discussions and networking for San Francisco tech professionals",category:"Technology",memberCount:1200,postCount:456,isPrivate:!1,isJoined:!1,avatar:"/api/placeholder/64/64",tags:["tech","startup","networking"],location:{city:"San Francisco",state:"CA",country:"USA"},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),moderators:[{id:"2",name:"Mike Chen",avatar:"/api/placeholder/32/32"}],recentPosts:[]}];B([...o,...h])}catch(o){he("Failed to load communities"),console.error("Error loading communities:",o)}finally{W(!1)}})},[]),p.useEffect(()=>{if(j){const s=z.find(o=>o.id===j);s&&(q(s),xe(s.id))}},[j,z]);const xe=s=>g(null,null,function*(){try{const o=[{id:"1",title:"New Art Exhibition Opening",content:"Join us for the opening of our new art exhibition featuring local artists...",author:{id:"1",name:"Sarah Johnson",avatar:"/api/placeholder/32/32",isModerator:!0},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),likes:24,comments:8,shares:3,tags:["art","exhibition","local"],isPinned:!0,isLocked:!1}],h=[{id:"1",title:"Community Meetup",description:"Monthly community meetup to discuss upcoming projects",date:"2024-01-15",time:"18:00",location:"Community Center",organizer:{id:"1",name:"Sarah Johnson",avatar:"/api/placeholder/32/32"},attendees:45,maxAttendees:100,isPublic:!0,category:"Social",tags:["meetup","networking"]}];G(o),oe(h)}catch(o){console.error("Error loading community content:",o)}}),ue=s=>g(null,null,function*(){try{B(o=>o.map(h=>h.id===s?C(b({},h),{isJoined:!0,memberCount:h.memberCount+1}):h)),t({title:"Joined Community",description:"You have successfully joined the community!"})}catch(o){t({title:"Error",description:"Failed to join community",variant:"destructive"})}}),je=s=>g(null,null,function*(){try{B(o=>o.map(h=>h.id===s?C(b({},h),{isJoined:!1,memberCount:h.memberCount-1}):h)),t({title:"Left Community",description:"You have left the community"})}catch(o){t({title:"Error",description:"Failed to leave community",variant:"destructive"})}}),ge=s=>g(null,null,function*(){var o,h;try{const T={id:Date.now().toString(),title:s.title||"",content:s.content||"",author:{id:(r==null?void 0:r.id)||"",name:((o=r==null?void 0:r.user_metadata)==null?void 0:o.full_name)||"Anonymous",avatar:(h=r==null?void 0:r.user_metadata)==null?void 0:h.avatar_url,isModerator:!1},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),likes:0,comments:0,shares:0,tags:s.tags||[],isPinned:!1,isLocked:!1};G(we=>[T,...we]),D(!1),t({title:"Post Created",description:"Your post has been published successfully!"})}catch(T){t({title:"Error",description:"Failed to create post",variant:"destructive"})}}),pe=[...z.filter(s=>{const o=s.name.toLowerCase().includes(d.toLowerCase())||s.description.toLowerCase().includes(d.toLowerCase())||s.tags.some(T=>T.toLowerCase().includes(d.toLowerCase())),h=f==="all"||s.category===f;return o&&h})].sort((s,o)=>{switch(w){case"popular":return o.memberCount-s.memberCount;case"trending":return o.postCount-s.postCount;case"recent":default:return new Date(o.updatedAt).getTime()-new Date(s.updatedAt).getTime()}}),fe=s=>e.jsxs(v,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(S,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(k,{className:"w-12 h-12",children:[e.jsx(E,{src:s.avatar}),e.jsx(A,{children:s.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx(L,{className:"text-lg",children:s.name}),e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),s.memberCount," members",s.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx(R,{className:"w-4 h-4"}),s.location.city]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.isPrivate&&e.jsx(Qe,{className:"w-4 h-4 text-gray-500"}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>q(s),children:e.jsx(ce,{className:"w-4 h-4"})})]})]})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:s.tags.map(o=>e.jsxs(N,{variant:"secondary",className:"text-xs",children:["#",o]},o))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{variant:"outline",children:s.category}),e.jsx(u,{variant:s.isJoined?"outline":"default",size:"sm",onClick:()=>s.isJoined?je(s.id):ue(s.id),children:s.isJoined?"Leave":"Join"})]})]})]},s.id),ve=()=>e.jsxs("div",{className:"space-y-6",children:[m&&e.jsx(v,{children:e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(k,{className:"w-16 h-16",children:[e.jsx(E,{src:m.avatar}),e.jsx(A,{children:m.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(L,{className:"text-2xl",children:m.name}),e.jsx(M,{className:"text-base",children:m.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[m.memberCount," members"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[m.postCount," posts"]})]}),m.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:m.location.city})]})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(v,{children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),e.jsx("p",{className:"text-2xl font-bold",children:(m==null?void 0:m.memberCount)||0})]}),e.jsx(I,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(v,{children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Posts"}),e.jsx("p",{className:"text-2xl font-bold",children:(m==null?void 0:m.postCount)||0})]}),e.jsx(O,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(v,{children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Events"}),e.jsx("p",{className:"text-2xl font-bold",children:K.length})]}),e.jsx(ie,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs(v,{children:[e.jsxs(S,{children:[e.jsx(L,{children:"Recent Activity"}),e.jsx(M,{children:"Latest posts and updates from the community"})]}),e.jsx(y,{children:e.jsx("div",{className:"space-y-4",children:Q.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsxs(k,{className:"w-8 h-8",children:[e.jsx(E,{src:s.author.avatar}),e.jsx(A,{children:s.author.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:s.author.name}),s.author.isModerator&&e.jsx(N,{variant:"secondary",className:"text-xs",children:"Moderator"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx("h5",{className:"font-medium text-sm mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.content}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:s.likes})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:s.comments})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:s.shares})]})]})]})]},s.id))})})]})]}),_e=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Community Posts"}),e.jsxs(u,{onClick:()=>D(!0),children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Create Post"]})]}),e.jsx("div",{className:"space-y-4",children:Q.map(s=>e.jsxs(v,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(k,{className:"w-10 h-10",children:[e.jsx(E,{src:s.author.avatar}),e.jsx(A,{children:s.author.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold",children:s.author.name}),s.author.isModerator&&e.jsx(N,{variant:"secondary",className:"text-xs",children:"Moderator"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.isPinned&&e.jsx(N,{variant:"default",children:"Pinned"}),e.jsx(u,{variant:"ghost",size:"icon",children:e.jsx(ce,{className:"w-4 h-4"})})]})]})}),e.jsxs(y,{children:[e.jsx("h5",{className:"font-semibold text-lg mb-2",children:s.title}),e.jsx("p",{className:"text-gray-700 mb-4",children:s.content}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:s.tags.map(o=>e.jsxs(N,{variant:"secondary",className:"text-xs",children:["#",o]},o))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(u,{variant:"ghost",size:"sm",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),s.likes]}),e.jsxs(u,{variant:"ghost",size:"sm",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),s.comments]}),e.jsxs(u,{variant:"ghost",size:"sm",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),s.shares]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"ghost",size:"sm",children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsx(u,{variant:"ghost",size:"sm",children:e.jsx(Y,{className:"w-4 h-4"})})]})]})]})]},s.id))})]}),ye=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Community Events"}),e.jsxs(u,{children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Create Event"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(s=>e.jsxs(v,{children:[e.jsxs(S,{children:[e.jsx(L,{className:"text-lg",children:s.title}),e.jsx(M,{children:s.description})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s.date," at ",s.time]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s.attendees," attendees"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(N,{variant:"outline",children:s.category}),e.jsx(u,{size:"sm",children:"Join Event"})]})]})]},s.id))})]}),Ne=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Community Members"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{placeholder:"Search members...",className:"w-64"}),e.jsxs(u,{variant:"outline",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Filter"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m==null?void 0:m.moderators.map(s=>e.jsx(v,{children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(k,{className:"w-10 h-10",children:[e.jsx(E,{src:s.avatar}),e.jsx(A,{children:s.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold",children:s.name}),e.jsx(N,{variant:"default",className:"text-xs",children:"Moderator"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Community Moderator"})]})]})})},s.id))})]});return me?e.jsx(V,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):X?e.jsx(V,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(AlertTriangle,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Communities"}),e.jsx("p",{className:"text-gray-600",children:X})]})}):e.jsx(V,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?m.name:"Communities"}),e.jsx("p",{className:"text-gray-600",children:m?"Connect with community members and participate in discussions":"Discover and join local communities"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>a(c==="grid"?"list":"grid"),children:c==="grid"?e.jsx(qe,{className:"w-4 h-4"}):e.jsx(Ve,{className:"w-4 h-4"})}),e.jsxs(u,{children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Create Community"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(U,{placeholder:"Search communities...",value:d,onChange:s=>i(s.target.value),className:"pl-10"})]})}),e.jsxs(se,{value:f,onValueChange:P,children:[e.jsx(te,{className:"w-48",children:e.jsx(ae,{placeholder:"Filter by category"})}),e.jsxs(re,{children:[e.jsx(_,{value:"all",children:"All Categories"}),e.jsx(_,{value:"Arts & Culture",children:"Arts & Culture"}),e.jsx(_,{value:"Technology",children:"Technology"}),e.jsx(_,{value:"Business",children:"Business"}),e.jsx(_,{value:"Sports",children:"Sports"}),e.jsx(_,{value:"Education",children:"Education"})]})]}),e.jsxs(se,{value:w,onValueChange:s=>le(s),children:[e.jsx(te,{className:"w-48",children:e.jsx(ae,{placeholder:"Sort by"})}),e.jsxs(re,{children:[e.jsx(_,{value:"recent",children:"Most Recent"}),e.jsx(_,{value:"popular",children:"Most Popular"}),e.jsx(_,{value:"trending",children:"Trending"})]})]})]}),m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{variant:"outline",onClick:()=>q(null),children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Back to Communities"]}),e.jsxs(De,{value:n,onValueChange:s=>l(s),children:[e.jsxs(Te,{className:"grid w-full grid-cols-4",children:[e.jsx(F,{value:"overview",children:"Overview"}),e.jsx(F,{value:"posts",children:"Posts"}),e.jsx(F,{value:"events",children:"Events"}),e.jsx(F,{value:"members",children:"Members"})]}),e.jsx(J,{value:"overview",className:"space-y-6",children:ve()}),e.jsx(J,{value:"posts",className:"space-y-6",children:_e()}),e.jsx(J,{value:"events",className:"space-y-6",children:ye()}),e.jsx(J,{value:"members",className:"space-y-6",children:Ne()})]})]}):e.jsx("div",{className:c==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:pe.map(fe)}),e.jsx(Le,{open:de,onOpenChange:D,children:e.jsxs(Me,{children:[e.jsxs(Ue,{children:[e.jsx(Fe,{children:"Create New Post"}),e.jsx(Je,{children:"Share something with the community"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx($,{htmlFor:"title",children:"Title"}),e.jsx(U,{id:"title",placeholder:"Enter post title"})]}),e.jsxs("div",{children:[e.jsx($,{htmlFor:"content",children:"Content"}),e.jsx(Ie,{id:"content",placeholder:"What's on your mind?",rows:4})]}),e.jsxs("div",{children:[e.jsx($,{htmlFor:"tags",children:"Tags"}),e.jsx(U,{id:"tags",placeholder:"Enter tags separated by commas"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsx(u,{onClick:()=>ge({}),children:"Create Post"})]})]})]})})]})})};export{Ns as default};
