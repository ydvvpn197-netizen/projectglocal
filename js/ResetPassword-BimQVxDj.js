import{o as s,r as e,u as a,b as t,j as r,B as o}from"./index-B5IYdG7F.js";import{I as i}from"./input-C4_QhDnm.js";import{L as n}from"./label-BIAuZBUP.js";import{C as l,a as c,b as m,c as d,d as p}from"./card-Bm1jiGt-.js";import{U as h}from"./UniformHeader-DL6fOkgF.js";import{L as j}from"./lock-VT3miBjZ.js";import{A as u}from"./arrow-left-CfH2SqfZ.js";import{E as x}from"./eye-off-Yicyrlvk.js";import{E as w}from"./eye-DAEnomQ6.js";import"./useLocationManager-Bec3bdrd.js";import"./locationService-BBE-Ay-I.js";import"./NotificationBell-DtnEojo4.js";import"./badge-Dh5Uj8vN.js";import"./Combination-BxRIZ8rt.js";import"./scroll-area-Beiyt5Kx.js";import"./index-9msbY5CZ.js";import"./index-jVOyRz7F.js";import"./useNotifications-C0wifgqF.js";import"./tabs-DPPBWbFC.js";import"./check-C9wwFfOs.js";import"./bell-qeMkXRtc.js";import"./settings-DSEWn2wM.js";import"./user-UOowhO7W.js";import"./index-DWtoKlrM.js";import"./NotificationButton-CqXjP_LK.js";import"./search-Co_OHmlK.js";import"./map-pin-BwnggLrZ.js";import"./log-out-DchhrZ8K.js";const f=()=>{const[f]=s(),[g,N]=e.useState(""),[v,y]=e.useState(""),[b,P]=e.useState(!1),[k,C]=e.useState(!1),[S,B]=e.useState(!1),[U,E]=e.useState(!1),[L,z]=e.useState(""),{resetPassword:A}=a(),F=t();e.useEffect(()=>{const s=f.get("token");s?z(s):F("/forgot-password")},[f,F]);return U?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5",children:[r.jsx(h,{showAuthButtons:!1,showLocationButton:!1}),r.jsx("div",{className:"flex items-center justify-center p-4 pt-12",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs(l,{children:[r.jsxs(c,{className:"space-y-1 text-center",children:[r.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(j,{className:"h-6 w-6 text-green-600"})}),r.jsx(m,{className:"text-2xl",children:"Password Updated"}),r.jsx(d,{children:"Your password has been successfully updated. You can now sign in with your new password."})]}),r.jsx(p,{children:r.jsx(o,{onClick:()=>F("/signin"),className:"w-full",children:"Sign In"})})]})})})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5",children:[r.jsx(h,{showAuthButtons:!1,showLocationButton:!1}),r.jsx("div",{className:"flex items-center justify-center p-4 pt-12",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs(l,{children:[r.jsxs(c,{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(o,{variant:"ghost",size:"sm",onClick:()=>F("/forgot-password"),className:"p-0 h-auto",children:r.jsx(u,{className:"h-4 w-4"})}),r.jsx(m,{className:"text-2xl",children:"Reset Password"})]}),r.jsx(d,{children:"Enter your new password below."})]}),r.jsx(p,{children:r.jsxs("form",{onSubmit:s=>((e,a,t)=>new Promise((r,o)=>{var i=e=>{try{l(t.next(e))}catch(s){o(s)}},n=e=>{try{l(t.throw(e))}catch(s){o(s)}},l=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,n);l((t=t.apply(e,a)).next())}))(void 0,null,function*(){if(s.preventDefault(),g===v)if(g.length<6)alert("Password must be at least 6 characters long");else{B(!0);try{const{error:s}=yield A(L,g);s||E(!0)}catch(e){}finally{B(!1)}}else alert("Passwords do not match")}),className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(n,{htmlFor:"password",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(i,{id:"password",type:b?"text":"password",placeholder:"Enter your new password",value:g,onChange:s=>N(s.target.value),required:!0}),r.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>P(!b),children:b?r.jsx(x,{className:"h-4 w-4"}):r.jsx(w,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(n,{htmlFor:"confirmPassword",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(i,{id:"confirmPassword",type:k?"text":"password",placeholder:"Confirm your new password",value:v,onChange:s=>y(s.target.value),required:!0}),r.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>C(!k),children:k?r.jsx(x,{className:"h-4 w-4"}):r.jsx(w,{className:"h-4 w-4"})})]})]}),r.jsx(o,{type:"submit",className:"w-full",disabled:S,children:S?"Updating...":"Update Password"})]})})]})})})]})};export{f as default};
