var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,n=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&i(e,t,s[t]);if(r)for(var t of r(s))l.call(s,t)&&i(e,t,s[t]);return e},c=(e,r)=>s(e,t(r));import{r as d,j as m,B as o}from"./index-B5IYdG7F.js";import{C as x,a as j,b as h,d as u,c as f}from"./card-Bm1jiGt-.js";import{B as p}from"./badge-Dh5Uj8vN.js";import{T as y,a as v,b as g,c as N}from"./tabs-DPPBWbFC.js";import{u as w,A as b,a as R,b as U,B as A}from"./AdminLayout-_0vC0t44.js";import{U as P}from"./users-Dh-Bdb-k.js";import{U as S}from"./user-check-CtFDHM0C.js";import{F as L}from"./file-text-BY8H24ea.js";import{A as k}from"./alert-triangle-C5DO0cvR.js";import{M as H}from"./message-square-j4RxGxzk.js";import{S as C}from"./settings-DSEWn2wM.js";import{S as O}from"./shield-CcnVg-IR.js";import{C as E}from"./clock-BZvZzp4Q.js";import{X as T}from"./x-circle-DK-YyWpW.js";import{C as D}from"./check-circle-CNkceqte.js";import"./index-9msbY5CZ.js";import"./input-C4_QhDnm.js";import"./label-BIAuZBUP.js";import"./alert-CQybxmNr.js";import"./eye-off-Yicyrlvk.js";import"./eye-DAEnomQ6.js";import"./loader-2-DMKXv0ZB.js";import"./scroll-area-Beiyt5Kx.js";import"./index-jVOyRz7F.js";import"./log-out-DchhrZ8K.js";const _=()=>{var e;const{adminUser:s}=w(),t=new b,[r,a]=d.useState({isLoading:!0,error:null,stats:{totalUsers:0,activeUsers:0,newUsersToday:0,totalContent:0,pendingReports:0,totalEvents:0,totalPosts:0,totalReviews:0},recentActivity:[],systemHealth:{status:"healthy",uptime:0,responseTime:0,errorRate:0}});d.useEffect(()=>{l()},[]);const l=()=>((e,s,t)=>new Promise((r,a)=>{var l=e=>{try{n(t.next(e))}catch(s){a(s)}},i=e=>{try{n(t.throw(e))}catch(s){a(s)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);n((t=t.apply(e,s)).next())}))(void 0,null,function*(){try{a(e=>c(n({},e),{isLoading:!0,error:null}));const e=yield t.getDashboardStats(),s=yield t.getAdminActions({page:1,limit:10,sortBy:"created_at",sortOrder:"desc"}),r={status:"healthy",uptime:99.9,responseTime:150,errorRate:.1};a(t=>c(n({},t),{isLoading:!1,stats:e,recentActivity:s.data||[],systemHealth:r}))}catch(e){a(s=>c(n({},s),{isLoading:!1,error:e instanceof Error?e.message:"Failed to load dashboard data"}))}});return r.isLoading?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):r.error?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:m.jsxs(x,{className:"w-full max-w-md",children:[m.jsx(j,{children:m.jsx(h,{className:"text-red-600",children:"Error Loading Dashboard"})}),m.jsxs(u,{children:[m.jsx("p",{className:"text-gray-600",children:r.error}),m.jsx(o,{onClick:l,className:"mt-4",children:"Retry"})]})]})}):m.jsx(R,{requiredPermission:"dashboard:view",children:m.jsx(U,{children:m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",(null==(e=null==s?void 0:s.profile)?void 0:e.full_name)||"Admin","!"]}),m.jsx("p",{className:"text-gray-600",children:"Here's what's happening on your platform today."})]}),m.jsxs(y,{defaultValue:"overview",className:"space-y-6",children:[m.jsxs(v,{children:[m.jsx(g,{value:"overview",children:"Overview"}),m.jsx(g,{value:"activity",children:"Recent Activity"}),m.jsx(g,{value:"system",children:"System Health"})]}),m.jsxs(N,{value:"overview",className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsxs(x,{children:[m.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(h,{className:"text-sm font-medium",children:"Total Users"}),m.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),m.jsxs(u,{children:[m.jsx("div",{className:"text-2xl font-bold",children:r.stats.totalUsers.toLocaleString()}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",r.stats.newUsersToday," today"]})]})]}),m.jsxs(x,{children:[m.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(h,{className:"text-sm font-medium",children:"Active Users"}),m.jsx(S,{className:"h-4 w-4 text-muted-foreground"})]}),m.jsxs(u,{children:[m.jsx("div",{className:"text-2xl font-bold",children:r.stats.activeUsers.toLocaleString()}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:[(r.stats.activeUsers/r.stats.totalUsers*100).toFixed(1),"% engagement"]})]})]}),m.jsxs(x,{children:[m.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(h,{className:"text-sm font-medium",children:"Total Content"}),m.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),m.jsxs(u,{children:[m.jsx("div",{className:"text-2xl font-bold",children:r.stats.totalContent.toLocaleString()}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Posts, Events, Reviews"})]})]}),m.jsxs(x,{children:[m.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(h,{className:"text-sm font-medium",children:"Pending Reports"}),m.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),m.jsxs(u,{children:[m.jsx("div",{className:"text-2xl font-bold",children:r.stats.pendingReports}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs(x,{children:[m.jsxs(j,{children:[m.jsx(h,{children:"Content Distribution"}),m.jsx(f,{children:"Breakdown by content type"})]}),m.jsxs(u,{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm font-medium",children:"Posts"}),m.jsx("span",{className:"text-sm text-muted-foreground",children:r.stats.totalPosts})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm font-medium",children:"Events"}),m.jsx("span",{className:"text-sm text-muted-foreground",children:r.stats.totalEvents})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm font-medium",children:"Reviews"}),m.jsx("span",{className:"text-sm text-muted-foreground",children:r.stats.totalReviews})]})]})]}),m.jsxs(x,{children:[m.jsxs(j,{children:[m.jsx(h,{children:"Quick Actions"}),m.jsx(f,{children:"Common admin tasks"})]}),m.jsxs(u,{className:"space-y-3",children:[m.jsxs(o,{variant:"outline",className:"w-full justify-start",size:"sm",children:[m.jsx(P,{className:"mr-2 h-4 w-4"}),"Manage Users"]}),m.jsxs(o,{variant:"outline",className:"w-full justify-start",size:"sm",children:[m.jsx(H,{className:"mr-2 h-4 w-4"}),"Review Reports"]}),m.jsxs(o,{variant:"outline",className:"w-full justify-start",size:"sm",children:[m.jsx(A,{className:"mr-2 h-4 w-4"}),"View Analytics"]}),m.jsxs(o,{variant:"outline",className:"w-full justify-start",size:"sm",children:[m.jsx(C,{className:"mr-2 h-4 w-4"}),"System Settings"]})]})]}),m.jsxs(x,{children:[m.jsxs(j,{children:[m.jsx(h,{children:"System Status"}),m.jsx(f,{children:"Platform health overview"})]}),m.jsxs(u,{children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[(e=>{switch(e){case"healthy":return m.jsx(D,{className:"h-4 w-4"});case"warning":return m.jsx(k,{className:"h-4 w-4"});case"error":return m.jsx(T,{className:"h-4 w-4"});default:return m.jsx(E,{className:"h-4 w-4"})}})(r.systemHealth.status),m.jsx(p,{className:(e=>{switch(e){case"healthy":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(r.systemHealth.status),children:r.systemHealth.status})]}),m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Uptime:"}),m.jsxs("span",{children:[r.systemHealth.uptime,"%"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Response Time:"}),m.jsxs("span",{children:[r.systemHealth.responseTime,"ms"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Error Rate:"}),m.jsxs("span",{children:[r.systemHealth.errorRate,"%"]})]})]})]})]})]})]}),m.jsx(N,{value:"activity",className:"space-y-6",children:m.jsxs(x,{children:[m.jsxs(j,{children:[m.jsx(h,{children:"Recent Admin Activity"}),m.jsx(f,{children:"Latest actions taken by administrators"})]}),m.jsx(u,{children:m.jsx("div",{className:"space-y-4",children:0===r.recentActivity.length?m.jsx("p",{className:"text-center text-gray-500 py-8",children:"No recent activity"}):r.recentActivity.map(e=>m.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(O,{className:"h-5 w-5 text-gray-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.action_type}),m.jsxs("p",{className:"text-sm text-gray-500",children:[e.resource_type,": ",e.resource_id]}),m.jsx("p",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleString()})]}),m.jsx("div",{className:"flex-shrink-0",children:m.jsx(p,{variant:e.success?"default":"destructive",children:e.success?"Success":"Failed"})})]},e.id))})})]})}),m.jsx(N,{value:"system",className:"space-y-6",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs(x,{children:[m.jsxs(j,{children:[m.jsx(h,{children:"Performance Metrics"}),m.jsx(f,{children:"Real-time system performance"})]}),m.jsx(u,{children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[m.jsx("span",{children:"CPU Usage"}),m.jsx("span",{children:"45%"})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"45%"}})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[m.jsx("span",{children:"Memory Usage"}),m.jsx("span",{children:"62%"})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"62%"}})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[m.jsx("span",{children:"Disk Usage"}),m.jsx("span",{children:"28%"})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:"28%"}})})]})]})})]}),m.jsxs(x,{children:[m.jsxs(j,{children:[m.jsx(h,{children:"Error Logs"}),m.jsx(f,{children:"Recent system errors"})]}),m.jsx(u,{children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"text-sm p-3 bg-red-50 border border-red-200 rounded",children:[m.jsx("div",{className:"font-medium text-red-800",children:"Database Connection Timeout"}),m.jsx("div",{className:"text-red-600",children:"2 minutes ago"})]}),m.jsxs("div",{className:"text-sm p-3 bg-yellow-50 border border-yellow-200 rounded",children:[m.jsx("div",{className:"font-medium text-yellow-800",children:"High Memory Usage Warning"}),m.jsx("div",{className:"text-yellow-600",children:"15 minutes ago"})]}),m.jsxs("div",{className:"text-sm p-3 bg-green-50 border border-green-200 rounded",children:[m.jsx("div",{className:"font-medium text-green-800",children:"All systems operational"}),m.jsx("div",{className:"text-green-600",children:"1 hour ago"})]})]})})]})]})})]})]})})})};export{_ as default};
